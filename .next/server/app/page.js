(()=>{var e={};e.id=974,e.ids=[974],e.modules={1030:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"00c246d70d7691588bd789a844f61a26ff42eab62d":()=>r.o,"608e2ddca0a529607f9c673d88a21674e3be60116b":()=>r.q});var r=a(18971)},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10135:(e,t,a)=>{Promise.resolve().then(a.bind(a,37626))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},18971:(e,t,a)=>{"use strict";a.d(t,{o:()=>v,q:()=>P});var r=a(17464);a(55414);var n=a(13913),o=a(8613),i=a(26763),s=a(70954),c=a(70564),l=a(37988),d=a(22168),u=a(26647),m=a(5485),p=a(22327),g=a(54022),h=a(21316),f=a(10854),y=a(73103);async function P(e,t){try{console.log("계약 정보 저장 시작:",e),console.log("화물 정보 저장 시작:",t);let a=(0,i.Ak)(),r=(0,i.Ak)();try{let[t]=await n.db.insert(o.contracts).values({id:a,contractNumber:e.contractNumber,contractDate:e.contractDate,exporter:e.exporter,importerId:e.importer,incoterms:e.incoterms}).returning();console.log("계약 정보 저장 완료:",t)}catch(e){throw console.error("계약 정보 저장 중 오류:",e),Error(`계약 정보 저장 실패: ${e instanceof Error?e.message:"알 수 없는 오류"}`)}try{let t=(0,i.Ak)(),[r]=await n.db.insert(o.payments).values({id:t,paymentDueDate:e.contractDate,paymentMethod:"T/T",contractId:a}).returning();console.log("결제 정보 저장 완료:",r);let[s]=await n.db.insert(o.paymentsTt).values({paymentId:t,advancePaymentDate:e.contractDate,advancePaymentRatio:30,advancePaymentAmount:0,remainingPaymentDate:e.contractDate,remainingPaymentRatio:70,remainingPaymentAmount:0,counterpartBank:""}).returning();console.log("T/T 결제 상세 정보 저장 완료:",s)}catch(e){throw console.error("결제 정보 저장 중 오류:",e),Error(`결제 정보 저장 실패: ${e instanceof Error?e.message:"알 수 없는 오류"}`)}try{let[t]=await n.db.insert(o.shipments).values({id:r,contractId:a,estimatedTimeArrival:e.estimatedTimeArrival,estimatedTimeDeparture:e.estimatedTimeDeparture,arrivalPort:e.arrivalPort,departurePort:e.departurePort}).returning();console.log("선적 정보 저장 완료:",t)}catch(e){throw console.error("선적 정보 저장 중 오류:",e),Error(`선적 정보 저장 실패: ${e instanceof Error?e.message:"알 수 없는 오류"}`)}for(let e of t)try{let t;let a=(0,i.Ak)(),s=await n.db.query.items.findFirst({where:(t,{eq:a,and:r})=>r(a(t.itemName,e.itemName),a(t.itemVariety,e.itemVariety),e.hsCode?a(t.hsCode,e.hsCode):void 0,a(t.packingUnit,e.packingUnit))});if(s)t=s.id;else{let[a]=await n.db.insert(o.items).values({id:(0,i.Ak)(),itemName:e.itemName,itemVariety:e.itemVariety,originCountry:null,hsCode:e.hsCode,packingUnit:e.packingUnit}).returning();t=a.id,console.log("새로운 품목 정보 저장 완료:",a)}let c=(0,i.Ak)(),l=e.unitPrice*e.exchangeRate*e.contractTon/1e3,[d]=await n.db.insert(o.cargos).values({id:c,itemsId:t,shipmentId:r,containerCount:1,contractTon:e.contractTon,progressStatus:"REVIEW",sellingPrice:e.sellingPrice,margin:e.sellingPrice-l,totalProfit:(e.sellingPrice-l)*e.contractTon*1e3,purchaseFeeRate:0}).returning();console.log("화물 정보 저장 완료:",d);let[u]=await n.db.insert(o.costs).values({id:a,cargoId:c,supplyPrice:e.unitPrice,laborCost:0,transportStorageFee:0,loadingUnloadingFee:0}).returning();console.log("비용 정보 저장 완료:",u);let[m]=await n.db.insert(o.costDetails).values({id:(0,i.Ak)(),costId:a,unitPrice:e.unitPrice,exchangeRate:e.exchangeRate,customsTaxRate:e.customsTaxRate,customTaxAmount:e.customTaxAmount,customsFee:e.customsFee,inspectionFee:e.inspectionFee,doCharge:0,otherCosts:e.otherCosts}).returning();console.log("비용 상세 정보 저장 완료:",m)}catch(e){throw console.error("화물 정보 저장 중 오류:",e),Error(`화물 정보 저장 실패: ${e instanceof Error?e.message:"알 수 없는 오류"}`)}return{success:!0,message:"계획이 성공적으로 저장되었습니다."}}catch(e){return console.error("계획 저장 중 오류 발생:",e),e instanceof Error&&console.error("오류 상세:",{message:e.message,stack:e.stack,name:e.name}),{success:!1,message:`계획 저장 중 오류가 발생했습니다: ${e instanceof Error?e.message:"알 수 없는 오류"}`}}}async function v(){try{let e=new c.y,t=new l.o,a=new d.q,r=new u.b,n=new m.T,o=new p.G,i=new g.W,P=new h.Y,[v,b,x,A,C,D,w,T]=await Promise.all([e.findAll(),t.findAll(),a.findAll(),r.findAll(),n.findAll(),o.findAll(),i.findAll(),P.getAllImporters()]);return x.map(e=>{let t=b.find(t=>t.id===e.shipmentId),a=v.find(e=>e.id===t?.contractId),r=A.find(t=>t.id===e?.itemsId),n=C.find(t=>t.cargoId===e?.id),o=D.find(e=>e.costId===n?.id),i=w.find(e=>e.contractId===a?.id),c=T.find(e=>e.id===a?.importerId),l={contract:{id:a?.id||"",contractNumber:a?.contractNumber||"",contractDate:a?.contractDate||"",exporter:a?.exporter||"",importerId:a?.importerId||"",incoterms:a?.incoterms||""},shipment:{id:t?.id||"",contractId:a?.id||"",estimatedTimeDeparture:t?.estimatedTimeDeparture||"",estimatedTimeArrival:t?.estimatedTimeArrival||"",shippingCompany:t?.shippingCompany||"",departurePort:t?.departurePort||"",arrivalPort:t?.arrivalPort||"",blNumber:t?.blNumber||"",palletOrderDate:t?.palletOrderDate||"",palletType:t?.palletType||""},cargo:{id:e?.id||"",remark:e?.remark||"",itemsId:e?.itemsId||"",shipmentId:t?.id||"",containerCount:e?.containerCount||0,contractTon:e?.contractTon||0,progressStatus:e?.progressStatus||"예정",customsClearanceDate:e?.customsClearanceDate||"",quarantineDate:e?.quarantineDate||"",warehouseEntryDate:e?.warehouseEntryDate||"",sellingPrice:e?.sellingPrice||0,margin:e?.margin||0,totalProfit:e?.totalProfit||0,purchaseFeeRate:e?.purchaseFeeRate||0,sellingPriceWholesale:e?.sellingPriceWholesale||0,sellingPriceRetail:e?.sellingPriceRetail||0},cost:{id:n?.id||"",cargoId:e?.id||"",supplyPrice:n?.supplyPrice||0,shippingCost:n?.shippingCost||0,laborCost:n?.laborCost||0,transportStorageFee:n?.transportStorageFee||0,loadingUnloadingFee:n?.loadingUnloadingFee||0,usanceInterest:n?.usanceInterest||0},costDetail:{id:o?.id||"",costId:n?.id||"",unitPrice:o?.unitPrice||0,exchangeRate:o?.exchangeRate||0,customsTaxRate:o?.customsTaxRate||0,customTaxAmount:o?.customTaxAmount||0,customsFee:o?.customsFee||0,inspectionFee:o?.inspectionFee||0,doCharge:o?.doCharge||0,otherCosts:o?.otherCosts||0,transferFee:o?.transferFee||0},payment:{id:i?.id||"",contractId:a?.id||"",paymentMethod:i?.paymentMethod||"",paymentDueDate:i?.paymentDueDate||"",advancePaymentDate:i?.advancePaymentDate||"",advancePaymentRatio:i?.advancePaymentRatio||0,advancePaymentAmount:i?.advancePaymentAmount||0,remainingPaymentDate:i?.remainingPaymentDate||"",remainingPaymentRatio:i?.remainingPaymentRatio||0,remainingPaymentAmount:i?.remainingPaymentAmount||0,counterpartBank:i?.counterpartBank||"",paymentTerm:i?.paymentTerm||"",totalContractAmount:i?.totalContractAmount||0},item:{id:r?.id||"",itemName:r?.itemName||"",itemVariety:r?.itemVariety||"",packingUnit:r?.packingUnit||"",originCountry:r?.originCountry||"",hsCode:r?.hsCode||""},importer:{id:c?.id||"",importerName:c?.importerName||"",calculationType:c?.calculationType||f.A.STANDARD}},d=(0,s.s)(l);return{id:e?.id||"",contractNumber:a?.contractNumber||"",progressStatus:y.LE[e?.progressStatus]||"예정",contractDate:a?.contractDate||"",importer:c?.importerName||"",exporter:a?.exporter||"",estimatedTimeArrival:t?.estimatedTimeArrival||"",arrivalPort:t?.arrivalPort||"",itemName:r?.itemName||"",contractTon:e?.contractTon||0,unitPrice:d.costDetail.unitPrice||0,totalPrice:d.costDetail.totalContractPrice||0,paymentMethod:i?.paymentMethod||"",warehouseEntryDate:e?.warehouseEntryDate||"",importCostPerKg:d.costDetail.costPerKg||0,supplyCostPerKg:d.cost.supplyPrice||0,totalCost:d.cost.contractorCost||0,totalCostPerKg:d.costDetail.costPerKg||0,sellingPrice:d.cargo.sellingPrice||0,margin:d.cargo.margin||0,totalProfit:d.cargo.totalProfit||0}})}catch(e){throw console.error("Failed to fetch plan data:",e),Error("계획 데이터를 불러오는데 실패했습니다.")}}(0,a(1634).D)([P,v]),(0,r.A)(P,"608e2ddca0a529607f9c673d88a21674e3be60116b",null),(0,r.A)(v,"00c246d70d7691588bd789a844f61a26ff42eab62d",null)},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23818:(e,t,a)=>{"use strict";a.d(t,{default:()=>P});var r=a(11432),n=a(37744),o=a.n(n),i=a(82423),s=a(84245),c=a(52510),l=a(64655),d=a(47338),u=a(1836),m=a(36),p=a(25867),g=a(55768),h=a(11417);a(37054);let f=o()(async()=>{},{loadableGenerated:{modules:["containers/dashboard.tsx -> react-apexcharts"]},ssr:!1});function y({propName:e,propData:t,propUnit:a}){let n=[{name:e,data:t?.map(e=>e.value)??[]}],o=t?.map(e=>e.category)??[];return(0,r.jsx)("div",{id:"chart",children:(0,r.jsx)(f,{options:{chart:{type:"bar",height:350},colors:["#43BD9D"],plotOptions:{bar:{horizontal:!1,columnWidth:"50%"}},dataLabels:{enabled:!1},stroke:{show:!0,width:2,colors:["transparent"]},xaxis:{categories:o},yaxis:{title:{text:a}},fill:{opacity:1},tooltip:{y:{formatter:e=>`${e.toLocaleString()}`}}},series:n,type:"bar",height:350})})}function P(){let[e,t]=(0,h.useState)({importer:"전체보기",exporter:"전체보기",item:"전체보기",exchangeRate:1400}),[a,n]=(0,h.useState)({tonnage:[],dollar:[],won:[]}),[o,f]=(0,h.useState)([]),[P,v]=(0,h.useState)({importer:["전체보기"],exporter:["전체보기"],item:["전체보기"]}),b=(e,a)=>{t(t=>({...t,[e]:a}))},x=(t=o)=>{let{exporter:a,importer:r,item:i,exchangeRate:s}=e,c=["3개월 전","2개월 전","1개월 전"],l=e=>[2,1,0].map((n,o)=>{let s=new Date(2025,3,1),l=new Date(s.getFullYear(),s.getMonth()-n,1),d=new Date(s.getFullYear(),s.getMonth()-n+1,1),u=t.filter(e=>{let t=new Date(e.contractDate);return t>=l&&t<d&&("전체보기"===a||e.exporter===a)&&("전체보기"===r||e.importer===r)&&("전체보기"===i||e.itemName===i)});return{category:c[o],value:u.reduce((t,a)=>t+e(a),0)}});n({tonnage:l(e=>e.contractTon),dollar:l(e=>e.totalPrice),won:l(e=>e.totalPrice*(s||1400))})},A=[{label:"톤수",unit:"TON (톤)"},{label:"달러가격",unit:"DOLLAR (달러)"},{label:"원가격",unit:"WON (원)"}];return(0,r.jsxs)(i.A,{sx:{width:"100%",height:"100%",padding:10,"@media (max-width: 600px)":{padding:3}},spacing:2,children:[(0,r.jsx)(s.A,{variant:"h4",sx:{marginBottom:10},children:"대시보드"}),(0,r.jsx)("h2",{className:"font-bold w-[50%]",children:"검색"}),(0,r.jsxs)(i.A,{direction:{xs:"column",md:"row"},spacing:2,className:"w-full md:w-[100%]",children:[(0,r.jsxs)(c.A,{fullWidth:!0,children:[(0,r.jsx)(l.A,{children:"수입회사"}),(0,r.jsx)(d.A,{value:e.importer,label:"수입회사",onChange:e=>b("importer",e.target.value),children:P.importer.map(e=>(0,r.jsx)(u.A,{value:e,children:e},e))})]}),(0,r.jsxs)(c.A,{fullWidth:!0,children:[(0,r.jsx)(l.A,{children:"공급처"}),(0,r.jsx)(d.A,{value:e.exporter,label:"공급처",onChange:e=>b("exporter",e.target.value),children:P.exporter.map(e=>(0,r.jsx)(u.A,{value:e,children:e},e))})]}),(0,r.jsxs)(c.A,{fullWidth:!0,children:[(0,r.jsx)(l.A,{children:"품목"}),(0,r.jsx)(d.A,{value:e.item,label:"품목",onChange:e=>b("item",e.target.value),children:P.item.map(e=>(0,r.jsx)(u.A,{value:e,children:e},e))})]}),(0,r.jsx)(m.A,{label:"환율 입력",type:"number",value:e.exchangeRate??"",onChange:e=>b("exchangeRate",Number(e.target.value)),className:"w-full"}),(0,r.jsx)(p.A,{className:"w-[50%] flex items-center p-2",variant:"contained",onClick:()=>x(),children:"적용하기"})]}),[{title:"톤 통계",type:"tonnage",index:0},{title:"달러가격 통계",type:"dollar",index:1},{title:"원가격 통계",type:"won",index:2}].map(({title:e,type:t,index:n})=>(0,r.jsxs)(g.A,{sx:{width:"100%",height:"100%",padding:5},children:[(0,r.jsx)(s.A,{variant:"h4",sx:{marginBottom:2},children:e}),(0,r.jsx)(y,{propName:A[n].label,propData:a[t],propUnit:A[n].unit})]},t))]})}},26246:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return s}});let r=a(11432),n=a(89660),o=a(29294),i=a(84648);function s(e){let{moduleIds:t}=e,a=o.workAsyncStorage.getStore();if(void 0===a)return null;let s=[];if(a.reactLoadableManifest&&t){let e=a.reactLoadableManifest;for(let a of t){if(!e[a])continue;let t=e[a].files;s.push(...t)}}return 0===s.length?null:(0,r.jsx)(r.Fragment,{children:s.map(e=>{let t=a.assetPrefix+"/_next/"+(0,i.encodeURIPath)(e);return e.endsWith(".css")?(0,r.jsx)("link",{precedence:"dynamic",href:t,rel:"stylesheet",as:"style"},e):((0,n.preload)(t,{as:"script",fetchPriority:"low"}),null)})})}},26647:(e,t,a)=>{"use strict";a.d(t,{b:()=>s});var r=a(13913),n=a(8613),o=a(98149),i=a(26763);class s{async create(e){let t=(0,i.Ak)(),[a]=await r.db.insert(n.items).values({...e,id:t}).returning();return a}async findById(e){let[t]=await r.db.select().from(n.items).where((0,o.eq)(n.items.id,e));return t}async searchItems(e){return await r.db.select().from(n.items).where((0,o.eq)(n.items.itemName,e))}async findAll(){return await r.db.select().from(n.items)}async update(e,t){let[a]=await r.db.update(n.items).set(t).where((0,o.eq)(n.items.id,e)).returning();return a}async delete(e){let[t]=await r.db.delete(n.items).where((0,o.eq)(n.items.id,e)).returning();return t}}},26763:(e,t,a)=>{"use strict";let r,n;a.d(t,{Ak:()=>s});var o=a(77598);function i(e){!r||r.length<e?(r=Buffer.allocUnsafe(128*e),o.webcrypto.getRandomValues(r),n=0):n+e>r.length&&(o.webcrypto.getRandomValues(r),n=0),n+=e}function s(e=21){i(e|=0);let t="";for(let a=n-e;a<n;a++)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[a]];return t}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37054:(e,t,a)=>{"use strict";a.d(t,{o:()=>n});var r=a(63016);let n=(0,r.createServerReference)("00c246d70d7691588bd789a844f61a26ff42eab62d",r.callServer,void 0,r.findSourceMapURL,"getPlanData")},37626:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});let r=(0,a(73602).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kang-yean-woo/gompyo/src/containers/dashboard.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kang-yean-woo/gompyo/src/containers/dashboard.tsx","default")},37744:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let r=a(68099)._(a(98872));function n(e,t){var a;let n={};"function"==typeof e&&(n.loader=e);let o={...n,...t};return(0,r.default)({...o,modules:null==(a=o.loadableGenerated)?void 0:a.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},55768:(e,t,a)=>{"use strict";a.d(t,{A:()=>P});var r=a(50023),n=a(38054),o=a(11417),i=a(28644),s=a(21790),c=a(41886),l=a(58883),d=a(64886),u=a(81660),m=a(49116);function p(e){return(0,m.Ay)("MuiCard",e)}(0,u.A)("MuiCard",["root"]);var g=a(11432);let h=["className","raised"],f=e=>{let{classes:t}=e;return(0,s.A)({root:["root"]},p,t)},y=(0,c.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),P=o.forwardRef(function(e,t){let a=(0,l.A)({props:e,name:"MuiCard"}),{className:o,raised:s=!1}=a,c=(0,n.A)(a,h),d=(0,r.A)({},a,{raised:s}),u=f(d);return(0,g.jsx)(y,(0,r.A)({className:(0,i.A)(u.root,o),elevation:s?8:void 0,ref:t,ownerState:d},c))})},57544:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(53729).Ay)()},59993:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>l});var r=a(65282),n=a(20277),o=a(47757),i=a.n(o),s=a(96002),c={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>s[e]);a.d(t,c);let l={children:["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,73522)),"/Users/kang-yean-woo/gompyo/src/app/page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,98445)),"/Users/kang-yean-woo/gompyo/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,24327)),"/Users/kang-yean-woo/gompyo/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,68366,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,75895,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/kang-yean-woo/gompyo/src/app/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63279:(e,t,a)=>{Promise.resolve().then(a.bind(a,23818))},70954:(e,t,a)=>{"use strict";a.d(t,{s:()=>l});var r=a(10854);class n{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee,o=t.sellingPrice-n/t.contractTon/1e3,i=o*t.contractTon*1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:o,totalProfit:i}}}class o{calculate(e,t){let a=(e.contractorCostAmount+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee+t.usanceInterest)/t.contractTon/1e3*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3,o=t.sellingPrice-n/t.contractTon/1e3,i=o*t.contractTon*1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:o,totalProfit:i}}}class i{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee,o=t.sellingPrice-n/t.contractTon/1e3,i=o*t.contractTon*1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:o,totalProfit:i}}}class s{static createStrategy(e){if(!e)return new n;switch(e.calculationType){case r.A.STANDARD:return new n;case r.A.DNB:return new o;case r.A.NAMHAE:return new i;default:return new n}}}class c{constructor(e){this.data=e,this.calculationStrategy=s.createStrategy(e.importer),this.calculatedValues=this.calculateValues()}calculateValues(){let e=this.data.costDetail.unitPrice||0,t=this.data.costDetail.exchangeRate||0,a=this.data.cargo.contractTon||0,r=this.data.cargo.sellingPrice||0,n=this.data.cargo.purchaseFeeRate||0,o=Math.floor(e*t*a),i=e*t/1e3,s=o+(this.data.costDetail.customTaxAmount||0)+(this.data.costDetail.transferFee||0)+(this.data.costDetail.customsFee||0)+(this.data.costDetail.inspectionFee||0)+(this.data.costDetail.doCharge||0)+(this.data.costDetail.otherCosts||0),c=s/a/1e3,l=this.calculationStrategy.calculate({contractorCostAmount:s,costPerKg:i,totalContractPrice:o,contractorCost:c},{contractTon:a,sellingPrice:r,purchaseFeeRate:n,shippingCost:this.data.cost.shippingCost||0,laborCost:this.data.cost.laborCost||0,transportStorageFee:this.data.cost.transportStorageFee||0,loadingUnloadingFee:this.data.cost.loadingUnloadingFee||0,usanceInterest:this.data.cost.usanceInterest||0});return{supplyPrice:l.supplyPrice,margin:l.margin,totalProfit:l.totalProfit,totalContractPrice:o,costPerKg:i,contractorCost:c,contractorProfit:l.contractorProfit,totalCost:l.totalCost}}mapItem(e){return{id:e.id,itemName:e.itemName||"",itemVariety:e.itemVariety||"",originCountry:e.originCountry||"",hsCode:e.hsCode||"",packingUnit:e.packingUnit||""}}mapShipment(e){return{id:e.id,estimatedTimeArrival:e.estimatedTimeArrival||"",estimatedTimeDeparture:e.estimatedTimeDeparture||"",arrivalPort:e.arrivalPort||"",departurePort:e.departurePort||"",blNumber:e.blNumber||"",palletOrderDate:e.palletOrderDate||"",palletType:e.palletType||"",shippingCompany:e.shippingCompany||"",contractId:e.contractId||""}}mapContract(e,t,a){return{id:e.id,incoterms:e.incoterms||"",contractNumber:e.contractNumber||"",contractDate:e.contractDate||"",exporter:e.exporter||"",importerId:e.importerId||"",departurePort:t.departurePort||"",arrivalPort:t.arrivalPort||"",estimatedTimeDeparture:t.estimatedTimeDeparture||"",estimatedTimeArrival:t.estimatedTimeArrival||"",blNumber:t.blNumber||"",importerName:a?.importerName||""}}mapPayment(e){return{id:e.id,paymentDueDate:e.paymentDueDate||"",paymentMethod:e.paymentMethod||"",contractId:e.contractId,advancePaymentDate:e.advancePaymentDate||"",advancePaymentRatio:e.advancePaymentRatio||0,advancePaymentAmount:e.advancePaymentAmount||0,remainingPaymentDate:e.remainingPaymentDate||"",remainingPaymentRatio:e.remainingPaymentRatio||0,remainingPaymentAmount:e.remainingPaymentAmount||0,counterpartBank:e.counterpartBank||"",paymentTerm:e.paymentTerm||"",totalContractAmount:this.calculatedValues.totalContractPrice}}mapAndCalculateCostDetail(e){return{id:e.id,unitPrice:e.unitPrice||0,totalContractPrice:this.calculatedValues.totalContractPrice,exchangeRate:e.exchangeRate||0,costPerKg:this.calculatedValues.costPerKg,costId:e.costId,customTaxAmount:e.customTaxAmount||0,customsTaxRate:e.customsTaxRate||0,customsFee:e.customsFee||0,inspectionFee:e.inspectionFee||0,doCharge:e.doCharge||0,otherCosts:e.otherCosts||0,transferFee:e.transferFee||0}}mapAndCalculateContractAmount(e,t){return{id:t.id,cargoId:t.cargoId,contractorCost:this.calculatedValues.contractorCost,supplyPrice:this.calculatedValues.supplyPrice,contractorProfit:this.calculatedValues.contractorProfit,shippingCost:t.shippingCost||0,laborCost:t.laborCost||0,transportStorageFee:t.transportStorageFee||0,loadingUnloadingFee:t.loadingUnloadingFee||0,usanceInterest:t.usanceInterest||0}}mapAndCalculateExpense(e){return{id:e.id,itemsId:e.itemsId,shipmentId:e.shipmentId,containerCount:e.containerCount,contractTon:e.contractTon,customsClearanceDate:e.customsClearanceDate,quarantineDate:e.quarantineDate,warehouseEntryDate:e.warehouseEntryDate,progressStatus:e.progressStatus,totalCost:this.calculatedValues.totalCost,sellingPrice:e.sellingPrice||0,sellingPriceWholesale:e.sellingPriceWholesale||0,sellingPriceRetail:e.sellingPriceRetail||0,margin:this.calculatedValues.margin,totalProfit:this.calculatedValues.totalProfit,purchaseFeeRate:e.purchaseFeeRate,remark:e.remark}}calculate(){return{importer:this.data.importer,contract:this.mapContract(this.data.contract,this.data.shipment,this.data.importer),payment:this.mapPayment(this.data.payment),costDetail:this.mapAndCalculateCostDetail(this.data.costDetail),cost:this.mapAndCalculateContractAmount(this.data.cargo,this.data.cost),cargo:this.mapAndCalculateExpense(this.data.cargo),item:this.mapItem(this.data.item),shipment:this.mapShipment(this.data.shipment)}}}function l(e){return new c(e).calculate()}},73522:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(10674),n=a(37626);function o(){return(0,r.jsx)(n.default,{})}},77598:e=>{"use strict";e.exports=require("node:crypto")},78379:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return n}});let r=a(21647);function n(e){let{reason:t,children:a}=e;throw Object.defineProperty(new r.BailoutToCSRError(t),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},79551:e=>{"use strict";e.exports=require("url")},82423:(e,t,a)=>{"use strict";a.d(t,{A:()=>w});var r=a(38054),n=a(50023),o=a(11417),i=a(28644),s=a(28825),c=a(21790),l=a(49116),d=a(57544),u=a(84448),m=a(75770),p=a(82989),g=a(29119),h=a(80376),f=a(11432);let y=["component","direction","spacing","divider","children","className","useFlexGap"],P=(0,p.A)(),v=(0,d.A)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root});function b(e){return(0,u.A)({props:e,name:"MuiStack",defaultTheme:P})}let x=e=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[e],A=({ownerState:e,theme:t})=>{let a=(0,n.A)({display:"flex",flexDirection:"column"},(0,g.NI)({theme:t},(0,g.kW)({values:e.direction,breakpoints:t.breakpoints.values}),e=>({flexDirection:e})));if(e.spacing){let r=(0,h.LX)(t),n=Object.keys(t.breakpoints.values).reduce((t,a)=>(("object"==typeof e.spacing&&null!=e.spacing[a]||"object"==typeof e.direction&&null!=e.direction[a])&&(t[a]=!0),t),{}),o=(0,g.kW)({values:e.direction,base:n}),i=(0,g.kW)({values:e.spacing,base:n});"object"==typeof o&&Object.keys(o).forEach((e,t,a)=>{if(!o[e]){let r=t>0?o[a[t-1]]:"column";o[e]=r}}),a=(0,s.A)(a,(0,g.NI)({theme:t},i,(t,a)=>e.useFlexGap?{gap:(0,h._W)(r,t)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${x(a?o[a]:e.direction)}`]:(0,h._W)(r,t)}}))}return(0,g.iZ)(t.breakpoints,a)};var C=a(41886),D=a(58883);let w=function(e={}){let{createStyledComponent:t=v,useThemeProps:a=b,componentName:s="MuiStack"}=e,d=()=>(0,c.A)({root:["root"]},e=>(0,l.Ay)(s,e),{}),u=t(A);return o.forwardRef(function(e,t){let s=a(e),c=(0,m.A)(s),{component:l="div",direction:p="column",spacing:g=0,divider:h,children:P,className:v,useFlexGap:b=!1}=c,x=(0,r.A)(c,y),A=d();return(0,f.jsx)(u,(0,n.A)({as:l,ownerState:{direction:p,spacing:g,useFlexGap:b},ref:t,className:(0,i.A)(A.root,v)},x,{children:h?function(e,t){let a=o.Children.toArray(e).filter(Boolean);return a.reduce((e,r,n)=>(e.push(r),n<a.length-1&&e.push(o.cloneElement(t,{key:`separator-${n}`})),e),[])}(P,h):P}))})}({createStyledComponent:(0,C.Ay)("div",{name:"MuiStack",slot:"Root",overridesResolver:(e,t)=>t.root}),useThemeProps:e=>(0,D.A)({props:e,name:"MuiStack"})})},84648:(e,t)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"encodeURIPath",{enumerable:!0,get:function(){return a}})},87550:e=>{"use strict";e.exports=require("better-sqlite3")},98872:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return l}});let r=a(11432),n=a(11417),o=a(78379),i=a(26246);function s(e){return{default:e&&"default"in e?e.default:e}}let c={loader:()=>Promise.resolve(s(()=>null)),loading:null,ssr:!0},l=function(e){let t={...c,...e},a=(0,n.lazy)(()=>t.loader().then(s)),l=t.loading;function d(e){let s=l?(0,r.jsx)(l,{isLoading:!0,pastDelay:!0,error:null}):null,c=!t.ssr||!!t.loading,d=c?n.Suspense:n.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.PreloadChunks,{moduleIds:t.modules}),(0,r.jsx)(a,{...e})]}):(0,r.jsx)(o.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(a,{...e})});return(0,r.jsx)(d,{...c?{fallback:s}:{},children:u})}return d.displayName="LoadableComponent",d}}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[883,457,33,114,547,340,528],()=>a(59993));module.exports=r})();
