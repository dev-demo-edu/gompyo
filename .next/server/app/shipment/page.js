(()=>{var e={};e.id=1,e.ids=[1],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10920:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"0003009d873d621b767ebfb709789f648c231c485b":()=>l.y4,"0028b4c78e95647dc5a53ee5fba9631161871c02cb":()=>l.wz,"0030665d1c07fcb4de0143ec72ae810e2dc9ce96e5":()=>l.OA,"003fa9301003c8ba05a336e03f03866e45be449bd6":()=>l.Dm,"0049339fb493948c1ac1860dd2eac9b3f1836c541e":()=>d,"004c7fb7d7ab1c521263cba5f72104bb1b194f1053":()=>l._4,"0056514906622dc5d1f36400c763a82f1feea6dea8":()=>a.op,"4023a82c0377ba75765752ff21005200097bd8ec35":()=>l.Mo,"404757e7a76cb9b03e2ba3b2fa52f1184db3542cd1":()=>l.Fq,"406ae734aa33a7d3bd51f01bfc3806dd08d1688a7a":()=>a.ws,"40936ad88e3f1a4fa4fe1c0dd6aec3e2d65e62a0c1":()=>l.Lx,"40f1e18f30af0fbc377817d793409ade21b851dabe":()=>l.V3,"60aad6fa22992cc57a523c0a16b305f260de2e2e48":()=>a.qT});var a=r(18971),n=r(17464);r(55414);var o=r(13913),i=r(70954),s=r(10854),c=r(73103);async function d(){return(await o.db.query.cargos.findMany({with:{item:!0,shipment:{with:{contract:{with:{importer:!0,payments:{with:{paymentsTt:!0}}}}}},costs:{with:{costDetails:!0}}},orderBy:(e,{desc:t})=>[t(e.createdAt)]})).map(e=>{let t=e.item,r=e.shipment,a=r?.contract,n=a?.importer,o=a?.payments?.[0],d=o?.paymentsTt,l=e.costs?.[0],p=l?.costDetails?.[0],m={contract:{id:a?.id||"",contractNumber:a?.contractNumber||"",contractDate:a?.contractDate||"",exporter:a?.exporter||"",importerId:a?.importerId||"",incoterms:a?.incoterms||"",createdAt:a?.createdAt||"",updatedAt:a?.updatedAt||""},shipment:{id:r?.id||"",contractId:a?.id||"",estimatedTimeDeparture:r?.estimatedTimeDeparture||"",estimatedTimeArrival:r?.estimatedTimeArrival||"",shippingCompany:r?.shippingCompany||"",departurePort:r?.departurePort||"",arrivalPort:r?.arrivalPort||"",blNumber:r?.blNumber||"",palletOrderDate:r?.palletOrderDate||"",palletType:r?.palletType||"",createdAt:r?.createdAt||"",updatedAt:r?.updatedAt||""},cargo:{id:e?.id||"",remark:e?.remark||"",itemsId:e?.itemsId||"",shipmentId:r?.id||"",containerCount:e?.containerCount||0,contractTon:e?.contractTon||0,progressStatus:e?.progressStatus||"예정",customsClearanceDate:e?.customsClearanceDate||"",quarantineDate:e?.quarantineDate||"",warehouseEntryDate:e?.warehouseEntryDate||"",sellingPrice:e?.sellingPrice||0,margin:e?.margin||0,totalProfit:e?.totalProfit||0,purchaseFeeRate:e?.purchaseFeeRate||0,sellingPriceWholesale:e?.sellingPriceWholesale||0,sellingPriceRetail:e?.sellingPriceRetail||0,createdAt:e?.createdAt||"",updatedAt:e?.updatedAt||""},cost:{id:l?.id||"",cargoId:e?.id||"",supplyPrice:l?.supplyPrice||0,shippingCost:l?.shippingCost||0,laborCost:l?.laborCost||0,transportStorageFee:l?.transportStorageFee||0,loadingUnloadingFee:l?.loadingUnloadingFee||0,usanceInterest:l?.usanceInterest||0,gompyoLaborCost:l?.gompyoLaborCost||0,gompyoTransportStorageFee:l?.gompyoTransportStorageFee||0,gompyoLoadingUnloadingFee:l?.gompyoLoadingUnloadingFee||0},costDetail:{id:p?.id||"",costId:l?.id||"",unitPrice:p?.unitPrice||0,exchangeRate:p?.exchangeRate||0,customsTaxRate:p?.customsTaxRate||0,customsFee:p?.customsFee||0,inspectionFee:p?.inspectionFee||0,doCharge:p?.doCharge||0,otherCosts:p?.otherCosts||0,transferFee:p?.transferFee||0},payment:{id:o?.id||"",contractId:a?.id||"",paymentMethod:o?.paymentMethod||"",paymentDueDate:o?.paymentDueDate||"",advancePaymentDate:d?.advancePaymentDate||"",advancePaymentRatio:d?.advancePaymentRatio||0,remainingPaymentDate:d?.remainingPaymentDate||"",remainingPaymentRatio:d?.remainingPaymentRatio||0,counterpartBank:d?.counterpartBank||"",paymentTerm:""},item:{id:t?.id||"",itemName:t?.itemName||"",itemVariety:t?.itemVariety||"",packingUnit:t?.packingUnit||"",originCountry:t?.originCountry||"",hsCode:t?.hsCode||""},importer:{id:n?.id||"",importerName:n?.importerName||"",importerCode:n?.importerCode||"gompyo",calculationType:n?.calculationType||s.A.STANDARD}},u=(0,i.s)(m);return{id:e?.id||"",contractNumber:a?.contractNumber||"",progressStatus:c.LE[e?.progressStatus]||"예정",contractDate:a?.contractDate||"",importer:n?.importerName||"",productName:t?.itemVariety||"",itemName:t?.itemName||"",weight:e?.contractTon||0,containerCount:e?.containerCount||0,packagingUnit:t?.packingUnit||"",unitPrice:u.costDetail.unitPrice||0,totalPrice:u.costDetail.totalContractPrice||0,totalPriceUsd:u.costDetail.totalPriceUsd||0,supplyPrice:u.cost.supplyPrice||0,sellingPrice:u.cargo.sellingPrice||0,paymentMethod:o?.paymentMethod||"",hsCode:t?.hsCode||"",blNumber:r?.blNumber||"",departurePort:r?.departurePort||"",etd:r?.estimatedTimeDeparture||"",arrivalPort:r?.arrivalPort||"",eta:r?.estimatedTimeArrival||"",exporter:a?.exporter||"",customsDate:e?.customsClearanceDate||"",packingUnit:t?.packingUnit||""}})}(0,r(1634).D)([d]),(0,n.A)(d,"0049339fb493948c1ac1860dd2eac9b3f1836c541e",null);var l=r(36405)},15467:(e,t,r)=>{"use strict";r.d(t,{default:()=>D});var a=r(11432),n=r(82472),o=r(20245),i=r(2494),s=r(74247),c=r(45613),d=r(32246),l=r(90714);let p=(0,l.eU)([]),m=(0,l.eU)(0);var u=r(71020);function h({open:e,onClose:t}){let r=(0,d.md)(p),l=(0,d.Xr)(m);async function h(){console.log(r),await (0,c.w)(r.map(e=>e.id)),l(e=>e+1),t()}return(0,a.jsxs)(n.A,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,a.jsx)(o.A,{children:"화물 삭제 확인"}),(0,a.jsx)(i.A,{sx:{py:3},children:"정말로 선택한 화물을 삭제하시겠습니까?"}),(0,a.jsxs)(s.A,{sx:{px:3,pb:2,pt:0,justifyContent:"flex-end"},children:[(0,a.jsx)(u.A,{variant:"outline",onClick:t,children:"취소"}),(0,a.jsx)(u.A,{variant:"outline-danger",onClick:h,children:"삭제"})]})]})}var g=r(11417),f=r(29732),b=r(95093),y=r(63016);y.callServer,y.findSourceMapURL;let x=(0,y.createServerReference)("404757e7a76cb9b03e2ba3b2fa52f1184db3542cd1",y.callServer,void 0,y.findSourceMapURL,"saveUserShipmentColumnOrder");y.callServer,y.findSourceMapURL;var v=r(53295),P=r(61839);function C(){let[e,t]=(0,g.useState)([]),[r,n]=(0,g.useState)([]),[o,i]=(0,g.useState)(!0),[s,c]=(0,g.useState)(null),l=(0,g.useMemo)(()=>(console.log("columnOrder",r),[{headerName:"",checkboxSelection:!0,minWidth:50,flex:1,headerCheckboxSelection:!0,filter:!1,pinned:"left",lockPinned:!0,width:70,field:"checkbox"},...r.length>0?r.map(({field:e,width:t})=>{let r=P.cX.find(t=>t.field===e);return r?(r.width=t,r):(console.warn(`Column ${e} not found in DEFAULT_SHIPMENT_COLUMN`),null)}).filter(e=>null!==e):P.cX,{headerName:"상세",field:"detail",cellRenderer:b.t,sortable:!1,filter:!1,width:100,pinned:"right",lockPinned:!1}]),[r]),u=(0,g.useCallback)(async e=>{let t=e.api.getColumnState().filter(e=>"detail"!==e.colId).map(e=>({field:e.colId,width:e.width}));try{let e=await x(t);console.log("Column order save result:",e),e.success&&n(t)}catch(e){console.error("컬럼 순서 저장 중 오류:",e)}},[]),h=(0,g.useCallback)(async()=>{try{(await x(P.FX)).success&&n(P.FX)}catch(e){console.error("컬럼 순서 리셋 중 오류:",e)}},[]),{onDragStarted:y,onDragStopped:C}=(0,v.A)(u);(0,d.md)(m);let w=(0,d.Xr)(p),D=(0,g.useCallback)(e=>{w(e.api.getSelectedRows())},[w]);return(0,a.jsx)(f.A,{columnDefs:l,data:e,loading:o,error:s,onDragStarted:y,onDragStopped:C,onResetColumnOrder:h,searchDateField:"contractDate",onSelectionChanged:D})}var w=r(82423);function D(){let[e,t]=(0,g.useState)(!1),r=(0,d.md)(p);return(0,a.jsx)("div",{className:"w-full min-h-screen bg-gray-100",children:(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"선적 현황"}),(0,a.jsx)(w.A,{direction:"row",spacing:2,className:"w-full justify-start mb-4 sm:mb-6 md:justify-end",children:(0,a.jsx)(u.A,{variant:"danger",onClick:()=>t(!0),disabled:0===r.length,children:"삭제하기"})}),(0,a.jsx)("div",{className:"overflow-auto md:h-[75vh]",children:(0,a.jsx)(C,{})}),(0,a.jsx)(h,{open:e,onClose:()=>t(!1)})]})})}},16659:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(10674),n=r(36701);function o(){return(0,a.jsx)(n.default,{})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36701:(e,t,r)=>{"use strict";r.d(t,{default:()=>a});let a=(0,r(73602).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kang-yean-woo/gompyo/src/containers/shipment/shipment.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kang-yean-woo/gompyo/src/containers/shipment/shipment.tsx","default")},56964:(e,t,r)=>{Promise.resolve().then(r.bind(r,36701))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77219:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>l,routeModule:()=>m,tree:()=>d});var a=r(65282),n=r(20277),o=r(47757),i=r.n(o),s=r(96002),c={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>s[e]);r.d(t,c);let d={children:["",{children:["shipment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,16659)),"/Users/kang-yean-woo/gompyo/src/app/shipment/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,98445)),"/Users/kang-yean-woo/gompyo/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,24327)),"/Users/kang-yean-woo/gompyo/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,68366,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,75895,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,l=["/Users/kang-yean-woo/gompyo/src/app/shipment/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/shipment/page",pathname:"/shipment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")},87550:e=>{"use strict";e.exports=require("better-sqlite3")},93764:(e,t,r)=>{Promise.resolve().then(r.bind(r,15467))}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[883,32,91,162,246,728,547,913,898,971,916],()=>r(77219));module.exports=a})();
