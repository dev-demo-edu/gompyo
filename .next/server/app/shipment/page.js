(()=>{var e={};e.id=1,e.ids=[1],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26647:(e,t,a)=>{"use strict";a.d(t,{b:()=>s});var r=a(13913),n=a(8613),o=a(98149),i=a(26763);class s{async create(e){let t=(0,i.Ak)(),[a]=await r.db.insert(n.items).values({...e,id:t}).returning();return a}async findById(e){let[t]=await r.db.select().from(n.items).where((0,o.eq)(n.items.id,e));return t}async searchItems(e){return await r.db.select().from(n.items).where((0,o.eq)(n.items.itemName,e))}async findAll(){return await r.db.select().from(n.items)}async update(e,t){let[a]=await r.db.update(n.items).set(t).where((0,o.eq)(n.items.id,e)).returning();return a}async delete(e){let[t]=await r.db.delete(n.items).where((0,o.eq)(n.items.id,e)).returning();return t}}},26763:(e,t,a)=>{"use strict";let r,n;a.d(t,{Ak:()=>s});var o=a(77598);function i(e){!r||r.length<e?(r=Buffer.allocUnsafe(128*e),o.webcrypto.getRandomValues(r),n=0):n+e>r.length&&(o.webcrypto.getRandomValues(r),n=0),n+=e}function s(e=21){i(e|=0);let t="";for(let a=n-e;a<n;a++)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[a]];return t}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},40654:(e,t,a)=>{Promise.resolve().then(a.bind(a,47253))},47253:(e,t,a)=>{"use strict";a.d(t,{default:()=>d});var r=a(11432),n=a(11417),o=a(507),i=a(63016);i.callServer,i.findSourceMapURL;let s=(0,i.createServerReference)("40caf5954f16e6e440a3a6947e1c7a519d99375fda",i.callServer,void 0,i.findSourceMapURL,"saveUserShipmentColumnOrder");i.callServer,i.findSourceMapURL;var c=a(53295),l=a(26284);function d(){let[e,t]=(0,n.useState)([]),[a,i]=(0,n.useState)([]),[d,m]=(0,n.useState)(!0),[u,p]=(0,n.useState)(null),h=(0,n.useMemo)(()=>[...a.length>0?a.map(e=>{let t=l.cX.find(t=>t.field===e);return t||(console.warn(`Column ${e} not found in DEFAULT_SHIPMENT_COLUMN`),null)}).filter(e=>null!==e):l.cX,{headerName:"상세",field:"detail",cellRenderer:o.t,sortable:!1,filter:!1,width:100,pinned:"right",lockPinned:!1}],[a]),g=(0,n.useCallback)(async e=>{let t=e.api.getColumnState().map(e=>e.colId).filter(e=>"detail"!==e);try{let e=await s(t);console.log("Column order save result:",e),e.success&&i(t)}catch(e){console.error("컬럼 순서 저장 중 오류:",e)}},[]),y=(0,n.useCallback)(async()=>{try{(await s(l.FX)).success&&i(l.FX)}catch(e){console.error("컬럼 순서 리셋 중 오류:",e)}},[]),{onDragStarted:P,onDragStopped:f}=(0,c.A)(g);return(0,r.jsx)(o.A,{columnDefs:h,data:e,loading:d,error:u,onDragStarted:P,onDragStopped:f,onResetColumnOrder:y})}},51514:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"001ce2a144fe2a3241bba12c9ff53baf78ce300a60":()=>y.y4,"004ae8a1bad6924e662737232527d93e1a4d63665a":()=>y.wz,"006c2543e6ed3cab958cf2744b616699a0e65aa819":()=>y.OA,"007632cc964ce32c9ae88659de771465e31829822e":()=>y.Dm,"00a8c88587dd80ef33bdab53078b1ddb5064fbed0d":()=>g,"400c066bd73bd62514f27a88a17ebe646d14276ea7":()=>y.Lx,"40642458384ff36d90a2e9c0502212b384d041a6ae":()=>y.Mo,"40caf5954f16e6e440a3a6947e1c7a519d99375fda":()=>y.Fq});var r=a(17464);a(55414);var n=a(70564),o=a(37988),i=a(22168),s=a(26647),c=a(5485),l=a(22327),d=a(54022),m=a(70954),u=a(21316),p=a(10854),h=a(73103);async function g(){try{let e=new n.y,t=new o.o,a=new i.q,r=new s.b,g=new c.T,y=new l.G,P=new d.W,f=new u.Y,[C,b,D,v,x,A,T,w]=await Promise.all([e.findAll(),t.findAll(),a.findAll(),r.findAll(),g.findAll(),y.findAll(),P.findAll(),f.getAllImporters()]);return D.map(e=>{let t=b.find(t=>t.id===e.shipmentId),a=C.find(e=>e.id===t?.contractId),r=v.find(t=>t.id===e?.itemsId),n=x.find(t=>t.cargoId===e?.id),o=A.find(e=>e.costId===n?.id),i=T.find(e=>e.contractId===a?.id),s=w.find(e=>e.id===a?.importerId),c={contract:{id:a?.id||"",contractNumber:a?.contractNumber||"",contractDate:a?.contractDate||"",exporter:a?.exporter||"",importerId:a?.importerId||"",incoterms:a?.incoterms||""},shipment:{id:t?.id||"",contractId:a?.id||"",estimatedTimeDeparture:t?.estimatedTimeDeparture||"",estimatedTimeArrival:t?.estimatedTimeArrival||"",shippingCompany:t?.shippingCompany||"",departurePort:t?.departurePort||"",arrivalPort:t?.arrivalPort||"",blNumber:t?.blNumber||"",palletOrderDate:t?.palletOrderDate||"",palletType:t?.palletType||""},cargo:{id:e?.id||"",itemsId:e?.itemsId||"",shipmentId:t?.id||"",containerCount:e?.containerCount||0,contractTon:e?.contractTon||0,progressStatus:e?.progressStatus||"예정",customsClearanceDate:e?.customsClearanceDate||"",quarantineDate:e?.quarantineDate||"",warehouseEntryDate:e?.warehouseEntryDate||"",sellingPrice:e?.sellingPrice||0,margin:e?.margin||0,totalProfit:e?.totalProfit||0,purchaseFeeRate:e?.purchaseFeeRate||0,sellingPriceWholesale:e?.sellingPriceWholesale||0,sellingPriceRetail:e?.sellingPriceRetail||0,remark:e?.remark||""},cost:{id:n?.id||"",cargoId:e?.id||"",supplyPrice:n?.supplyPrice||0,shippingCost:n?.shippingCost||0,laborCost:n?.laborCost||0,transportStorageFee:n?.transportStorageFee||0,loadingUnloadingFee:n?.loadingUnloadingFee||0,usanceInterest:n?.usanceInterest||0},costDetail:{id:o?.id||"",costId:n?.id||"",unitPrice:o?.unitPrice||0,exchangeRate:o?.exchangeRate||0,customsTaxRate:o?.customsTaxRate||0,customTaxAmount:o?.customTaxAmount||0,customsFee:o?.customsFee||0,inspectionFee:o?.inspectionFee||0,doCharge:o?.doCharge||0,otherCosts:o?.otherCosts||0,transferFee:o?.transferFee||0},payment:{id:i?.id||"",contractId:a?.id||"",paymentMethod:i?.paymentMethod||"",paymentDueDate:i?.paymentDueDate||"",advancePaymentDate:i?.advancePaymentDate||"",advancePaymentRatio:i?.advancePaymentRatio||0,advancePaymentAmount:i?.advancePaymentAmount||0,remainingPaymentDate:i?.remainingPaymentDate||"",remainingPaymentRatio:i?.remainingPaymentRatio||0,remainingPaymentAmount:i?.remainingPaymentAmount||0,counterpartBank:i?.counterpartBank||"",paymentTerm:i?.paymentTerm||"",totalContractAmount:i?.totalContractAmount||0},item:{id:r?.id||"",itemName:r?.itemName||"",itemVariety:r?.itemVariety||"",packingUnit:r?.packingUnit||"",originCountry:r?.originCountry||"",hsCode:r?.hsCode||""},importer:{id:s?.id||"",importerName:s?.importerName||"",calculationType:s?.calculationType||p.A.STANDARD}},l=(0,m.s)(c);return{id:e?.id||"",contractNumber:a?.contractNumber||"",progressStatus:h.LE[e?.progressStatus],contractDate:a?.contractDate||"",importer:s?.importerName||"",productName:r?.itemVariety||"",itemName:r?.itemName||"",weight:e?.contractTon||0,containerCount:e?.containerCount||0,packagingUnit:r?.packingUnit||"",unitPrice:l.costDetail.unitPrice||0,totalPrice:l.costDetail.totalContractPrice||0,supplyPrice:l.cost.supplyPrice||0,sellingPrice:l.cargo.sellingPrice||0,paymentMethod:i?.paymentMethod||"",hsCode:r?.hsCode||"",blNumber:t?.blNumber||"",departurePort:t?.departurePort||"",etd:t?.estimatedTimeDeparture||"",arrivalPort:t?.arrivalPort||"",eta:t?.estimatedTimeArrival||"",exporter:a?.exporter||"",customsDate:e?.customsClearanceDate||"",packingUnit:r?.packingUnit||""}})}catch(e){throw console.error("선적 데이터 조회 중 오류:",e),Error(`선적 데이터 조회 실패: ${e instanceof Error?e.message:"알 수 없는 오류"}`)}}(0,a(1634).D)([g]),(0,r.A)(g,"00a8c88587dd80ef33bdab53078b1ddb5064fbed0d",null);var y=a(36405)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70954:(e,t,a)=>{"use strict";a.d(t,{s:()=>l});var r=a(10854);class n{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee,o=t.sellingPrice-n/t.contractTon/1e3,i=o*t.contractTon*1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:o,totalProfit:i}}}class o{calculate(e,t){let a=(e.contractorCostAmount+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee+t.usanceInterest)/t.contractTon/1e3*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3,o=t.sellingPrice-n/t.contractTon/1e3,i=o*t.contractTon*1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:o,totalProfit:i}}}class i{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee,o=t.sellingPrice-n/t.contractTon/1e3,i=o*t.contractTon*1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:o,totalProfit:i}}}class s{static createStrategy(e){if(!e)return new n;switch(e.calculationType){case r.A.STANDARD:return new n;case r.A.DNB:return new o;case r.A.NAMHAE:return new i;default:return new n}}}class c{constructor(e){this.data=e,this.calculationStrategy=s.createStrategy(e.importer),this.calculatedValues=this.calculateValues()}calculateValues(){let e=this.data.costDetail.unitPrice||0,t=this.data.costDetail.exchangeRate||0,a=this.data.cargo.contractTon||0,r=this.data.cargo.sellingPrice||0,n=this.data.cargo.purchaseFeeRate||0,o=Math.floor(e*t*a),i=e*t/1e3,s=o+(this.data.costDetail.customTaxAmount||0)+(this.data.costDetail.transferFee||0)+(this.data.costDetail.customsFee||0)+(this.data.costDetail.inspectionFee||0)+(this.data.costDetail.doCharge||0)+(this.data.costDetail.otherCosts||0),c=s/a/1e3,l=this.calculationStrategy.calculate({contractorCostAmount:s,costPerKg:i,totalContractPrice:o,contractorCost:c},{contractTon:a,sellingPrice:r,purchaseFeeRate:n,shippingCost:this.data.cost.shippingCost||0,laborCost:this.data.cost.laborCost||0,transportStorageFee:this.data.cost.transportStorageFee||0,loadingUnloadingFee:this.data.cost.loadingUnloadingFee||0,usanceInterest:this.data.cost.usanceInterest||0});return{supplyPrice:l.supplyPrice,margin:l.margin,totalProfit:l.totalProfit,totalContractPrice:o,costPerKg:i,contractorCost:c,contractorProfit:l.contractorProfit,totalCost:l.totalCost}}mapItem(e){return{id:e.id,itemName:e.itemName||"",itemVariety:e.itemVariety||"",originCountry:e.originCountry||"",hsCode:e.hsCode||"",packingUnit:e.packingUnit||""}}mapShipment(e){return{id:e.id,estimatedTimeArrival:e.estimatedTimeArrival||"",estimatedTimeDeparture:e.estimatedTimeDeparture||"",arrivalPort:e.arrivalPort||"",departurePort:e.departurePort||"",blNumber:e.blNumber||"",palletOrderDate:e.palletOrderDate||"",palletType:e.palletType||"",shippingCompany:e.shippingCompany||"",contractId:e.contractId||""}}mapContract(e,t,a){return{id:e.id,incoterms:e.incoterms||"",contractNumber:e.contractNumber||"",contractDate:e.contractDate||"",exporter:e.exporter||"",importerId:e.importerId||"",departurePort:t.departurePort||"",arrivalPort:t.arrivalPort||"",estimatedTimeDeparture:t.estimatedTimeDeparture||"",estimatedTimeArrival:t.estimatedTimeArrival||"",blNumber:t.blNumber||"",importerName:a?.importerName||""}}mapPayment(e){return{id:e.id,paymentDueDate:e.paymentDueDate||"",paymentMethod:e.paymentMethod||"",contractId:e.contractId,advancePaymentDate:e.advancePaymentDate||"",advancePaymentRatio:e.advancePaymentRatio||0,advancePaymentAmount:e.advancePaymentAmount||0,remainingPaymentDate:e.remainingPaymentDate||"",remainingPaymentRatio:e.remainingPaymentRatio||0,remainingPaymentAmount:e.remainingPaymentAmount||0,counterpartBank:e.counterpartBank||"",paymentTerm:e.paymentTerm||"",totalContractAmount:this.calculatedValues.totalContractPrice}}mapAndCalculateCostDetail(e){return{id:e.id,unitPrice:e.unitPrice||0,totalContractPrice:this.calculatedValues.totalContractPrice,exchangeRate:e.exchangeRate||0,costPerKg:this.calculatedValues.costPerKg,costId:e.costId,customTaxAmount:e.customTaxAmount||0,customsTaxRate:e.customsTaxRate||0,customsFee:e.customsFee||0,inspectionFee:e.inspectionFee||0,doCharge:e.doCharge||0,otherCosts:e.otherCosts||0,transferFee:e.transferFee||0}}mapAndCalculateContractAmount(e,t){return{id:t.id,cargoId:t.cargoId,contractorCost:this.calculatedValues.contractorCost,supplyPrice:this.calculatedValues.supplyPrice,contractorProfit:this.calculatedValues.contractorProfit,shippingCost:t.shippingCost||0,laborCost:t.laborCost||0,transportStorageFee:t.transportStorageFee||0,loadingUnloadingFee:t.loadingUnloadingFee||0,usanceInterest:t.usanceInterest||0}}mapAndCalculateExpense(e){return{id:e.id,itemsId:e.itemsId,shipmentId:e.shipmentId,containerCount:e.containerCount,contractTon:e.contractTon,customsClearanceDate:e.customsClearanceDate,quarantineDate:e.quarantineDate,warehouseEntryDate:e.warehouseEntryDate,progressStatus:e.progressStatus,totalCost:this.calculatedValues.totalCost,sellingPrice:e.sellingPrice||0,sellingPriceWholesale:e.sellingPriceWholesale||0,sellingPriceRetail:e.sellingPriceRetail||0,margin:this.calculatedValues.margin,totalProfit:this.calculatedValues.totalProfit,purchaseFeeRate:e.purchaseFeeRate,remark:e.remark}}calculate(){return{importer:this.data.importer,contract:this.mapContract(this.data.contract,this.data.shipment,this.data.importer),payment:this.mapPayment(this.data.payment),costDetail:this.mapAndCalculateCostDetail(this.data.costDetail),cost:this.mapAndCalculateContractAmount(this.data.cargo,this.data.cost),cargo:this.mapAndCalculateExpense(this.data.cargo),item:this.mapItem(this.data.item),shipment:this.mapShipment(this.data.shipment)}}}function l(e){return new c(e).calculate()}},77219:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>l});var r=a(65282),n=a(20277),o=a(47757),i=a.n(o),s=a(96002),c={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>s[e]);a.d(t,c);let l={children:["",{children:["shipment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,92366)),"/Users/kang-yean-woo/gompyo/src/app/shipment/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,98445)),"/Users/kang-yean-woo/gompyo/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,24327)),"/Users/kang-yean-woo/gompyo/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,68366,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,75895,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/kang-yean-woo/gompyo/src/app/shipment/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/shipment/page",pathname:"/shipment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")},79974:(e,t,a)=>{Promise.resolve().then(a.bind(a,88137))},87550:e=>{"use strict";e.exports=require("better-sqlite3")},88137:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});let r=(0,a(73602).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kang-yean-woo/gompyo/src/components/shipment-grid.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kang-yean-woo/gompyo/src/components/shipment-grid.tsx","default")},92366:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(10674),n=a(88137);function o(){return(0,r.jsx)("div",{className:"w-full min-h-screen bg-gray-100",children:(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"선적 현황"}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,r.jsx)(n.default,{})})]})})}function i(){return(0,r.jsx)(o,{})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[883,117,33,728,722,547,528,474],()=>a(77219));module.exports=r})();
