(()=>{var e={};e.id=1,e.ids=[1],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},26647:(e,t,a)=>{"use strict";a.d(t,{b:()=>s});var r=a(13913),n=a(8613),i=a(98149),o=a(26763);class s{async create(e){let t=(0,o.Ak)(),[a]=await r.db.insert(n.items).values({...e,id:t}).returning();return a}async findById(e){let[t]=await r.db.select().from(n.items).where((0,i.eq)(n.items.id,e));return t}async searchItems(e){return await r.db.select().from(n.items).where((0,i.eq)(n.items.itemName,e))}async findAll(){return await r.db.select().from(n.items)}async update(e,t){let[a]=await r.db.update(n.items).set(t).where((0,i.eq)(n.items.id,e)).returning();return a}async delete(e){let[t]=await r.db.delete(n.items).where((0,i.eq)(n.items.id,e)).returning();return t}}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36405:(e,t,a)=>{"use strict";a.d(t,{wz:()=>g,Dm:()=>f,OA:()=>y,Lx:()=>p,y4:()=>h,Mo:()=>b,Fq:()=>w});var r=a(17464);a(55414);var n=a(19541),i=a(14567),o=a(15198),s=a(13913),l=a(8613),d=a(98149);class c{async findByEmail(e){let[t]=await s.db.select().from(l.users).where((0,d.eq)(l.users.email,e));return t}async findById(e){let[t]=await s.db.select().from(l.users).where((0,d.eq)(l.users.id,e));return t}async getPlanColumnOrder(e){let t=await this.findById(e);return t.planColumnOrder?JSON.parse(t.planColumnOrder):null}async getShipmentColumnOrder(e){let t=await this.findById(e);return t.shipmentColumnOrder?JSON.parse(t.shipmentColumnOrder):null}async updatePlanColumnOrder(e,t){let[a]=await s.db.update(l.users).set({planColumnOrder:t}).where((0,d.eq)(l.users.id,e)).returning();return a}async updateShipmentColumnOrder(e,t){let[a]=await s.db.update(l.users).set({shipmentColumnOrder:t}).where((0,d.eq)(l.users.id,e)).returning();return a}async create(e){let[t]=await s.db.insert(l.users).values(e).returning();return t}async delete(e){return await s.db.delete(l.users).where((0,d.eq)(l.users.id,e)),!0}}var u=a(1634);let m=new c;async function p(e){let t=e.get("email"),a=e.get("password");try{let e=await m.findByEmail(t);if(!e||e.password!==a)return{error:"이메일 또는 비밀번호가 올바르지 않습니다."};return(await (0,i.UL)()).set({name:"userId",value:e.id,httpOnly:!0,maxAge:604800,path:"/"}),{success:!0}}catch(e){return console.error("Login error:",e),{error:"로그인 중 오류가 발생했습니다."}}}async function h(){(await (0,i.UL)()).delete("userId"),(0,o.redirect)("/login")}async function g(){let e=await (0,i.UL)(),t=e.get("userId")?.value;return t?m.findById(t):null}async function f(){let e=await (0,i.UL)(),t=e.get("userId")?.value;return t?await m.getPlanColumnOrder(t):[]}async function y(){let e=await (0,i.UL)(),t=e.get("userId")?.value;return t?await m.getShipmentColumnOrder(t):[]}async function b(e){let t=await (0,i.UL)(),a=t.get("userId")?.value;if(!a)return{error:"로그인이 필요합니다."};try{return await m.updatePlanColumnOrder(a,JSON.stringify(e)),(0,n.revalidatePath)("/"),{success:!0}}catch(e){return console.error("컬럼 순서 저장 오류:",e),{error:"컬럼 순서를 저장하는 중 오류가 발생했습니다."}}}async function w(e){let t=await (0,i.UL)(),a=t.get("userId")?.value;if(!a)return{error:"로그인이 필요합니다."};try{return await m.updateShipmentColumnOrder(a,JSON.stringify(e)),(0,n.revalidatePath)("/"),{success:!0}}catch(e){return console.error("컬럼 순서 저장 오류:",e),{error:"컬럼 순서를 저장하는 중 오류가 발생했습니다."}}}(0,u.D)([p,h,g,f,y,b,w]),(0,r.A)(p,"40d0eae169c34be33be197a140e6f5d424fbe452aa",null),(0,r.A)(h,"00838c01ffaa6b154adc75d53878d6de7425b30f47",null),(0,r.A)(g,"009fbeacdf290a3a185d1a5b6ff8f74907ee1401d6",null),(0,r.A)(f,"00d4d518275a352e9acfa900a39fd2149555101b4b",null),(0,r.A)(y,"00c5ff540788186748639db7b8b243f1d54c82fed2",null),(0,r.A)(b,"40e6bc2921dd5c24f95351bcba63042c63011b307e",null),(0,r.A)(w,"400332ec8182b18eb201c8e354a4b9c27b81f292a4",null)},39148:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"0043ef981d216270f22f65645a320921cab294fe62":()=>g,"00838c01ffaa6b154adc75d53878d6de7425b30f47":()=>f.y4,"009fbeacdf290a3a185d1a5b6ff8f74907ee1401d6":()=>f.wz,"00c5ff540788186748639db7b8b243f1d54c82fed2":()=>f.OA,"00d4d518275a352e9acfa900a39fd2149555101b4b":()=>f.Dm,"400332ec8182b18eb201c8e354a4b9c27b81f292a4":()=>f.Fq,"40d0eae169c34be33be197a140e6f5d424fbe452aa":()=>f.Lx,"40e6bc2921dd5c24f95351bcba63042c63011b307e":()=>f.Mo});var r=a(17464);a(55414);var n=a(70564),i=a(37988),o=a(22168),s=a(26647),l=a(5485),d=a(22327),c=a(54022),u=a(70954),m=a(21316),p=a(10854),h=a(73103);async function g(){try{let e=new n.y,t=new i.o,a=new o.q,r=new s.b,g=new l.T,f=new d.G,y=new c.W,b=new m.Y,[w,v,x,C,P,N,D,A]=await Promise.all([e.findAll(),t.findAll(),a.findAll(),r.findAll(),g.findAll(),f.findAll(),y.findAll(),b.getAllImporters()]);return x.map(e=>{let t=v.find(t=>t.id===e.shipmentId),a=w.find(e=>e.id===t?.contractId),r=C.find(t=>t.id===e?.itemsId),n=P.find(t=>t.cargoId===e?.id),i=N.find(e=>e.costId===n?.id),o=D.find(e=>e.contractId===a?.id),s=A.find(e=>e.id===a?.importerId),l={contract:{id:a?.id||"",contractNumber:a?.contractNumber||"",contractDate:a?.contractDate||"",exporter:a?.exporter||"",importerId:a?.importerId||"",incoterms:a?.incoterms||""},shipment:{id:t?.id||"",contractId:a?.id||"",estimatedTimeDeparture:t?.estimatedTimeDeparture||"",estimatedTimeArrival:t?.estimatedTimeArrival||"",shippingCompany:t?.shippingCompany||"",departurePort:t?.departurePort||"",arrivalPort:t?.arrivalPort||"",blNumber:t?.blNumber||"",palletOrderDate:t?.palletOrderDate||"",palletType:t?.palletType||""},cargo:{id:e?.id||"",itemsId:e?.itemsId||"",shipmentId:t?.id||"",containerCount:e?.containerCount||0,contractTon:e?.contractTon||0,progressStatus:e?.progressStatus||"예정",customsClearanceDate:e?.customsClearanceDate||"",quarantineDate:e?.quarantineDate||"",warehouseEntryDate:e?.warehouseEntryDate||"",sellingPrice:e?.sellingPrice||0,margin:e?.margin||0,totalProfit:e?.totalProfit||0,purchaseFeeRate:e?.purchaseFeeRate||0,sellingPriceWholesale:e?.sellingPriceWholesale||0,sellingPriceRetail:e?.sellingPriceRetail||0,remark:e?.remark||""},cost:{id:n?.id||"",cargoId:e?.id||"",supplyPrice:n?.supplyPrice||0,shippingCost:n?.shippingCost||0,laborCost:n?.laborCost||0,transportStorageFee:n?.transportStorageFee||0,loadingUnloadingFee:n?.loadingUnloadingFee||0,usanceInterest:n?.usanceInterest||0},costDetail:{id:i?.id||"",costId:n?.id||"",unitPrice:i?.unitPrice||0,exchangeRate:i?.exchangeRate||0,customsTaxRate:i?.customsTaxRate||0,customTaxAmount:i?.customTaxAmount||0,customsFee:i?.customsFee||0,inspectionFee:i?.inspectionFee||0,doCharge:i?.doCharge||0,otherCosts:i?.otherCosts||0,transferFee:i?.transferFee||0},payment:{id:o?.id||"",contractId:a?.id||"",paymentMethod:o?.paymentMethod||"",paymentDueDate:o?.paymentDueDate||"",advancePaymentDate:o?.advancePaymentDate||"",advancePaymentRatio:o?.advancePaymentRatio||0,advancePaymentAmount:o?.advancePaymentAmount||0,remainingPaymentDate:o?.remainingPaymentDate||"",remainingPaymentRatio:o?.remainingPaymentRatio||0,remainingPaymentAmount:o?.remainingPaymentAmount||0,counterpartBank:o?.counterpartBank||"",paymentTerm:o?.paymentTerm||"",totalContractAmount:o?.totalContractAmount||0},item:{id:r?.id||"",itemName:r?.itemName||"",itemVariety:r?.itemVariety||"",packingUnit:r?.packingUnit||"",originCountry:r?.originCountry||"",hsCode:r?.hsCode||""},importer:{id:s?.id||"",importerName:s?.importerName||"",calculationType:s?.calculationType||p.A.STANDARD}},d=(0,u.s)(l);return{id:e?.id||"",contractNumber:a?.contractNumber||"",progressStatus:h.LE[e?.progressStatus],contractDate:a?.contractDate||"",importer:s?.importerName||"",productName:r?.itemVariety||"",itemName:r?.itemName||"",weight:e?.contractTon||0,containerCount:e?.containerCount||0,packagingUnit:r?.packingUnit||"",unitPrice:d.costDetail.unitPrice||0,totalPrice:d.costDetail.totalContractPrice||0,supplyPrice:d.cost.supplyPrice||0,sellingPrice:d.cargo.sellingPrice||0,paymentMethod:o?.paymentMethod||"",hsCode:r?.hsCode||"",blNumber:t?.blNumber||"",departurePort:t?.departurePort||"",etd:t?.estimatedTimeDeparture||"",arrivalPort:t?.arrivalPort||"",eta:t?.estimatedTimeArrival||"",exporter:a?.exporter||"",customsDate:e?.customsClearanceDate||"",packingUnit:r?.packingUnit||""}})}catch(e){throw console.error("선적 데이터 조회 중 오류:",e),Error(`선적 데이터 조회 실패: ${e instanceof Error?e.message:"알 수 없는 오류"}`)}}(0,a(1634).D)([g]),(0,r.A)(g,"0043ef981d216270f22f65645a320921cab294fe62",null);var f=a(36405)},40654:(e,t,a)=>{Promise.resolve().then(a.bind(a,75492))},42623:(e,t,a)=>{"use strict";a.d(t,{R8:()=>r,gt:()=>i,ye:()=>n});let r=e=>e.value?new Date(e.value).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"",n=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e.value):"",i=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.value)+"/kg":""},53295:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(11417);let n=function(e){let t=(0,r.useRef)([]);return{onDragStarted:e=>{t.current=e.api.getColumnState().map(e=>e.colId)},onDragStopped:a=>{let r=a.api.getColumnState().map(e=>e.colId).filter(e=>"detail"!==e);t.current.every((e,t)=>e===r[t])||e(a)}}}},53341:(e,t,a)=>{"use strict";a.d(t,{A:()=>h,t:()=>p});var r=a(11432),n=a(11417),i=a(26093),o=a(38762),s=a(98194),l=a(10320),d=a(97136),c=a(71251),u=a.n(c),m=a(29871);s.syG.registerModules([s.JKr]);let p=e=>(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(u(),{href:`/detail/${e.data.id}`,className:"inline-block px-4 py-1.5 bg-[#22C55E] text-white rounded-lg hover:bg-[#16A34A] transition-colors text-sm font-medium text-center",children:"상세보기"})});function h({columnDefs:e,data:t,loading:a=!1,error:s=null,onDragStarted:c,onDragStopped:u,onResetColumnOrder:p,onSelectionChanged:h,searchDateField:g}){let[f,y]=(0,n.useState)(""),[b,w]=(0,n.useState)(""),[v,x]=(0,n.useState)(""),[C,P]=(0,n.useState)(!1),[N,D]=(0,n.useState)(!1),A=(0,n.useRef)(null),F=(0,n.useMemo)(()=>({sortable:!0,resizable:!0,minWidth:100,filter:!0,lockPinned:!0}),[]),S=(0,n.useMemo)(()=>e.filter(e=>e.field).map(e=>({colId:e.field,pinned:e.pinned,flex:e.flex,width:e.width,lockPinned:e.lockPinned})),[e]),T=(0,n.useMemo)(()=>o.z0,[]),I=(0,n.useMemo)(()=>t.filter(t=>{let a=!f||e.some(e=>{let a=e.field;if(!a)return!1;let r=t[a];return r&&r.toString().toLowerCase().includes(f.toLowerCase())});if(g){let e=new Date(t[g]),r=(!b||e>=new Date(b))&&(!v||e<=new Date(v));return a&&r}return a}),[t,f,b,v,e,g]),R=(0,n.useCallback)(e=>{A.current=e.api,A.current?.applyColumnState({state:S,applyOrder:!0})},[S]);return s?(0,r.jsx)("div",{className:"w-full h-[800px] bg-white flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-red-500",children:s})}):(0,r.jsxs)("div",{className:"flex flex-col md:flex-row w-full h-[800px] bg-slate-50 rounded-xl overflow-hidden shadow-lg p-6 gap-6",children:[(0,r.jsxs)("button",{onClick:()=>P(!C),className:"md:hidden flex items-center justify-center gap-2 mb-4 px-4 py-2 bg-white rounded-lg shadow-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(l.A,{className:"w-5 h-5"}),(0,r.jsxs)("span",{children:["필터 ",C?"숨기기":"보기"]})]}),(0,r.jsxs)("div",{className:`relative transition-all duration-300 p-6 space-y-6
        ${C?"block":"hidden md:block"}
        ${N?"w-12 bg-slate-50":"w-full md:w-80 bg-white rounded-xl shadow-sm"}
        md:shrink-0 overflow-hidden`,children:[(0,r.jsx)("button",{onClick:()=>D(e=>!e),className:"absolute right-2 top-2 w-8 h-8 bg-gray-200 text-gray-600 rounded-full shadow-md hover:bg-gray-300 transition z-10 hidden md:block",children:N?">":"<"}),!N&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"필터"}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"검색어"}),(0,r.jsx)("input",{type:"text",placeholder:"검색어를 입력하세요",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:f,onChange:e=>y(e.target.value)})]}),g&&(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"조회 기간"}),(0,r.jsx)("input",{type:"date",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 mb-3",value:b,onChange:e=>w(e.target.value)}),(0,r.jsx)("input",{type:"date",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:v,onChange:e=>x(e.target.value)})]}),p&&(0,r.jsxs)("button",{onClick:p,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,r.jsx)(d.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"컬럼 순서 초기화"})]})]})]})]}),(0,r.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm overflow-hidden min-h-[400px]",children:a?(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})}):(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(i.W6,{theme:m.g,rowData:I,columnDefs:e,defaultColDef:F,pagination:!0,paginationPageSize:15,rowSelection:"multiple",localeText:T,onDragStarted:c,onDragStopped:u,onGridReady:R,onSelectionChanged:h})})})]})}},61839:(e,t,a)=>{"use strict";a.d(t,{FX:()=>s,cX:()=>i,mg:()=>o,zG:()=>n});var r=a(42623);let n=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:r.R8,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"importer",headerName:"수입회사",width:120},{field:"estimatedTimeArrival",headerName:"ETA",valueFormatter:r.R8,width:150},{field:"arrivalPort",headerName:"도착항",width:120},{field:"itemName",headerName:"품목",width:120},{field:"contractTon",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"unitPrice",headerName:"단가",valueFormatter:r.ye,width:130},{field:"totalPrice",headerName:"단가 * 무게",valueFormatter:r.ye,width:150},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"warehouseEntryDate",headerName:"입고일",valueFormatter:r.R8,width:150},{field:"importCostPerKg",headerName:"수입가/kg",valueFormatter:r.gt,width:130},{field:"supplyCostPerKg",headerName:"수급가/kg",valueFormatter:r.gt,width:130},{field:"totalCost",headerName:"총 비용",valueFormatter:r.ye,width:150},{field:"totalCostPerKg",headerName:"총 비용/kg",valueFormatter:r.gt,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:r.ye,width:130},{field:"margin",headerName:"마진",valueFormatter:r.ye,width:100},{field:"totalProfit",headerName:"총 이익",valueFormatter:r.ye,width:150}],i=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:r.R8,width:150},{field:"importer",headerName:"수입회사",width:120},{field:"productName",headerName:"제품명",width:150},{field:"itemName",headerName:"품목",width:120},{field:"weight",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"containerCount",headerName:"컨테이너 개수",width:120},{field:"packingUnit",headerName:"포장 단위",width:100},{field:"unitPrice",headerName:"단가",valueFormatter:r.ye,width:130},{field:"totalPrice",headerName:"단가 * 무게",valueFormatter:r.ye,width:150},{field:"supplyPrice",headerName:"수급가",valueFormatter:r.ye,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:r.ye,width:130},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"hsCode",headerName:"HS CODE",width:120},{field:"blNumber",headerName:"BL no.",width:120},{field:"departurePort",headerName:"port(출발항)",width:120},{field:"etd",headerName:"ETD",valueFormatter:r.R8,width:150},{field:"arrivalPort",headerName:"port(도착항)",width:120},{field:"eta",headerName:"ETA",valueFormatter:r.R8,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"customsDate",headerName:"통관일자",valueFormatter:r.R8,width:150}],o=n.map(e=>e.field),s=i.map(e=>e.field)},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},70954:(e,t,a)=>{"use strict";a.d(t,{s:()=>d});var r=a(10854);class n{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee,i=t.sellingPrice-n/t.contractTon/1e3,o=i*t.contractTon*1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:i,totalProfit:o}}}class i{calculate(e,t){let a=(e.contractorCostAmount+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee+t.usanceInterest)/t.contractTon/1e3*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3,i=t.sellingPrice-n/t.contractTon/1e3,o=i*t.contractTon*1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:i,totalProfit:o}}}class o{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee,i=t.sellingPrice-n/t.contractTon/1e3,o=i*t.contractTon*1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:i,totalProfit:o}}}class s{static createStrategy(e){if(!e)return new n;switch(e.calculationType){case r.A.STANDARD:return new n;case r.A.DNB:return new i;case r.A.NAMHAE:return new o;default:return new n}}}class l{constructor(e){this.data=e,this.calculationStrategy=s.createStrategy(e.importer),this.calculatedValues=this.calculateValues()}calculateValues(){let e=this.data.costDetail.unitPrice||0,t=this.data.costDetail.exchangeRate||0,a=this.data.cargo.contractTon||0,r=this.data.cargo.sellingPrice||0,n=this.data.cargo.purchaseFeeRate||0,i=Math.floor(e*t*a),o=e*t/1e3,s=i+(this.data.costDetail.customTaxAmount||0)+(this.data.costDetail.transferFee||0)+(this.data.costDetail.customsFee||0)+(this.data.costDetail.inspectionFee||0)+(this.data.costDetail.doCharge||0)+(this.data.costDetail.otherCosts||0),l=s/a/1e3,d=this.calculationStrategy.calculate({contractorCostAmount:s,costPerKg:o,totalContractPrice:i,contractorCost:l},{contractTon:a,sellingPrice:r,purchaseFeeRate:n,shippingCost:this.data.cost.shippingCost||0,laborCost:this.data.cost.laborCost||0,transportStorageFee:this.data.cost.transportStorageFee||0,loadingUnloadingFee:this.data.cost.loadingUnloadingFee||0,usanceInterest:this.data.cost.usanceInterest||0});return{supplyPrice:d.supplyPrice,margin:d.margin,totalProfit:d.totalProfit,totalContractPrice:i,costPerKg:o,contractorCost:l,contractorProfit:d.contractorProfit,totalCost:d.totalCost}}mapItem(e){return{id:e.id,itemName:e.itemName||"",itemVariety:e.itemVariety||"",originCountry:e.originCountry||"",hsCode:e.hsCode||"",packingUnit:e.packingUnit||""}}mapShipment(e){return{id:e.id,estimatedTimeArrival:e.estimatedTimeArrival||"",estimatedTimeDeparture:e.estimatedTimeDeparture||"",arrivalPort:e.arrivalPort||"",departurePort:e.departurePort||"",blNumber:e.blNumber||"",palletOrderDate:e.palletOrderDate||"",palletType:e.palletType||"",shippingCompany:e.shippingCompany||"",contractId:e.contractId||""}}mapContract(e,t,a){return{id:e.id,incoterms:e.incoterms||"",contractNumber:e.contractNumber||"",contractDate:e.contractDate||"",exporter:e.exporter||"",importerId:e.importerId||"",departurePort:t.departurePort||"",arrivalPort:t.arrivalPort||"",estimatedTimeDeparture:t.estimatedTimeDeparture||"",estimatedTimeArrival:t.estimatedTimeArrival||"",blNumber:t.blNumber||"",importerName:a?.importerName||""}}mapPayment(e){return{id:e.id,paymentDueDate:e.paymentDueDate||"",paymentMethod:e.paymentMethod||"",contractId:e.contractId,advancePaymentDate:e.advancePaymentDate||"",advancePaymentRatio:e.advancePaymentRatio||0,advancePaymentAmount:e.advancePaymentAmount||0,remainingPaymentDate:e.remainingPaymentDate||"",remainingPaymentRatio:e.remainingPaymentRatio||0,remainingPaymentAmount:e.remainingPaymentAmount||0,counterpartBank:e.counterpartBank||"",paymentTerm:e.paymentTerm||"",totalContractAmount:this.calculatedValues.totalContractPrice}}mapAndCalculateCostDetail(e){return{id:e.id,unitPrice:e.unitPrice||0,totalContractPrice:this.calculatedValues.totalContractPrice,exchangeRate:e.exchangeRate||0,costPerKg:this.calculatedValues.costPerKg,costId:e.costId,customTaxAmount:e.customTaxAmount||0,customsTaxRate:e.customsTaxRate||0,customsFee:e.customsFee||0,inspectionFee:e.inspectionFee||0,doCharge:e.doCharge||0,otherCosts:e.otherCosts||0,transferFee:e.transferFee||0}}mapAndCalculateContractAmount(e,t){return{id:t.id,cargoId:t.cargoId,contractorCost:this.calculatedValues.contractorCost,supplyPrice:this.calculatedValues.supplyPrice,contractorProfit:this.calculatedValues.contractorProfit,shippingCost:t.shippingCost||0,laborCost:t.laborCost||0,transportStorageFee:t.transportStorageFee||0,loadingUnloadingFee:t.loadingUnloadingFee||0,usanceInterest:t.usanceInterest||0}}mapAndCalculateExpense(e){return{id:e.id,itemsId:e.itemsId,shipmentId:e.shipmentId,containerCount:e.containerCount,contractTon:e.contractTon,customsClearanceDate:e.customsClearanceDate,quarantineDate:e.quarantineDate,warehouseEntryDate:e.warehouseEntryDate,progressStatus:e.progressStatus,totalCost:this.calculatedValues.totalCost,sellingPrice:e.sellingPrice||0,sellingPriceWholesale:e.sellingPriceWholesale||0,sellingPriceRetail:e.sellingPriceRetail||0,margin:this.calculatedValues.margin,totalProfit:this.calculatedValues.totalProfit,purchaseFeeRate:e.purchaseFeeRate,remark:e.remark}}calculate(){return{importer:this.data.importer,contract:this.mapContract(this.data.contract,this.data.shipment,this.data.importer),payment:this.mapPayment(this.data.payment),costDetail:this.mapAndCalculateCostDetail(this.data.costDetail),cost:this.mapAndCalculateContractAmount(this.data.cargo,this.data.cost),cargo:this.mapAndCalculateExpense(this.data.cargo),item:this.mapItem(this.data.item),shipment:this.mapShipment(this.data.shipment)}}}function d(e){return new l(e).calculate()}},75492:(e,t,a)=>{"use strict";a.d(t,{default:()=>c});var r=a(11432),n=a(11417),i=a(53341),o=a(63016);o.callServer,o.findSourceMapURL;let s=(0,o.createServerReference)("400332ec8182b18eb201c8e354a4b9c27b81f292a4",o.callServer,void 0,o.findSourceMapURL,"saveUserShipmentColumnOrder");o.callServer,o.findSourceMapURL;var l=a(53295),d=a(61839);function c(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)([]),[c,u]=(0,n.useState)(!0),[m,p]=(0,n.useState)(null),h=(0,n.useMemo)(()=>[...a.length>0?a.map(e=>{let t=d.cX.find(t=>t.field===e);return t||(console.warn(`Column ${e} not found in DEFAULT_SHIPMENT_COLUMN`),null)}).filter(e=>null!==e):d.cX,{headerName:"상세",field:"detail",cellRenderer:i.t,sortable:!1,filter:!1,width:100,pinned:"right",lockPinned:!1}],[a]),g=(0,n.useCallback)(async e=>{let t=e.api.getColumnState().map(e=>e.colId).filter(e=>"detail"!==e);try{let e=await s(t);console.log("Column order save result:",e),e.success&&o(t)}catch(e){console.error("컬럼 순서 저장 중 오류:",e)}},[]),f=(0,n.useCallback)(async()=>{try{(await s(d.FX)).success&&o(d.FX)}catch(e){console.error("컬럼 순서 리셋 중 오류:",e)}},[]),{onDragStarted:y,onDragStopped:b}=(0,l.A)(g);return(0,r.jsx)(i.A,{columnDefs:h,data:e,loading:c,error:m,onDragStarted:y,onDragStopped:b,onResetColumnOrder:f,searchDateField:"contractDate"})}},77219:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=a(65282),n=a(20277),i=a(47757),o=a.n(i),s=a(96002),l={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);a.d(t,l);let d={children:["",{children:["shipment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,92366)),"/Users/kang-yean-woo/gompyo/src/app/shipment/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,98445)),"/Users/kang-yean-woo/gompyo/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,24327)),"/Users/kang-yean-woo/gompyo/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,68366,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,75895,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/kang-yean-woo/gompyo/src/app/shipment/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/shipment/page",pathname:"/shipment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")},79974:(e,t,a)=>{Promise.resolve().then(a.bind(a,88137))},87550:e=>{"use strict";e.exports=require("better-sqlite3")},88137:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});let r=(0,a(73602).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kang-yean-woo/gompyo/src/components/shipment-grid.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kang-yean-woo/gompyo/src/components/shipment-grid.tsx","default")},92366:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o});var r=a(10674),n=a(88137);function i(){return(0,r.jsx)("div",{className:"w-full min-h-screen bg-gray-100",children:(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"선적 현황"}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,r.jsx)(n.default,{})})]})})}function o(){return(0,r.jsx)(i,{})}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[883,622,33,802,728,547,528],()=>a(77219));module.exports=r})();
