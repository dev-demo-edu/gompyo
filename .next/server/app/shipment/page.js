(()=>{var e={};e.id=1,e.ids=[1],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3945:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(34691),i=a(37334),n=a(60271),s=a(12893),o=a(75671);function l(){let[e,t]=(0,i.useState)([]),[a,o]=(0,i.useState)(!0),[l,d]=(0,i.useState)(null),c=(0,i.useMemo)(()=>[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:s.R8,width:150},{field:"importer",headerName:"수입처",width:120},{field:"productName",headerName:"제품명",width:150},{field:"itemName",headerName:"품목",width:120},{field:"weight",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"containerCount",headerName:"컨테이너 개수",width:120},{field:"packingUnit",headerName:"포장 단위",width:100},{field:"unitPrice",headerName:"단가",valueFormatter:s.ye,width:130},{field:"totalPrice",headerName:"단가 * 무게",valueFormatter:s.ye,width:150},{field:"supplyPrice",headerName:"수급가",valueFormatter:s.ye,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:s.ye,width:130},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"hsCode",headerName:"HS CODE",width:120},{field:"blNumber",headerName:"BL no.",width:120},{field:"departurePort",headerName:"port(출발항)",width:120},{field:"etd",headerName:"ETD",valueFormatter:s.R8,width:150},{field:"arrivalPort",headerName:"port(도착항)",width:120},{field:"eta",headerName:"ETA",valueFormatter:s.R8,width:150},{field:"contractParty",headerName:"계약처",width:120},{field:"customsDate",headerName:"통관일자",valueFormatter:s.R8,width:150},{headerName:"상세",field:"detail",cellRenderer:n.t,sortable:!1,filter:!1,width:100,pinned:"right"}],[]);return(0,r.jsx)(n.A,{columnDefs:c,data:e,loading:a,error:l})}o.callServer,o.findSourceMapURL},9913:(e,t,a)=>{Promise.resolve().then(a.bind(a,89607))},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12893:(e,t,a)=>{"use strict";a.d(t,{R8:()=>r,gt:()=>n,ye:()=>i});let r=e=>e.value?new Date(e.value).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"",i=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e.value):"",n=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.value)+"/kg":""},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},23065:(e,t,a)=>{Promise.resolve().then(a.bind(a,3945))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},36086:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(21977),i=a(89607);function n(){return(0,r.jsx)("div",{className:"w-full min-h-screen bg-gray-100",children:(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"선적 현황"}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,r.jsx)(i.default,{})})]})})}function s(){return(0,r.jsx)(n,{})}},37065:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"00a8c88587dd80ef33bdab53078b1ddb5064fbed0d":()=>u});var r=a(19179);a(69347);var i=a(20946),n=a(37710),s=a(70014),o=a(78985),l=a(13611),d=a(66081),c=a(64840),m=a(98566);async function u(){try{let e=new i.y,t=new n.o,a=new s.q,r=new o.b,u=new l.T,p=new d.G,h=new c.W,[g,y,f,b,x,v,w]=await Promise.all([e.findAll(),t.findAll(),a.findAll(),r.findAll(),u.findAll(),p.findAll(),h.findAll()]);return f.map(e=>{let t=y.find(t=>t.id===e.shipmentId),a=g.find(e=>e.id===t?.contractId),r=b.find(t=>t.id===e?.itemsId),i=x.find(t=>t.cargoId===e?.id),n=v.find(e=>e.costId===i?.id),s=w.find(e=>e.contractId===a?.id),o={contract:{id:a?.id||"",contractNumber:a?.contractNumber||"",contractDate:a?.contractDate||"",contractParty:a?.contractParty||"",importer:a?.importer||"",incoterms:a?.incoterms||""},shipment:{id:t?.id||"",contractId:a?.id||"",estimatedTimeDeparture:t?.estimatedTimeDeparture||"",estimatedTimeArrival:t?.estimatedTimeArrival||"",shippingCompany:t?.shippingCompany||"",departurePort:t?.departurePort||"",arrivalPort:t?.arrivalPort||"",blNumber:t?.blNumber||"",palletOrderDate:t?.palletOrderDate||"",palletType:t?.palletType||""},cargo:{id:e?.id||"",itemsId:e?.itemsId||"",shipmentId:t?.id||"",containerCount:e?.containerCount||0,contractTon:e?.contractTon||0,progressStatus:e?.progressStatus||"예정",customsClearanceDate:e?.customsClearanceDate||"",quarantineDate:e?.quarantineDate||"",warehouseEntryDate:e?.warehouseEntryDate||"",sellingPrice:e?.sellingPrice||0,margin:e?.margin||0,totalProfit:e?.totalProfit||0,purchaseFeeRate:e?.purchaseFeeRate||0},cost:{id:i?.id||"",cargoId:e?.id||"",supplyPrice:i?.supplyPrice||0,shippingCost:i?.shippingCost||0,laborCost:i?.laborCost||0,transportStorageFee:i?.transportStorageFee||0,loadingUnloadingFee:i?.loadingUnloadingFee||0},costDetail:{id:n?.id||"",costId:i?.id||"",unitPrice:n?.unitPrice||0,exchangeRate:n?.exchangeRate||0,customsTaxRate:n?.customsTaxRate||0,customTaxAmount:n?.customTaxAmount||0,customsFee:n?.customsFee||0,inspectionFee:n?.inspectionFee||0,doCharge:n?.doCharge||0,otherCosts:n?.otherCosts||0,transferFee:n?.transferFee||0},payment:{id:s?.id||"",contractId:a?.id||"",paymentMethod:s?.paymentMethod||"",paymentDueDate:s?.paymentDueDate||"",advancePaymentDate:s?.advancePaymentDate||"",advancePaymentRatio:s?.advancePaymentRatio||0,advancePaymentAmount:s?.advancePaymentAmount||0,remainingPaymentDate:s?.remainingPaymentDate||"",remainingPaymentRatio:s?.remainingPaymentRatio||0,remainingPaymentAmount:s?.remainingPaymentAmount||0,counterpartBank:s?.counterpartBank||"",paymentTerm:s?.paymentTerm||"",totalContractAmount:s?.totalContractAmount||0},item:{id:r?.id||"",itemName:r?.itemName||"",itemVariety:r?.itemVariety||"",packingUnit:r?.packingUnit||"",originCountry:r?.originCountry||"",hsCode:r?.hsCode||""}},l=(0,m.s)(o);return{id:e?.id||"",contractNumber:a?.contractNumber||"",progressStatus:e?.progressStatus||"예정",contractDate:a?.contractDate||"",importer:a?.importer||"",productName:r?.itemVariety||"",itemName:r?.itemName||"",weight:e?.contractTon||0,containerCount:e?.containerCount||0,packagingUnit:r?.packingUnit||"",unitPrice:l.costDetail.unitPrice||0,totalPrice:l.costDetail.totalContractPrice||0,supplyPrice:l.cost.supplyPrice||0,sellingPrice:l.cargo.sellingPrice||0,paymentMethod:s?.paymentMethod||"",hsCode:r?.hsCode||"",blNumber:t?.blNumber||"",departurePort:t?.departurePort||"",etd:t?.estimatedTimeDeparture||"",arrivalPort:t?.arrivalPort||"",eta:t?.estimatedTimeArrival||"",contractParty:a?.contractParty||"",customsDate:e?.customsClearanceDate||"",packingUnit:r?.packingUnit||""}})}catch(e){throw console.error("선적 데이터 조회 중 오류:",e),Error(`선적 데이터 조회 실패: ${e instanceof Error?e.message:"알 수 없는 오류"}`)}}(0,a(91935).D)([u]),(0,r.A)(u,"00a8c88587dd80ef33bdab53078b1ddb5064fbed0d",null)},54262:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>s.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=a(36323),i=a(32652),n=a(58318),s=a.n(n),o=a(1433),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let d={children:["",{children:["shipment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,36086)),"/Users/kang-yean-woo/gompyo/src/app/shipment/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,49232))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,27007)),"/Users/kang-yean-woo/gompyo/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,12077)),"/Users/kang-yean-woo/gompyo/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,32059,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,49856,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,49232))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/kang-yean-woo/gompyo/src/app/shipment/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/shipment/page",pathname:"/shipment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},58469:(e,t,a)=>{"use strict";let r,i;a.d(t,{Ak:()=>o});var n=a(77598);function s(e){!r||r.length<e?(r=Buffer.allocUnsafe(128*e),n.webcrypto.getRandomValues(r),i=0):i+e>r.length&&(n.webcrypto.getRandomValues(r),i=0),i+=e}function o(e=21){s(e|=0);let t="";for(let a=i-e;a<i;a++)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&r[a]];return t}},60271:(e,t,a)=>{"use strict";a.d(t,{t:()=>m,A:()=>u});var r=a(34691),i=a(37334),n=a(65707),s=a(45040),o=a(54832);let l=(0,a(63512).A)((0,r.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList");var d=a(30706),c=a.n(d);o.syG.registerModules([o.JKr]);let m=e=>(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(c(),{href:`/detail/${e.data.id}`,className:"inline-block px-4 py-1.5 bg-[#22C55E] text-white rounded-lg hover:bg-[#16A34A] transition-colors text-sm font-medium text-center",children:"상세보기"})});function u({columnDefs:e,data:t,loading:a=!1,error:d=null,onDragStarted:c,onDragStopped:m}){let[u,p]=(0,i.useState)(""),[h,g]=(0,i.useState)(""),[y,f]=(0,i.useState)(""),[b,x]=(0,i.useState)(!1),[v,w]=(0,i.useState)(!1),P=(0,i.useMemo)(()=>({sortable:!0,resizable:!0,minWidth:100,filter:!0}),[]),C=(0,i.useMemo)(()=>s.z0,[]),D=(0,i.useMemo)(()=>t.filter(t=>{let a=!u||e.some(e=>{let a=e.field;if(!a)return!1;let r=t[a];return r&&r.toString().toLowerCase().includes(u.toLowerCase())}),r=new Date(t.contractDate),i=(!h||r>=new Date(h))&&(!y||r<=new Date(y));return a&&i}),[t,u,h,y,e]);return d?(0,r.jsx)("div",{className:"w-full h-[800px] bg-white flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-red-500",children:d})}):(0,r.jsxs)("div",{className:"flex flex-col md:flex-row w-full h-[800px] bg-slate-50 rounded-xl overflow-hidden shadow-lg p-6 gap-6",children:[(0,r.jsxs)("button",{onClick:()=>x(!b),className:"md:hidden flex items-center justify-center gap-2 mb-4 px-4 py-2 bg-white rounded-lg shadow-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(l,{className:"w-5 h-5"}),(0,r.jsxs)("span",{children:["필터 ",b?"숨기기":"보기"]})]}),(0,r.jsxs)("div",{className:`relative transition-all duration-300 p-6 space-y-6
        ${b?"block":"hidden md:block"}
        ${v?"w-12 bg-slate-50":"w-full md:w-80 bg-white rounded-xl shadow-sm"}
        md:shrink-0 overflow-hidden`,children:[(0,r.jsx)("button",{onClick:()=>w(e=>!e),className:"absolute right-2 top-2 w-8 h-8 bg-gray-200 text-gray-600 rounded-full shadow-md hover:bg-gray-300 transition z-10 hidden md:block",children:v?">":"<"}),!v&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"필터"}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"검색어"}),(0,r.jsx)("input",{type:"text",placeholder:"검색어를 입력하세요",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:u,onChange:e=>p(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"조회 기간"}),(0,r.jsx)("input",{type:"date",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 mb-3",value:h,onChange:e=>g(e.target.value)}),(0,r.jsx)("input",{type:"date",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:y,onChange:e=>f(e.target.value)})]})]})]})]}),(0,r.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm overflow-hidden min-h-[400px]",children:a?(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})}):(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(n.W6,{theme:o.BhY,rowData:D,columnDefs:e,defaultColDef:P,pagination:!0,paginationPageSize:15,rowSelection:"multiple",localeText:C,onDragStarted:c,onDragStopped:m})})})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},77598:e=>{"use strict";e.exports=require("node:crypto")},78985:(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var r=a(75159),i=a(95372),n=a(17235),s=a(58469);class o{async create(e){let t=(0,s.Ak)(),[a]=await r.db.insert(i.items).values({...e,id:t}).returning();return a}async findById(e){let[t]=await r.db.select().from(i.items).where((0,n.eq)(i.items.id,e));return t}async searchItems(e){return await r.db.select().from(i.items).where((0,n.eq)(i.items.itemName,e))}async findAll(){return await r.db.select().from(i.items)}async update(e,t){let[a]=await r.db.update(i.items).set(t).where((0,n.eq)(i.items.id,e)).returning();return a}async delete(e){let[t]=await r.db.delete(i.items).where((0,n.eq)(i.items.id,e)).returning();return t}}},79551:e=>{"use strict";e.exports=require("url")},87550:e=>{"use strict";e.exports=require("better-sqlite3")},89607:(e,t,a)=>{"use strict";a.d(t,{default:()=>r});let r=(0,a(99503).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kang-yean-woo/gompyo/src/components/shipment-grid.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kang-yean-woo/gompyo/src/components/shipment-grid.tsx","default")},98566:(e,t,a)=>{"use strict";a.d(t,{s:()=>i});class r{constructor(e){this.data=e,this.calculatedValues=this.calculateValues()}calculateValues(){let e=this.data.costDetail.unitPrice||0,t=this.data.costDetail.exchangeRate||0,a=this.data.cargo.contractTon||0,r=this.data.cargo.sellingPrice||0,i=this.data.cargo.purchaseFeeRate||0,n=e*t*a,s=(n+(this.data.costDetail.customTaxAmount||0)+(this.data.costDetail.customsFee||0)+(this.data.costDetail.inspectionFee||0)+(this.data.costDetail.doCharge||0)+(this.data.costDetail.otherCosts||0))/a/1e3,o=s*(1+i/100)*a*1e3,l=o+(this.data.cost.shippingCost||0)+(this.data.cost.laborCost||0)+(this.data.cost.transportStorageFee||0)+(this.data.cost.loadingUnloadingFee||0),d=r-l/a/1e3;return{supplyPrice:e*t*a/1e3,margin:d,totalProfit:d*a*1e3,totalContractPrice:n,costPerKg:e*t/1e3,contractorCost:s,contractorProfit:o,totalCost:l}}mapItem(e){return{id:e.id,itemName:e.itemName||"",itemVariety:e.itemVariety||"",originCountry:e.originCountry||"",hsCode:e.hsCode||"",packingUnit:e.packingUnit||""}}mapShipment(e){return{id:e.id,estimatedTimeArrival:e.estimatedTimeArrival||"",estimatedTimeDeparture:e.estimatedTimeDeparture||"",arrivalPort:e.arrivalPort||"",departurePort:e.departurePort||"",blNumber:e.blNumber||"",palletOrderDate:e.palletOrderDate||"",palletType:e.palletType||"",shippingCompany:e.shippingCompany||"",contractId:e.contractId||""}}mapContract(e,t){return{id:e.id,incoterms:e.incoterms||"",contractNumber:e.contractNumber||"",contractDate:e.contractDate||"",contractParty:e.contractParty||"",importer:e.importer||"",departurePort:t.departurePort||"",arrivalPort:t.arrivalPort||"",estimatedTimeDeparture:t.estimatedTimeDeparture||"",estimatedTimeArrival:t.estimatedTimeArrival||"",blNumber:t.blNumber||""}}mapPayment(e){return{id:e.id,paymentDueDate:e.paymentDueDate||"",paymentMethod:e.paymentMethod||"",contractId:e.contractId,advancePaymentDate:e.advancePaymentDate||"",advancePaymentRatio:e.advancePaymentRatio||0,advancePaymentAmount:e.advancePaymentAmount||0,remainingPaymentDate:e.remainingPaymentDate||"",remainingPaymentRatio:e.remainingPaymentRatio||0,remainingPaymentAmount:e.remainingPaymentAmount||0,counterpartBank:e.counterpartBank||"",paymentTerm:e.paymentTerm||"",totalContractAmount:this.calculatedValues.totalContractPrice}}mapAndCalculateCostDetail(e){return{id:e.id,unitPrice:e.unitPrice||0,totalContractPrice:this.calculatedValues.totalContractPrice,exchangeRate:e.exchangeRate||0,costPerKg:this.calculatedValues.costPerKg,costId:e.costId,customTaxAmount:e.customTaxAmount||0,customsTaxRate:e.customsTaxRate||0,customsFee:e.customsFee||0,inspectionFee:e.inspectionFee||0,doCharge:e.doCharge||0,otherCosts:e.otherCosts||0,transferFee:e.transferFee||0}}mapAndCalculateContractAmount(e,t){return{id:t.id,cargoId:t.cargoId,contractorCost:this.calculatedValues.contractorCost,supplyPrice:this.calculatedValues.contractorCost*(1+(e.purchaseFeeRate||0)/100),contractorProfit:this.calculatedValues.contractorProfit,shippingCost:t.shippingCost||0,laborCost:t.laborCost||0,transportStorageFee:t.transportStorageFee||0,loadingUnloadingFee:t.loadingUnloadingFee||0}}mapAndCalculateExpense(e){return{id:e.id,itemsId:e.itemsId,shipmentId:e.shipmentId,containerCount:e.containerCount,contractTon:e.contractTon,customsClearanceDate:e.customsClearanceDate,quarantineDate:e.quarantineDate,warehouseEntryDate:e.warehouseEntryDate,progressStatus:e.progressStatus,totalCost:this.calculatedValues.totalCost,sellingPrice:e.sellingPrice||0,margin:this.calculatedValues.margin,totalProfit:this.calculatedValues.totalProfit,purchaseFeeRate:e.purchaseFeeRate}}calculate(){return{contract:this.mapContract(this.data.contract,this.data.shipment),payment:this.mapPayment(this.data.payment),costDetail:this.mapAndCalculateCostDetail(this.data.costDetail),cost:this.mapAndCalculateContractAmount(this.data.cargo,this.data.cost),cargo:this.mapAndCalculateExpense(this.data.cargo),item:this.mapItem(this.data.item),shipment:this.mapShipment(this.data.shipment)}}}function i(e){return new r(e).calculate()}}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[991,651,599,710,526,928],()=>a(54262));module.exports=r})();
