(()=>{var e={};e.id=259,e.ids=[259],e.modules={511:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});let i=(0,n(73602).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kang-yean-woo/gompyo/src/containers/quotation/quotation.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kang-yean-woo/gompyo/src/containers/quotation/quotation.tsx","default")},972:e=>{"use strict";e.exports=import("@react-pdf/renderer")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4638:(e,t,n)=>{"use strict";n.a(e,async(e,i)=>{try{n.d(t,{A:()=>c});var o=n(73407);n(95700);var r=n(972),a=n(33873),l=n.n(a),s=e([r]);(r=(s.then?(await s)():s)[0]).Font.register({family:"NotoSansKR",fonts:[{src:l().join(process.cwd(),"public","fonts","NotoSansKR-Thin.ttf"),fontWeight:100},{src:l().join(process.cwd(),"public","fonts","NotoSansKR-ExtraLight.ttf"),fontWeight:200},{src:l().join(process.cwd(),"public","fonts","NotoSansKR-Light.ttf"),fontWeight:300},{src:l().join(process.cwd(),"public","fonts","NotoSansKR-Regular.ttf"),fontWeight:400},{src:l().join(process.cwd(),"public","fonts","NotoSansKR-Medium.ttf"),fontWeight:500},{src:l().join(process.cwd(),"public","fonts","NotoSansKR-SemiBold.ttf"),fontWeight:600},{src:l().join(process.cwd(),"public","fonts","NotoSansKR-Bold.ttf"),fontWeight:700},{src:l().join(process.cwd(),"public","fonts","NotoSansKR-ExtraBold.ttf"),fontWeight:800},{src:l().join(process.cwd(),"public","fonts","NotoSansKR-Black.ttf"),fontWeight:900}]});let d=r.StyleSheet.create({page:{flexDirection:"column",backgroundColor:"#FFFFFF",padding:30,fontSize:11,fontFamily:"NotoSansKR"},header:{textAlign:"center",marginBottom:5,fontFamily:"NotoSansKR"},companyName:{fontSize:24,fontFamily:"NotoSansKR",fontWeight:700,textAlign:"center"},companyInfo:{fontSize:12,lineHeight:1.2,marginBottom:4,fontFamily:"NotoSansKR",fontWeight:400},documentInfo:{fontSize:12,lineHeight:1.6,fontFamily:"NotoSansKR",fontWeight:400},greeting:{textAlign:"center",marginBottom:15,fontSize:11,fontFamily:"NotoSansKR",fontWeight:400},belowText:{textAlign:"center",fontSize:12,fontFamily:"NotoSansKR",fontWeight:700,marginBottom:20},unitInfo:{textAlign:"right",fontSize:10,marginBottom:5,fontFamily:"NotoSansKR",fontWeight:400},divider:{borderBottomWidth:3,borderBottomColor:"#000000",borderBottomStyle:"solid",width:"100%"},divider_thin:{borderBottomWidth:2,borderBottomColor:"#000000",borderBottomStyle:"solid",width:"100%"},table:{width:"100%",borderStyle:"solid",borderWidth:1,borderColor:"#000000",marginBottom:30},tableRow:{margin:"auto",flexDirection:"row"},tableColHeader:{borderStyle:"solid",borderWidth:1,borderColor:"#000000",backgroundColor:"#f0f0f0",padding:3,textAlign:"center"},tableCol:{borderStyle:"solid",borderWidth:1,borderColor:"#000000",padding:3,textAlign:"center"},tableColNo:{width:"10%"},tableColProduct:{width:"50%"},tableColPrice:{width:"20%"},tableColNote:{width:"20%"},tableCellHeader:{fontSize:10,fontFamily:"NotoSansKR",fontWeight:700},tableCell:{fontSize:14,fontFamily:"NotoSansKR",fontWeight:600},tableCellLeft:{fontSize:14,fontFamily:"NotoSansKR",fontWeight:600,textAlign:"left",marginLeft:5},tableCellRight:{fontSize:14,fontFamily:"NotoSansKR",fontWeight:800,textAlign:"right",marginRight:5},closing:{fontSize:11,fontFamily:"NotoSansKR",fontWeight:400,textAlign:"center"},footerDate:{fontSize:14,fontFamily:"NotoSansKR",fontWeight:400,textAlign:"center"},footerCompany:{fontSize:18,fontFamily:"NotoSansKR",fontWeight:400,textAlign:"center"},stampImage:{position:"absolute",width:60,height:60,right:170,bottom:30},emptyRow:{height:25}}),u=e=>new Intl.NumberFormat("ko-KR").format(e);function c({invoiceData:e}){let{documentNumber:t="GP202401-01",sender:n="㈜ 곰표",receiver:i="",reference:a="",title:s="견적",date:c=new Date().toLocaleDateString("ko-KR"),items:m=[],companyInfo:h={office:"인천광역시 중구 축항대로86번길 70 205호   T.032-888-9686, F.032-888-9685",warehouse:"안산시 단원구 별망로175 금은산업b동2층 T.032-888-9686, F.032-888-9685"},priceType:f="도착도"}=e,p=m.length>0?m:[];return(0,o.jsx)(r.Document,{children:(0,o.jsxs)(r.Page,{size:"A4",style:d.page,children:[(0,o.jsx)(r.View,{style:d.header,children:(0,o.jsx)(r.Text,{style:d.companyName,children:"㈜ 곰표"})}),(0,o.jsxs)(r.View,{style:d.companyInfo,children:[(0,o.jsxs)(r.Text,{children:["사무실 : ",h.office]}),(0,o.jsxs)(r.Text,{children:["물류창고 : ",h.warehouse]})]}),(0,o.jsx)(r.View,{style:d.divider}),(0,o.jsxs)(r.View,{style:d.documentInfo,children:[(0,o.jsxs)(r.Text,{children:["▷문서번호 : ",t]}),(0,o.jsxs)(r.Text,{children:["▷발 신 : ",n]}),(0,o.jsxs)(r.Text,{children:["▷수 신 : ",i]}),(0,o.jsxs)(r.Text,{children:["▷참 조 : ",a]}),(0,o.jsxs)(r.Text,{children:["▷제 목 : ",s]})]}),(0,o.jsx)(r.View,{style:d.divider_thin}),(0,o.jsx)(r.View,{style:d.greeting,children:(0,o.jsx)(r.Text,{children:"1. 귀사의 일익 번창하심을 진심으로 기원드립니다."})}),(0,o.jsx)(r.View,{style:d.belowText,children:(0,o.jsx)(r.Text,{children:"― 아 래 ―"})}),(0,o.jsx)(r.View,{style:d.unitInfo,children:(0,o.jsx)(r.Text,{children:"단위(원)"})}),(0,o.jsxs)(r.View,{style:d.table,children:[(0,o.jsxs)(r.View,{style:d.tableRow,children:[(0,o.jsx)(r.View,{style:[d.tableColHeader,d.tableColNo],children:(0,o.jsx)(r.Text,{style:d.tableCellHeader,children:"NO"})}),(0,o.jsx)(r.View,{style:[d.tableColHeader,d.tableColProduct],children:(0,o.jsx)(r.Text,{style:d.tableCellHeader,children:"품 명"})}),(0,o.jsx)(r.View,{style:[d.tableColHeader,d.tableColPrice],children:(0,o.jsxs)(r.Text,{style:d.tableCellHeader,children:["arrival"===f?"도착도":"상차도"," 원/kg"]})}),(0,o.jsx)(r.View,{style:[d.tableColHeader,d.tableColNote],children:(0,o.jsx)(r.Text,{style:d.tableCellHeader,children:"비고"})})]}),p.map((e,t)=>(0,o.jsxs)(r.View,{style:d.tableRow,children:[(0,o.jsx)(r.View,{style:[d.tableCol,d.tableColNo],children:(0,o.jsx)(r.Text,{style:d.tableCell,children:e.no})}),(0,o.jsx)(r.View,{style:[d.tableCol,d.tableColProduct],children:(0,o.jsx)(r.Text,{style:d.tableCellLeft,children:`${e.name} ${e.originEn} ${e.nameEn}`})}),(0,o.jsx)(r.View,{style:[d.tableCol,d.tableColPrice],children:(0,o.jsx)(r.Text,{style:d.tableCellRight,children:e.price?u(e.price):""})}),(0,o.jsx)(r.View,{style:[d.tableCol,d.tableColNote]})]},t)),Array.from({length:Math.max(0,13-p.length)}).map((e,t)=>(0,o.jsxs)(r.View,{style:d.tableRow,children:[(0,o.jsx)(r.View,{style:[d.tableCol,d.tableColNo],children:(0,o.jsx)(r.Text,{style:d.tableCell,children:p.length+t+1})}),(0,o.jsx)(r.View,{style:[d.tableCol,d.tableColProduct],children:(0,o.jsx)(r.Text,{style:d.tableCell,children:" "})}),(0,o.jsx)(r.View,{style:[d.tableCol,d.tableColPrice],children:(0,o.jsx)(r.Text,{style:d.tableCell,children:" "})}),(0,o.jsx)(r.View,{style:[d.tableCol,d.tableColNote],children:(0,o.jsx)(r.Text,{style:d.tableCell,children:" "})})]},`empty-${t}`))]}),(0,o.jsx)(r.View,{style:d.closing,children:(0,o.jsx)(r.Text,{children:"2. 위 내용에 대해서는 담당자에게 문의하여 주시기 바랍니다."})}),(0,o.jsx)(r.View,{style:d.footerDate,children:(0,o.jsx)(r.Text,{children:c})}),(0,o.jsx)(r.View,{style:d.emptyRow}),(0,o.jsx)(r.View,{style:d.footerCompany,children:(0,o.jsx)(r.Text,{children:"주식회사 곰표"})}),(0,o.jsx)(r.Image,{style:d.stampImage,src:l().join(process.cwd(),"public","gompyo_stamp.png")})]})})}i()}catch(e){i(e)}})},9037:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var i=n(11432),o=n(11417),r=n(26093),a=n(38762),l=n(98194),s=n(29871);class c extends o.Component{constructor(e){super(e),this.uniqueValues=[],this.selectedValues=new Set}init(e){console.log("CheckboxFilter init called",e),this.params=e,this.extractUniqueValues(),this.createGui()}extractUniqueValues(){console.log("Extracting unique values for field:",this.params.colDef.field);let e=[];this.params.api.forEachNode(t=>{if(t.data&&null!=t.data[this.params.colDef.field]){let n;try{n=this.params.getValue(t)}catch(e){console.warn("getValue failed, using direct access:",e),n=t.data[this.params.colDef.field]}null==n&&(n=t.data[this.params.colDef.field]),e.push(String(n||""))}}),this.uniqueValues=[...new Set(e)].sort(),this.selectedValues=new Set(this.uniqueValues),console.log("Unique values:",this.uniqueValues),console.log("Selected values:",Array.from(this.selectedValues))}createGui(){this.eGui=document.createElement("div"),this.eGui.className="custom-checkbox-filter",this.eGui.innerHTML=`
      <div class="filter-container">
        <div class="filter-header">
          <button class="filter-btn select-all-btn" id="selectAll">
            <span class="btn-icon">✓</span>
            전체 선택
          </button>
          <button class="filter-btn deselect-all-btn" id="deselectAll">
            <span class="btn-icon">✕</span>
            전체 해제
          </button>
        </div>
        <div class="filter-content" id="filterContent">
          <div class="checkbox-container" id="checkboxContainer"></div>
        </div>
      </div>
    `,this.addStyles();let e=this.eGui.querySelector("#selectAll"),t=this.eGui.querySelector("#deselectAll");e&&e.addEventListener("click",()=>this.selectAll()),t&&t.addEventListener("click",()=>this.deselectAll()),this.createCheckboxes()}addStyles(){let e=document.createElement("style");e.textContent=`
      .custom-checkbox-filter {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      }

      .filter-container {
        background: white;
        border: 1px solid #e5e7eb;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        min-width: 240px;
        max-width: 300px;
        overflow: hidden;
      }

      .filter-header {
        padding: 16px;
        border-bottom: 1px solid #f3f4f6;
        display: flex;
        gap: 8px;
        background: #fafafa;
      }

      .filter-btn {
        flex: 1;
        padding: 8px 12px;
        font-size: 13px;
        font-weight: 500;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 4px;
      }

      .select-all-btn {
        background: #22c55e;
        color: white;
      }

      .select-all-btn:hover {
        background: #16a34a;
        transform: translateY(-1px);
      }

      .deselect-all-btn {
        background: #f3f4f6;
        color: #374151;
        border: 1px solid #d1d5db;
      }

      .deselect-all-btn:hover {
        background: #e5e7eb;
        transform: translateY(-1px);
      }

      .btn-icon {
        font-size: 12px;
        font-weight: bold;
      }

      .filter-content {
        max-height: 200px;
        overflow-y: auto;
        padding: 8px;
      }

      .filter-content::-webkit-scrollbar {
        width: 8px;
      }

      .filter-content::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 4px;
      }

      .filter-content::-webkit-scrollbar-thumb {
        background: #22c55e;
        border-radius: 4px;
      }

      .filter-content::-webkit-scrollbar-thumb:hover {
        background: #16a34a;
      }

      .checkbox-container {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .checkbox-item {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        border-radius: 6px;
        cursor: pointer;
        transition: background-color 0.2s ease;
      }

      .checkbox-item:hover {
        background-color: #f0fdf4;
      }

      .checkbox-input {
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        margin: 0;
        margin-right: 12px;
        width: 20px;
        height: 20px;
        border: 2px solid #374151;
        border-radius: 4px;
        cursor: pointer;
        position: relative;
        background-color: white;
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .checkbox-input:checked {
        background-color: #22C55E;
        border-color: #22C55E;
        background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath stroke='white' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round' d='m13.854 3.646-7.5 7.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6 10.293l7.146-7.147a.5.5 0 0 1 .708.708z'/%3e%3c/svg%3e");
        background-size: 12px 12px;
        background-position: center;
        background-repeat: no-repeat;
      }

      .checkbox-label {
        font-size: 14px;
        color: #374151;
        cursor: pointer;
        user-select: none;
        flex: 1;
        line-height: 1.4;
      }

      .empty-state {
        padding: 20px;
        text-align: center;
        color: #9ca3af;
        font-size: 14px;
        font-style: italic;
      }

      .empty-state-icon {
        font-size: 24px;
        margin-bottom: 8px;
        display: block;
      }
    `,document.querySelector("#custom-checkbox-filter-styles")||(e.id="custom-checkbox-filter-styles",document.head.appendChild(e))}createCheckboxes(){console.log("Creating checkboxes for values:",this.uniqueValues);let e=this.eGui.querySelector("#checkboxContainer");if(!e){console.error("Checkbox container not found!");return}if(e.innerHTML="",0===this.uniqueValues.length){e.innerHTML=`
        <div class="empty-state">
          <span class="empty-state-icon">📋</span>
          데이터가 없습니다
        </div>
      `;return}this.uniqueValues.forEach(t=>{let n=document.createElement("div");n.className="checkbox-item";let i=document.createElement("input");i.type="checkbox",i.className="checkbox-input",i.id=`checkbox-${t}-${this.params.colDef.field}`,i.checked=this.selectedValues.has(t),i.addEventListener("change",e=>{this.handleCheckboxChange(t,e.target.checked)});let o=document.createElement("label");o.className="checkbox-label",o.htmlFor=i.id,o.textContent=t,n.appendChild(i),n.appendChild(o),e.appendChild(n)})}handleCheckboxChange(e,t){t?this.selectedValues.add(e):this.selectedValues.delete(e),setTimeout(()=>{this.params.filterChangedCallback()},0)}selectAll(){this.selectedValues=new Set(this.uniqueValues),this.updateCheckboxes(),setTimeout(()=>{this.params.filterChangedCallback()},0)}deselectAll(){this.selectedValues=new Set,this.updateCheckboxes(),setTimeout(()=>{this.params.filterChangedCallback()},0)}updateCheckboxes(){let e=this.eGui.querySelector("#checkboxContainer");e&&this.uniqueValues.forEach(t=>{let n=e.querySelector(`#checkbox-${t}-${this.params.colDef.field}`);n&&(n.checked=this.selectedValues.has(t))})}getGui(){return this.eGui}isFilterActive(){return this.selectedValues.size<this.uniqueValues.length}doesFilterPass(e){if(this.selectedValues.size===this.uniqueValues.length)return!0;let t=String(e.data[this.params.colDef.field]||"");return this.selectedValues.has(t)}getModel(){return this.selectedValues.size===this.uniqueValues.length?null:{selectedValues:Array.from(this.selectedValues)}}setModel(e){e&&e.selectedValues?this.selectedValues=new Set(e.selectedValues):this.selectedValues=new Set(this.uniqueValues),this.eGui&&this.updateCheckboxes()}afterGuiAttached(){}onNewRowsLoaded(){this.extractUniqueValues(),this.eGui&&this.createCheckboxes()}destroy(){}render(){return null}}function d({columnDefs:e,data:t,loading:n=!1,error:l=null,onDragStarted:d,onDragStopped:u,onSelectionChanged:m,pagination:h=!0,paginationPageSize:f=15,onRowDragEnd:p,onCellValueChanged:b}){let g=(0,o.useRef)(null),x=(0,o.useMemo)(()=>({sortable:!0,resizable:!0,minWidth:100,filter:!0,lockPinned:!0}),[]),y=(0,o.useMemo)(()=>(console.log("Registering custom filter component:",c),{checkboxFilter:c}),[]),w=(0,o.useMemo)(()=>{let t=e.map(e=>"checkbox"===e.field?{...e,filter:!1}:!1===e.filter||"agTextColumnFilter"===e.filter||"agNumberColumnFilter"===e.filter?e:{...e,filter:"checkboxFilter",floatingFilter:!1,filterParams:{...e.filterParams}});return console.log("Processed column definitions:",t),t},[e]),S=(0,o.useMemo)(()=>e.filter(e=>e.field).map(e=>({colId:e.field,pinned:e.pinned,flex:e.flex,width:e.width,lockPinned:e.lockPinned})),[e]),C=(0,o.useMemo)(()=>a.z0,[]),v=(0,o.useCallback)(e=>{"checkbox"===e.colDef.field&&e.node.setSelected(!e.node.isSelected())},[]),j=(0,o.useCallback)(e=>{g.current=e.api,g.current?.applyColumnState({state:S,applyOrder:!0})},[S]);return l?(0,i.jsx)("div",{className:"w-full h-[800px] bg-white flex items-center justify-center overflow-y-auto",children:(0,i.jsx)("p",{className:"text-red-500",children:l})}):(0,i.jsx)("div",{className:"ag-theme-material w-full h-full bg-slate-50 rounded-xl overflow-hidden shadow-lg",children:n?(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce"}),(0,i.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,i.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})}):(0,i.jsx)("div",{className:"w-full h-full",children:(0,i.jsx)(r.W6,{theme:s.g,rowData:t,columnDefs:w,defaultColDef:x,components:y,pagination:h,paginationPageSize:f,rowSelection:"multiple",localeText:C,onDragStarted:d,onDragStopped:u,onGridReady:j,onSelectionChanged:m,rowDragManaged:!0,animateRows:!0,getRowId:e=>e.data.id,onRowDragEnd:p,suppressRowClickSelection:!0,onCellClicked:v,onCellValueChanged:b})})})}l.syG.registerModules([l.JKr])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},15995:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var i=n(10674),o=n(511);function r(){return(0,i.jsx)(o.default,{})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21037:(e,t,n)=>{"use strict";e.exports=n(68074).style},28254:(e,t,n)=>{"use strict";let i,o;n.d(t,{default:()=>J});var r=n(11432),a=n(11417),l=n(21037),s=n.n(l),c=n(9037);function d({items:e,companies:t,priceData:n,selectedRows:i,setSelectedRows:o,selectedColumns:a,setSelectedColumns:l,formatNumber:d,onCompanySelect:u,onItemsSelect:m,onCellValueChanged:h}){let f=(e,t=100,n=250)=>{let i=(e.match(/[가-힣]/g)||[]).length,o=e.length-i;return Math.max(t,Math.min(n,16*i+8*o+40))},p=(e,t=100,n=250)=>Math.max(t,Math.min(n,Math.max(...e.map(e=>f(e,0,1/0))))),b=e=>{let n=e.displayName,i=t.find(e=>e.companyColumnName===n),o=i?.id||n,a=e.selectedColumns[o];return(0,r.jsx)("div",{className:`w-full h-full flex items-center justify-start cursor-pointer px-[24px] ${a?"bg-blue-200 font-bold":""}`,onClick:()=>{let e={[o]:!a};l(e);let n=Object.keys(e).find(t=>e[t]);u((n?t.find(e=>e.id===n):null)||null)},children:(0,r.jsx)("span",{children:n})})},g=({data:e,colDef:t})=>{if(!e)return null;let o=e.name,l=t?.field,s=l&&n[l]?.[o]||0,c=i[e.id],u=!!l&&a[l];return(0,r.jsx)("div",{className:`w-full h-full flex items-center justify-start ${c&&u?"bg-green-200 font-bold":c?"bg-blue-100":""}`,children:(0,r.jsx)("span",{children:s>0?d(s):""})})},x=[{headerName:"",checkboxSelection:!0,minWidth:50,flex:1,headerCheckboxSelection:!0,filter:!1,pinned:"left",lockPinned:!0,width:70,field:"checkbox"},{headerName:"제품명",field:"name",pinned:"left",width:p([...e.map(e=>e.name),"제품명"],80,200),cellStyle:e=>({backgroundColor:i[e.data.id]?"#DBEAFE":"#f8f9fa"}),sortable:!1},{headerName:"원산지",field:"origin",pinned:"left",width:p([...e.map(e=>e.origin),"원산지"],60,120),cellStyle:e=>({backgroundColor:i[e.data.id]?"#DBEAFE":"#f8f9fa"}),sortable:!1},...t.map(e=>({headerName:e.companyColumnName,headerClass:"company-header",field:e.id,headerComponent:t=>b({...t,displayName:e.companyColumnName,selectedColumns:a,setSelectedColumns:l}),minWidth:100,width:f(e.companyColumnName),cellRenderer:g,editable:!0,cellStyle:t=>{let n=i[t.data.id],o=a[e.id];return{backgroundColor:n&&o?"#BBF7D0":n?"#DBEAFE":o?"#FEF3C7":"#ffffff"}},sortable:!1}))],y=e.map(e=>{let i={...e};return t.forEach(t=>{i[t.id]=n[t.id]?.[e.name]||0}),i});return(0,r.jsx)("div",{className:"w-full",children:(0,r.jsxs)("div",{className:"jsx-da33b79ac718ce16 w-full h-[600px]",children:[(0,r.jsx)(s(),{id:"da33b79ac718ce16",children:"div.jsx-da33b79ac718ce16 .ag-header-cell.company-header{padding:0!important}"}),(0,r.jsx)(c.A,{columnDefs:x,data:y,pagination:!1,loading:!1,onSelectionChanged:e=>{let t=e.api.getSelectedNodes(),n={};t.forEach(e=>{n[e.data.id]=!0}),o(n),m(t.map(e=>e.data.id))},onCellValueChanged:h})]})})}var u=n(82472),m=n(20245),h=n(2494),f=n(14368),p=n(68634);let b=p.z.object({name:p.z.string().min(1,"업체명을 입력해주세요."),description:p.z.string().optional(),priceType:p.z.enum(["arrival","loading"])}),g=[{name:"name",label:"업체명",type:"text",required:!0},{name:"priceType",label:"가격 유형",type:"select",options:[{label:"도착도",value:"arrival"},{label:"상차도",value:"loading"}],required:!0}];function x({onClose:e,onSubmit:t,submitLabel:n="추가"}){let[i,o]=(0,a.useState)({}),l=async n=>{try{t(n),o({}),e?.()}catch(e){e instanceof Error?o({name:e.message}):o({name:"오류가 발생했습니다."})}};return(0,r.jsx)(f.A,{fields:g,onSubmit:l,submitLabel:n,zodSchema:b,fieldErrors:i})}function y({onClose:e,onSubmit:t,submitLabel:n="수정",selectedCompany:i}){let[o,l]=(0,a.useState)({});if(!i)return null;let s=async n=>{try{t(n),l({}),e?.()}catch(e){e instanceof Error?l({name:e.message}):l({name:"오류가 발생했습니다."})}};return(0,r.jsx)(f.A,{fields:g,onSubmit:s,submitLabel:n,zodSchema:b,fieldErrors:o,initialValues:{name:i.companyName,priceType:i.priceType}})}let w=p.z.object({itemName:p.z.string().min(1,"제품명을 입력해주세요."),itemOrigin:p.z.string().min(1,"원산지를 입력해주세요."),itemNameEn:p.z.string().min(1,"제품명(영문)을 입력해주세요."),itemOriginEn:p.z.string().min(1,"원산지(영문)을 입력해주세요.")}),S=[{name:"itemName",label:"제품명",type:"text",required:!0},{name:"itemOrigin",label:"원산지",type:"text",required:!0},{name:"itemNameEn",label:"제품명(영문)",type:"text",required:!0},{name:"itemOriginEn",label:"원산지(영문)",type:"text",required:!0}];function C({onClose:e,onSubmit:t,submitLabel:n="추가"}){let[i,o]=(0,a.useState)({}),l=async n=>{try{t(n),o({}),e?.()}catch(e){e instanceof Error?o({itemName:e.message}):o({itemName:"오류가 발생했습니다."})}};return(0,r.jsx)(f.A,{fields:S,onSubmit:l,submitLabel:n,zodSchema:w,fieldErrors:i})}function v({onClose:e,onSubmit:t,submitLabel:n="수정",selectedItem:i}){let[o,l]=(0,a.useState)({});if(!i)return null;let s=async n=>{try{t(n),l({}),e?.()}catch(e){e instanceof Error?l({itemName:e.message}):l({itemName:"오류가 발생했습니다."})}};return(0,r.jsx)(f.A,{fields:S,onSubmit:s,submitLabel:n,zodSchema:w,initialValues:{itemName:i.itemName,itemOrigin:i.itemOrigin,itemNameEn:i.itemNameEn??"",itemOriginEn:i.itemOriginEn??""},fieldErrors:o})}var j=n(74247),k=n(25867);function N({open:e,onClose:t,onConfirm:n,title:i,message:o}){return(0,r.jsxs)(u.A,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:i}),(0,r.jsx)(h.A,{sx:{py:3},children:o}),(0,r.jsxs)(j.A,{sx:{px:3,pb:2,pt:0,justifyContent:"flex-end"},children:[(0,r.jsx)(k.A,{variant:"outlined",color:"primary",onClick:t,children:"취소"}),(0,r.jsx)(k.A,{variant:"contained",color:"primary",onClick:n,children:"삭제"})]})]})}function A({open:e,onClose:t,onConfirm:n}){return(0,r.jsx)(N,{open:e,onClose:t,onConfirm:n,title:"업체 삭제 확인",message:"정말로 선택한 업체를 삭제하시겠습니까?"})}function R({open:e,onClose:t,onConfirm:n}){return(0,r.jsx)(N,{open:e,onClose:t,onConfirm:n,title:"품목 삭제 확인",message:"정말로 선택한 품목을 삭제하시겠습니까?"})}function E({open:e,onClose:t,onSubmit:n}){return(0,r.jsxs)(u.A,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:"업체 추가"}),(0,r.jsx)(h.A,{children:(0,r.jsx)(x,{onClose:t,onSubmit:n})})]})}function _({open:e,onClose:t,onSubmit:n,selectedCompany:i}){return(0,r.jsxs)(u.A,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:"업체 수정"}),(0,r.jsx)(h.A,{children:(0,r.jsx)(y,{onClose:t,onSubmit:n,selectedCompany:i})})]})}function q({open:e,onClose:t,onSubmit:n}){return(0,r.jsxs)(u.A,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:"품목 추가"}),(0,r.jsx)(h.A,{children:(0,r.jsx)(C,{onClose:t,onSubmit:n})})]})}function I({open:e,onClose:t,onSubmit:n,selectedItem:i}){return(0,r.jsxs)(u.A,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:"품목 수정"}),(0,r.jsx)(h.A,{children:(0,r.jsx)(v,{onClose:t,onSubmit:n,selectedItem:i})})]})}function F({open:e,onClose:t,onDownload:n,onOpenInNewWindow:i}){let[o,l]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1),d=async()=>{if(!o)try{l(!0),await n()}finally{l(!1)}},f=async()=>{if(!s)try{c(!0),await i()}finally{c(!1)}},p=o||s;return(0,r.jsxs)(u.A,{open:e,onClose:t,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(m.A,{children:"견적서 출력"}),(0,r.jsx)(h.A,{sx:{py:3},children:"아래 버튼을 클릭하여 견적서를 출력할 수 있습니다."}),(0,r.jsxs)(j.A,{sx:{px:3,pb:2,pt:0,justifyContent:"flex-end"},children:[(0,r.jsx)(k.A,{variant:"outlined",color:"primary",onClick:t,disabled:p,children:"창 닫기"}),(0,r.jsx)(k.A,{variant:"contained",color:"primary",onClick:d,disabled:p,children:o?"다운로드 중...":"다운로드"}),(0,r.jsx)(k.A,{variant:"contained",color:"primary",onClick:f,disabled:p,children:s?"새창 열기 중...":"새창에서 열기"})]})]})}var V=n(82423),T=n(68792),z=n(1816),O=n(63016);O.callServer,O.findSourceMapURL,O.callServer,O.findSourceMapURL;let D=(0,O.createServerReference)("409a615c018433fa2f101a2a21581937161c0c1ee2",O.callServer,void 0,O.findSourceMapURL,"addQuotationCompanyAction"),P=(0,O.createServerReference)("40f749ad93ee75eadf1cc05d8edc5da960aaa830d1",O.callServer,void 0,O.findSourceMapURL,"updateQuotationCellAction"),W=(0,O.createServerReference)("40505237c0372e88c322fb73731b0cdee4aba64747",O.callServer,void 0,O.findSourceMapURL,"addQuotationItemAction"),L=(0,O.createServerReference)("40978e4adc50118fd05fa6dfb16b58a8d80242dea3",O.callServer,void 0,O.findSourceMapURL,"deleteQuotationCompanyAction"),M=(0,O.createServerReference)("4055fb31d9adee20bd75e8170cbda5f709b74963f8",O.callServer,void 0,O.findSourceMapURL,"deleteQuotationItemAction"),B=(0,O.createServerReference)("60c7bac4156a834f9aa4d6980d87e605630af8d75c",O.callServer,void 0,O.findSourceMapURL,"updateCompanyAction"),U=(0,O.createServerReference)("6048f7069ff341fc5173436274c4b93d2ee114bdd0",O.callServer,void 0,O.findSourceMapURL,"updateItemAction"),K=(0,O.createServerReference)("401df350c3b6aa883ddfad7dd5397163bb931bbb49",O.callServer,void 0,O.findSourceMapURL,"generateQuotationPDF");var G=n(77598);function $(e){!i||i.length<e?(i=Buffer.allocUnsafe(128*e),G.webcrypto.getRandomValues(i),o=0):o+e>i.length&&(G.webcrypto.getRandomValues(i),o=0),o+=e}function H(e=21){$(e|=0);let t="";for(let n=o-e;n<o;n++)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[63&i[n]];return t}let Q=()=>{let e=new Date,t=e.getFullYear().toString(),n=(e.getMonth()+1).toString().padStart(2,"0"),i=e.getDate().toString().padStart(2,"0"),o=Math.floor(1e4*Math.random()).toString().padStart(4,"0");return`GP${t}${n}${i}${o}`};function J(){let[e,t]=(0,a.useState)(!1),[n,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[s,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[h,f]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[g,x]=(0,a.useState)(null),[y,w]=(0,a.useState)(!1),[S,C]=(0,a.useState)({}),[v,j]=(0,a.useState)({}),[N,O]=(0,a.useState)([]),[G,$]=(0,a.useState)([]),[J,Y]=(0,a.useState)({}),[X,Z]=(0,a.useState)([]),[ee,et]=(0,a.useState)([]),[en,ei]=(0,a.useState)({}),[eo,er]=(0,a.useState)("domestic"),ea="domestic"===eo?N:X,el="domestic"===eo?G:ee,es="domestic"===eo?J:en,ec="domestic"===eo?O:Z,ed="domestic"===eo?$:et,eu="domestic"===eo?Y:ei,em=e=>new Intl.NumberFormat("ko-KR").format(e),eh=(e,t)=>"arrival"===t?`${e} (도착도)`:`${e} (상차도)`,ef=(e,t,n)=>{if(n.some(n=>n.companyName===e&&n.priceType===t))throw Error(`이미 존재하는 업체명과 가격 타입입니다. (${e} - ${"arrival"===t?"도착도":"상차도"})`)},ep=(e,t,n)=>{if(n.some(n=>n.itemName===e&&n.itemOrigin===t))throw Error(`이미 존재하는 품목입니다. (${e} - ${t})`)},eb=()=>{let e=[];return Object.entries(S).forEach(([t,n])=>{n&&Object.entries(v).forEach(([n,i])=>{if(i){let i=ea.find(e=>e.id===t),o=el.find(e=>e.id===n),r=es[n]?.[i?.itemName||""]||0;r>0&&e.push({productCode:t,productName:i?.itemName||"",origin:i?.itemOrigin||"",company:o?.companyName||n,priceType:o?.priceType||"",price:r,originEn:i?.itemOriginEn||"",productNameEn:i?.itemNameEn||""})}})}),e},eg=async e=>{try{let t=e.data.id,n=e.column.getColId(),i=e.newValue,o=e.oldValue,r=e.data[n];if(console.log("=== 셀 값 변경 디버깅 ==="),console.log("itemId:",t),console.log("companyId:",n),console.log("newValue:",i),console.log("oldValue:",o),console.log("currentValue:",r),console.log("params:",e),!n||"string"!=typeof n){console.log("companyId가 유효하지 않음, 처리 중단");return}let a=void 0!==i?i:r,l=""===a||null==a?null:Number(a);console.log("finalValue:",a),console.log("numericValue:",l);let s=ea.find(e=>e.id===t);s&&eu(e=>({...e,[n]:{...e[n],[s.itemName]:l||0}})),await P({itemId:t,companyId:n,value:l}),console.log(`셀 값 업데이트 완료: 제품 ${t}, 회사 ${n}, 값 ${l}`)}catch(e){console.error("셀 값 업데이트 실패:",e),alert("가격 업데이트에 실패했습니다. 다시 시도해주세요.")}},ex=async()=>{let e=eb(),t=await K({sender:"㈜ 곰표",receiver:e[0].company,date:new Date().toISOString().split("T")[0],items:e.map((e,t)=>({no:t+1,name:e.productName,originEn:e.originEn,nameEn:e.productNameEn,price:e.price})),documentNumber:Q(),priceType:e[0].priceType,reference:""});if(!t.success||!t.pdf)throw Error(t.error||"PDF 생성에 실패했습니다.");let n=atob(t.pdf),i=new Uint8Array(n.length);for(let e=0;e<n.length;e++)i[e]=n.charCodeAt(e);return{bytes:i,filename:t.filename||"견적서.pdf"}},ey=async()=>{try{let{bytes:e,filename:t}=await ex(),n=new Blob([e],{type:"application/pdf"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=t,o.style.display="none",document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),console.log("PDF 다운로드 완료:",t)}catch(e){console.error("PDF 다운로드 중 오류 발생:",e),alert("PDF 다운로드 중 오류가 발생했습니다: "+(e instanceof Error?e.message:"알 수 없는 오류"))}},ew=async()=>{try{let{bytes:e,filename:t}=await ex(),n=new Blob([e],{type:"application/pdf"}),i=URL.createObjectURL(n),o=window.open(i,"_blank");if(o)o.addEventListener("load",()=>{try{o.document.title=t}catch(e){console.warn("새 창 제목 설정 실패:",e)}}),setTimeout(()=>{URL.revokeObjectURL(i)},1e3),console.log("PDF 새 창에서 열기 완료:",t);else{alert("팝업이 차단되었습니다. 다운로드로 진행합니다.");let e=document.createElement("a");e.href=i,e.download=t,e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(i),console.log("팝업 차단으로 다운로드 대체 완료:",t)}}catch(e){console.error("PDF 새창 열기 중 오류 발생:",e),alert("PDF 새창 열기 중 오류가 발생했습니다: "+(e instanceof Error?e.message:"알 수 없는 오류"))}};return(0,r.jsxs)("div",{className:"w-full min-h-screen bg-gray-100",children:[(0,r.jsxs)("div",{className:"p-4 sm:p-8",children:[(0,r.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center sm:justify-between mb-4 sm:mb-6 gap-4",children:(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold",children:"견적서 작성"})}),(0,r.jsxs)(V.A,{direction:"row",spacing:2,children:[(0,r.jsx)("div",{className:"flex flex-row justify-between items-end flex-shrink-0",style:{minHeight:24},children:(0,r.jsxs)(T.A,{value:eo,onChange:(e,t)=>er(t),sx:{mb:2,"& .MuiTabs-indicator":{backgroundColor:"#22C55E"},"& .MuiTab-root":{color:"#6B7280","&.Mui-selected":{color:"#22C55E"},"&:hover":{color:"#16A34A"}}},children:[(0,r.jsx)(z.A,{label:"국내 업체",value:"domestic"}),(0,r.jsx)(z.A,{label:"해외 업체",value:"overseas"})]})}),(0,r.jsxs)(V.A,{direction:"row",spacing:2,className:"w-full justify-end pb-4",children:[(0,r.jsx)(k.A,{variant:"contained",onClick:()=>t(!0),sx:{backgroundColor:"#22C55E","&:hover":{backgroundColor:"#16A34A"},fontWeight:600,boxShadow:"none"},children:"업체 추가"}),(0,r.jsx)(k.A,{variant:"contained",onClick:()=>i(!0),disabled:!p,sx:{backgroundColor:"#22C55E","&:hover":{backgroundColor:"#16A34A"},fontWeight:600,boxShadow:"none"},children:"업체 수정"}),(0,r.jsx)(k.A,{variant:"contained",onClick:()=>l(!0),sx:{backgroundColor:"#3B82F6","&:hover":{backgroundColor:"#2563EB"},fontWeight:600,boxShadow:"none"},children:"품목 추가"}),(0,r.jsx)(k.A,{variant:"contained",onClick:()=>c(!0),disabled:null===g||1!==g.length,sx:{backgroundColor:"#3B82F6","&:hover":{backgroundColor:"#2563EB"},fontWeight:600,boxShadow:"none"},children:"품목 수정"}),(0,r.jsx)(k.A,{variant:"contained",onClick:()=>m(!0),disabled:!p,sx:{backgroundColor:"#EF4444","&:hover":{backgroundColor:"#DC2626"},fontWeight:600,boxShadow:"none"},children:"업체 삭제"}),(0,r.jsx)(k.A,{variant:"contained",onClick:()=>f(!0),disabled:null===g||0===g.length,sx:{backgroundColor:"#EF4444","&:hover":{backgroundColor:"#DC2626"},fontWeight:600,boxShadow:"none"},children:"품목 삭제"}),(0,r.jsxs)(k.A,{variant:"contained",disabled:0===eb().length,onClick:()=>w(!0),sx:{backgroundColor:"#6366F1","&:hover":{backgroundColor:"#4F46E5"},fontWeight:600,boxShadow:"none"},children:["견적서 작성 (",eb().length,")"]})]})]}),(0,r.jsx)("div",{className:"overflow-hidden",children:(0,r.jsx)(d,{items:ea.map(e=>({id:e.id,code:e.itemOrigin,name:e.itemName,origin:e.itemOrigin})),companies:el,priceData:es,selectedRows:S,setSelectedRows:C,selectedColumns:v,setSelectedColumns:j,getIntersectionItems:eb,formatNumber:em,onCompanySelect:b,onItemsSelect:x,onCellValueChanged:eg})}),eb().length>0&&(0,r.jsxs)("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:[(0,r.jsxs)("p",{className:"text-sm text-green-800 font-semibold",children:["선택된 견적 항목: ",eb().length,"개"]}),(0,r.jsx)("div",{className:"text-xs text-green-700 mt-1",children:eb().map((e,t)=>(0,r.jsxs)("span",{children:[e.company,"에서 ",e.productName," (",em(e.price),"원)",t<eb().length-1?", ":""]},t))})]})]}),(0,r.jsx)(E,{open:e,onClose:()=>t(!1),onSubmit:e=>{let t=e.name;ef(t,e.priceType,el);let n={id:H(),companyName:t,companyType:eo,priceType:e.priceType,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},i={...n,companyColumnName:eh(n.companyName,n.priceType)};ed(e=>[...e,i]),eu(e=>({...e,[n.id]:{}})),D(n),P({companyId:n.id,itemId:"domestic"===eo?N[0].id:X[0].id,value:0})}}),p&&el.find(e=>e.id===p.id)&&(0,r.jsx)(_,{open:n,onClose:()=>i(!1),onSubmit:e=>{p&&(ef(e.name,e.priceType,el),B(p.id,{companyName:e.name,companyType:eo,priceType:e.priceType}),ed(t=>t.map(t=>t.id===p.id?{...t,companyName:e.name,priceType:e.priceType,companyColumnName:eh(e.name,e.priceType)}:t)),i(!1))},selectedCompany:el.find(e=>e.id===p?.id)||p}),(0,r.jsx)(q,{open:o,onClose:()=>l(!1),onSubmit:e=>{ep(e.itemName,e.itemOrigin,ea);let t={id:H(),itemName:e.itemName,itemOrigin:e.itemOrigin,itemNameEn:e.itemNameEn,itemOriginEn:e.itemOriginEn,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};ec(e=>[...e,t]),W(t),P({companyId:"domestic"===eo?G[0].id:ee[0].id,itemId:t.id,value:0})}}),g&&g.length>0&&ea.find(e=>e.id===g[0])&&(0,r.jsx)(I,{open:s,onClose:()=>c(!1),onSubmit:e=>{g&&(ep(e.itemName,e.itemOrigin,ea),U(g[0],{itemName:e.itemName,itemOrigin:e.itemOrigin,itemNameEn:e.itemNameEn,itemOriginEn:e.itemOriginEn}),ec(t=>t.map(t=>t.id===g[0]?{...t,itemName:e.itemName,itemOrigin:e.itemOrigin,itemNameEn:e.itemNameEn,itemOriginEn:e.itemOriginEn}:t)),c(!1))},selectedItem:ea.find(e=>e.id===g?.[0])}),(0,r.jsx)(A,{open:u,onClose:()=>m(!1),onConfirm:()=>{p&&(ed(e=>e.filter(e=>e.id!==p.id)),L(p.id),eu(e=>{let t={...e};return delete t[p.id],t}),b(null),m(!1))}}),(0,r.jsx)(R,{open:h,onClose:()=>f(!1),onConfirm:()=>{null!==g&&0!==g.length&&(ec(e=>e.filter(e=>!g.includes(e.id))),g.forEach(e=>{M(e)}),eu(e=>{let t={...e};return Object.keys(t).forEach(e=>{g.forEach(n=>{let i=ea.find(e=>e.id===n);i&&t[e][i.itemName]&&delete t[e][i.itemName]})}),t}),x([]),f(!1))}}),(0,r.jsx)(F,{open:y,onClose:()=>w(!1),onDownload:ey,onOpenInNewWindow:ew})]})}},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33552:(e,t,n)=>{"use strict";n.a(e,async(e,i)=>{try{n.d(t,{A_:()=>v,Bs:()=>u,Dn:()=>g,Er:()=>C,Oc:()=>y,Vt:()=>w,Vz:()=>f,pM:()=>b,ps:()=>x,t4:()=>S,tF:()=>h,vf:()=>p,w1:()=>m});var o=n(17464);n(55414);var r=n(53063),a=n(19541),l=n(972),s=n(4638),c=n(1634),d=e([l,s]);async function u(){try{return await (0,r._0)()}catch(e){throw console.error("getQuotationDataAction error",e),e}}async function m(e){try{await (0,r.yN)(e),(0,a.revalidatePath)("/grid")}catch(e){throw console.error("updateQuotationCellAction error",e),e}}async function h(e){try{let t=await (0,r.P0)(e);return(0,a.revalidatePath)("/grid"),t}catch(e){throw console.error("addQuotationCompanyAction error",e),e}}async function f(e){try{let t=await (0,r.B5)(e);return(0,a.revalidatePath)("/grid"),t}catch(e){throw console.error("addQuotationItemAction error",e),e}}async function p(e){try{await (0,r.RC)(e),(0,a.revalidatePath)("/grid")}catch(e){throw console.error("deleteQuotationCompanyAction error",e),e}}async function b(e){try{await (0,r.LD)(e),(0,a.revalidatePath)("/grid")}catch(e){throw console.error("deleteQuotationItemAction error",e),e}}async function g(e,t){try{let n=await (0,r.JT)(e,{companyName:t.companyName,companyType:t.companyType,priceType:t.priceType});return(0,a.revalidatePath)("/quotation"),n}catch(e){throw console.error("updateCompanyAction error",e),e}}async function x(e,t){try{let n=await (0,r.fk)(e,{itemName:t.itemName,itemOrigin:t.itemOrigin,itemNameEn:t.itemNameEn||null,itemOriginEn:t.itemOriginEn||null});return(0,a.revalidatePath)("/quotation"),n}catch(e){throw console.error("updateItemAction error",e),e}}async function y(){try{return await (0,r.U_)()}catch(e){throw console.error("getCompaniesAction error",e),e}}async function w(){try{return await (0,r.JS)()}catch(e){throw console.error("getItemsAction error",e),e}}async function S(){try{return await (0,r._0)("domestic")}catch(e){throw console.error("getDomesticAction error",e),e}}async function C(){try{return await (0,r._0)("foreign")}catch(e){throw console.error("getForeignerAction error",e),e}}async function v(e){try{let t=(0,s.A)({invoiceData:e}),n=(await (0,l.renderToBuffer)(t)).toString("base64");return{success:!0,pdf:n,filename:`${e.receiver}_견적서_${new Date().toISOString().split("T")[0]}.pdf`}}catch(e){return console.error("PDF 생성 오류:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}[l,s]=d.then?(await d)():d,(0,c.D)([u,m,h,f,p,b,g,x,y,w,S,C,v]),(0,o.A)(u,"0094bebc528d302e8a31420db99eddc8ba703e44bb",null),(0,o.A)(m,"40f749ad93ee75eadf1cc05d8edc5da960aaa830d1",null),(0,o.A)(h,"409a615c018433fa2f101a2a21581937161c0c1ee2",null),(0,o.A)(f,"40505237c0372e88c322fb73731b0cdee4aba64747",null),(0,o.A)(p,"40978e4adc50118fd05fa6dfb16b58a8d80242dea3",null),(0,o.A)(b,"4055fb31d9adee20bd75e8170cbda5f709b74963f8",null),(0,o.A)(g,"60c7bac4156a834f9aa4d6980d87e605630af8d75c",null),(0,o.A)(x,"6048f7069ff341fc5173436274c4b93d2ee114bdd0",null),(0,o.A)(y,"005c5ef54216e7ecc1b79b4016c3a369be059362c9",null),(0,o.A)(w,"006a63e432f2c6417eb080b7cc674ec917982d5390",null),(0,o.A)(S,"008c79e7b09ae4723dd2d6ba4fb1333aff2ab0e31a",null),(0,o.A)(C,"00601584ba4e18e46925a4a924e98d11f979d29c83",null),(0,o.A)(v,"401df350c3b6aa883ddfad7dd5397163bb931bbb49",null),i()}catch(e){i(e)}})},33873:e=>{"use strict";e.exports=require("path")},34572:(e,t,n)=>{"use strict";n.a(e,async(e,i)=>{try{n.r(t),n.d(t,{"005c5ef54216e7ecc1b79b4016c3a369be059362c9":()=>o.Oc,"00601584ba4e18e46925a4a924e98d11f979d29c83":()=>o.Er,"006a63e432f2c6417eb080b7cc674ec917982d5390":()=>o.Vt,"008c79e7b09ae4723dd2d6ba4fb1333aff2ab0e31a":()=>o.t4,"0094bebc528d302e8a31420db99eddc8ba703e44bb":()=>o.Bs,"401df350c3b6aa883ddfad7dd5397163bb931bbb49":()=>o.A_,"40505237c0372e88c322fb73731b0cdee4aba64747":()=>o.Vz,"4055fb31d9adee20bd75e8170cbda5f709b74963f8":()=>o.pM,"40978e4adc50118fd05fa6dfb16b58a8d80242dea3":()=>o.vf,"409a615c018433fa2f101a2a21581937161c0c1ee2":()=>o.tF,"40f749ad93ee75eadf1cc05d8edc5da960aaa830d1":()=>o.w1,"6048f7069ff341fc5173436274c4b93d2ee114bdd0":()=>o.ps,"60c7bac4156a834f9aa4d6980d87e605630af8d75c":()=>o.Dn});var o=n(33552),r=e([o]);o=(r.then?(await r)():r)[0],i()}catch(e){i(e)}})},36046:(e,t,n)=>{Promise.resolve().then(n.bind(n,28254))},53063:(e,t,n)=>{"use strict";n.d(t,{B5:()=>c,JS:()=>h,JT:()=>p,LD:()=>u,P0:()=>s,RC:()=>d,U_:()=>m,_0:()=>f,fk:()=>b,yN:()=>l});var i=n(13913),o=n(8613),r=n(98149),a=n(26763);async function l(e){try{let{itemId:t,companyId:n,value:l}=e;(await i.db.select().from(o.quotationCompaniesItems).where((0,r.Uo)((0,r.eq)(o.quotationCompaniesItems.itemId,t),(0,r.eq)(o.quotationCompaniesItems.companyId,n))).limit(1)).length>0?await i.db.update(o.quotationCompaniesItems).set({value:l,updatedAt:new Date().toISOString()}).where((0,r.Uo)((0,r.eq)(o.quotationCompaniesItems.itemId,t),(0,r.eq)(o.quotationCompaniesItems.companyId,n))):await i.db.insert(o.quotationCompaniesItems).values({id:(0,a.Ak)(),itemId:t,companyId:n,value:l,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}catch(e){throw console.error("그리드 셀 업데이트 실패:",e),Error("데이터 업데이트에 실패했습니다.")}}async function s(e){try{return await i.db.insert(o.quotationCompanies).values(e),e}catch(e){throw console.error("회사 추가 실패:",e),Error("회사 추가에 실패했습니다.")}}async function c(e){try{return await i.db.insert(o.quotationItems).values(e),e}catch(e){throw console.error("품목 추가 실패:",e),Error("품목 추가에 실패했습니다.")}}async function d(e){try{await i.db.delete(o.quotationCompanies).where((0,r.eq)(o.quotationCompanies.id,e))}catch(e){throw console.error("회사 삭제 실패:",e),Error("회사 삭제에 실패했습니다.")}}async function u(e){try{await i.db.delete(o.quotationItems).where((0,r.eq)(o.quotationItems.id,e))}catch(e){throw console.error("품목 삭제 실패:",e),Error("품목 삭제에 실패했습니다.")}}async function m(e){let t=i.db.select().from(o.quotationCompanies).orderBy(o.quotationCompanies.companyName);return e?await t.where((0,r.eq)(o.quotationCompanies.companyType,e)):await t}async function h(e){if(!e)return await i.db.select().from(o.quotationItems).orderBy(o.quotationItems.itemName);let t=(await m(e)).map(e=>e.id);if(0===t.length)return[];let n=i.db.selectDistinct({itemId:o.quotationCompaniesItems.itemId}).from(o.quotationCompaniesItems).where(1===t.length?(0,r.eq)(o.quotationCompaniesItems.companyId,t[0]):(0,r.RV)(o.quotationCompaniesItems.companyId,t)),a=(await n).map(e=>e.itemId);return 0===a.length?[]:await i.db.select().from(o.quotationItems).where(1===a.length?(0,r.eq)(o.quotationItems.id,a[0]):(0,r.RV)(o.quotationItems.id,a)).orderBy(o.quotationItems.itemName)}async function f(e){try{if(!e)return{items:[],companies:[],priceData:{}};let t=await m(e),n=t.map(e=>e.id);if(0===n.length)return{items:[],companies:[],priceData:{}};let a=await h(e),l=a.map(e=>e.id);if(0===l.length)return{items:[],companies:[],priceData:{}};let s=await i.db.select().from(o.quotationCompaniesItems).where(1===n.length?(0,r.eq)(o.quotationCompaniesItems.companyId,n[0]):(0,r.RV)(o.quotationCompaniesItems.companyId,n)),c={};return t.forEach(e=>{c[e.id]={}}),s.forEach(e=>{let t=a.find(t=>t.id===e.itemId);t&&null!==e.value&&(c[e.companyId]||(c[e.companyId]={}),c[e.companyId][t.itemName]=e.value)}),{items:a,companies:t,priceData:c}}catch(e){throw console.error("getQuotationRelations error",e),Error("견적 관계 데이터 조회에 실패했습니다.")}}async function p(e,t){try{await i.db.update(o.quotationCompanies).set({...t,updatedAt:new Date().toISOString()}).where((0,r.eq)(o.quotationCompanies.id,e));let n=await i.db.select().from(o.quotationCompanies).where((0,r.eq)(o.quotationCompanies.id,e)).limit(1);if(0===n.length)throw Error("업데이트된 회사를 찾을 수 없습니다.");return n[0]}catch(e){throw console.error("회사 업데이트 실패:",e),Error("회사 정보 업데이트에 실패했습니다.")}}async function b(e,t){try{await i.db.update(o.quotationItems).set({...t,updatedAt:new Date().toISOString()}).where((0,r.eq)(o.quotationItems.id,e));let n=await i.db.select().from(o.quotationItems).where((0,r.eq)(o.quotationItems.id,e)).limit(1);if(0===n.length)throw Error("업데이트된 품목을 찾을 수 없습니다.");return n[0]}catch(e){throw console.error("품목 업데이트 실패:",e),Error("품목 정보 업데이트에 실패했습니다.")}}},62814:()=>{},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66310:(e,t,n)=>{Promise.resolve().then(n.bind(n,511))},68074:(e,t,n)=>{"use strict";n(62814);var i=n(11417),o=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(i),r="undefined"!=typeof process&&process.env&&!0,a=function(e){return"[object String]"===Object.prototype.toString.call(e)},l=function(){function e(e){var t=void 0===e?{}:e,n=t.name,i=void 0===n?"stylesheet":n,o=t.optimizeForSpeed,l=void 0===o?r:o;s(a(i),"`name` must be a string"),this._name=i,this._deletedRulePlaceholder="#"+i+"-deleted-rule____{}",s("boolean"==typeof l,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=l,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){s("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),s(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;s(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(t,n){return"number"==typeof n?e._serverSheet.cssRules[n]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),n},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){return s(a(e),"`insertRule` accepts only strings"),"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++},t.replaceRule=function(e,t){this._optimizeForSpeed;var n=this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!n.cssRules[e])return e;n.deleteRule(e);try{n.insertRule(t,e)}catch(i){r||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),n.insertRule(this._deletedRulePlaceholder,e)}return e},t.deleteRule=function(e){this._serverSheet.deleteRule(e)},t.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},t.cssRules=function(){return this._serverSheet.cssRules},t.makeStyleTag=function(e,t,n){t&&s(a(t),"makeStyleTag accepts only strings as second parameter");var i=document.createElement("style");this._nonce&&i.setAttribute("nonce",this._nonce),i.type="text/css",i.setAttribute("data-"+e,""),t&&i.appendChild(document.createTextNode(t));var o=document.head||document.getElementsByTagName("head")[0];return n?o.insertBefore(i,n):o.appendChild(i),i},function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function s(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0},d={};function u(e,t){if(!t)return"jsx-"+e;var n=String(t),i=e+n;return d[i]||(d[i]="jsx-"+c(e+"-"+n)),d[i]}function m(e,t){var n=e+(t=t.replace(/\/style/gi,"\\/style"));return d[n]||(d[n]=t.replace(/__jsx-style-dynamic-selector/g,e)),d[n]}var h=function(){function e(e){var t=void 0===e?{}:e,n=t.styleSheet,i=void 0===n?null:n,o=t.optimizeForSpeed,r=void 0!==o&&o;this._sheet=i||new l({name:"styled-jsx",optimizeForSpeed:r}),this._sheet.inject(),i&&"boolean"==typeof r&&(this._sheet.setOptimizeForSpeed(r),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed());var n=this.getIdAndRules(e),i=n.styleId,o=n.rules;if(i in this._instancesCounts){this._instancesCounts[i]+=1;return}var r=o.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[i]=r,this._instancesCounts[i]=1},t.remove=function(e){var t=this,n=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(n in this._instancesCounts,"styleId: `"+n+"` not found"),this._instancesCounts[n]-=1,this._instancesCounts[n]<1){var i=this._fromServer&&this._fromServer[n];i?(i.parentNode.removeChild(i),delete this._fromServer[n]):(this._indices[n].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[n]),delete this._instancesCounts[n]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],n=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return n[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,n;return t=this.cssRules(),void 0===(n=e)&&(n={}),t.map(function(e){var t=e[0],i=e[1];return o.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:n.nonce?n.nonce:void 0,dangerouslySetInnerHTML:{__html:i}})})},t.getIdAndRules=function(e){var t=e.children,n=e.dynamic,i=e.id;if(n){var o=u(i,n);return{styleId:o,rules:Array.isArray(t)?t.map(function(e){return m(o,e)}):[m(o,t)]}}return{styleId:u(i),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=i.createContext(null);f.displayName="StyleSheetContext";o.default.useInsertionEffect||o.default.useLayoutEffect;var p=void 0;function b(e){var t=p||i.useContext(f);return t&&t.add(e),null}b.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},t.style=b},73405:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c});var i=n(65282),o=n(20277),r=n(47757),a=n.n(r),l=n(96002),s={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>l[e]);n.d(t,s);let c={children:["",{children:["quotation",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,15995)),"/Users/kang-yean-woo/gompyo/src/app/quotation/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(n.bind(n,98445)),"/Users/kang-yean-woo/gompyo/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.bind(n,24327)),"/Users/kang-yean-woo/gompyo/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(n.t.bind(n,68366,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(n.t.bind(n,75895,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/kang-yean-woo/gompyo/src/app/quotation/page.tsx"],u={require:n,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/quotation/page",pathname:"/quotation",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},73407:(e,t,n)=>{"use strict";e.exports=n(65282).vendored["react-rsc"].ReactJsxRuntime},77598:e=>{"use strict";e.exports=require("node:crypto")},79551:e=>{"use strict";e.exports=require("url")},87550:e=>{"use strict";e.exports=require("better-sqlite3")}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),i=t.X(0,[883,873,91,36,335,560,293,541,289,547,913,368],()=>n(73405));module.exports=i})();
