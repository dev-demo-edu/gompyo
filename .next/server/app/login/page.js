(()=>{var e={};e.id=520,e.ids=[520],e.modules={2449:(e,r,t)=>{"use strict";t.d(r,{default:()=>a});let a=(0,t(73602).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kang-yean-woo/gompyo/src/containers/login.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kang-yean-woo/gompyo/src/containers/login.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32398:(e,r,t)=>{Promise.resolve().then(t.bind(t,34655))},33873:e=>{"use strict";e.exports=require("path")},34655:(e,r,t)=>{"use strict";t.d(r,{default:()=>g});var a=t(11432),n=t(11417),o=t(63016);let s=(0,o.createServerReference)("408929af2e2aac9aafeffc420416c1e63ec8f3fd51",o.callServer,void 0,o.findSourceMapURL,"loginUser");var i=t(10182),l=t(34294),u=t(55768),d=t(54408),c=t(84245),p=t(98801),m=t(36),f=t(25867),b=t(65640);function g(){let[e,r]=(0,n.useState)(null),[t,o]=(0,n.useState)(!1),g=(0,i.useRouter)(),h=async e=>{e.preventDefault(),o(!0),r(null);let t=new FormData(e.currentTarget);try{let e=await s(t);e?.error?r(e.error):e?.success&&g.push("/")}catch(e){r("로그인 중 오류가 발생했습니다. 다시 시도해주세요."),console.error("Login error:",e)}finally{o(!1)}};return(0,a.jsx)(l.A,{sx:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:"background.default"},children:(0,a.jsx)(u.A,{sx:{maxWidth:400,width:"100%",mx:2},children:(0,a.jsxs)(d.A,{sx:{p:4},children:[(0,a.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:4},children:[(0,a.jsx)(l.A,{component:"img",src:"/gompyo.svg",alt:"Gompyo Logo",sx:{width:200,height:"auto",mb:2}}),(0,a.jsx)(c.A,{variant:"h4",component:"h1",align:"center",sx:{color:"primary.main"},children:"로그인"})]}),e&&(0,a.jsx)(p.A,{severity:"error",sx:{mb:3},children:e}),(0,a.jsxs)(l.A,{component:"form",onSubmit:h,noValidate:!0,children:[(0,a.jsx)(m.A,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"이메일",name:"email",autoComplete:"email",autoFocus:!0,sx:{mb:2}}),(0,a.jsx)(m.A,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"비밀번호",type:"password",id:"password",autoComplete:"current-password",sx:{mb:3}}),(0,a.jsx)(f.A,{type:"submit",fullWidth:!0,variant:"contained",disabled:t,sx:{py:1.5,bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:t?(0,a.jsx)(b.A,{size:24,color:"inherit"}):"로그인"})]})]})})})}},36405:(e,r,t)=>{"use strict";t.d(r,{wz:()=>b,Dm:()=>g,_4:()=>y,OA:()=>h,Lx:()=>m,y4:()=>f,Mo:()=>v,V3:()=>x,Fq:()=>w});var a=t(17464);t(55414);var n=t(19541),o=t(14567),s=t(15198),i=t(13913),l=t(8613),u=t(98149);class d{async findByEmail(e){let[r]=await i.db.select().from(l.users).where((0,u.eq)(l.users.email,e));return r}async findById(e){let[r]=await i.db.select().from(l.users).where((0,u.eq)(l.users.id,e));return r}async getPlanColumnOrder(e){let r=await this.findById(e);return r.planColumnOrder?JSON.parse(r.planColumnOrder):null}async getShipmentColumnOrder(e){let r=await this.findById(e);return r.shipmentColumnOrder?JSON.parse(r.shipmentColumnOrder):null}async getQuotationColumnOrder(e){let r=await this.findById(e);return r.quotationColumnOrder?JSON.parse(r.quotationColumnOrder):null}async updatePlanColumnOrder(e,r){let[t]=await i.db.update(l.users).set({planColumnOrder:r}).where((0,u.eq)(l.users.id,e)).returning();return t}async updateShipmentColumnOrder(e,r){let[t]=await i.db.update(l.users).set({shipmentColumnOrder:r}).where((0,u.eq)(l.users.id,e)).returning();return t}async updateQuotationColumnOrder(e,r){let[t]=await i.db.update(l.users).set({quotationColumnOrder:r}).where((0,u.eq)(l.users.id,e)).returning();return t}async create(e){let[r]=await i.db.insert(l.users).values(e).returning();return r}async delete(e){return await i.db.delete(l.users).where((0,u.eq)(l.users.id,e)),!0}}var c=t(1634);let p=new d;async function m(e){let r=e.get("email"),t=e.get("password");try{let e=await p.findByEmail(r);if(!e||e.password!==t)return{error:"이메일 또는 비밀번호가 올바르지 않습니다."};return(await (0,o.UL)()).set({name:"userId",value:e.id,httpOnly:!0,maxAge:604800,path:"/"}),{success:!0}}catch(e){return console.error("Login error:",e),{error:"로그인 중 오류가 발생했습니다."}}}async function f(){(await (0,o.UL)()).delete("userId"),(0,s.redirect)("/login")}async function b(){let e=await (0,o.UL)(),r=e.get("userId")?.value;return r?p.findById(r):null}async function g(){let e=await (0,o.UL)(),r=e.get("userId")?.value;return r?await p.getPlanColumnOrder(r):[]}async function h(){let e=await (0,o.UL)(),r=e.get("userId")?.value;return r?await p.getShipmentColumnOrder(r):[]}async function y(){let e=await (0,o.UL)(),r=e.get("userId")?.value;return r?await p.getQuotationColumnOrder(r):[]}async function v(e){let r=await (0,o.UL)(),t=r.get("userId")?.value;if(!t)return{error:"로그인이 필요합니다."};try{return await p.updatePlanColumnOrder(t,JSON.stringify(e)),(0,n.revalidatePath)("/"),{success:!0}}catch(e){return console.error("컬럼 순서 저장 오류:",e),{error:"컬럼 순서를 저장하는 중 오류가 발생했습니다."}}}async function w(e){let r=await (0,o.UL)(),t=r.get("userId")?.value;if(!t)return{error:"로그인이 필요합니다."};try{return await p.updateShipmentColumnOrder(t,JSON.stringify(e)),(0,n.revalidatePath)("/"),{success:!0}}catch(e){return console.error("컬럼 순서 저장 오류:",e),{error:"컬럼 순서를 저장하는 중 오류가 발생했습니다."}}}async function x(e){let r=await (0,o.UL)(),t=r.get("userId")?.value;if(!t)return{error:"로그인이 필요합니다."};try{return await p.updateQuotationColumnOrder(t,JSON.stringify(e)),(0,n.revalidatePath)("/"),{success:!0}}catch(e){return console.error("컬럼 순서 저장 오류:",e),{error:"컬럼 순서를 저장하는 중 오류가 발생했습니다."}}}(0,c.D)([m,f,b,g,h,y,v,w,x]),(0,a.A)(m,"408929af2e2aac9aafeffc420416c1e63ec8f3fd51",null),(0,a.A)(f,"00d488412b516bc24aca18dc84e420458b44b596b1",null),(0,a.A)(b,"00555b71b42034e579b9b02bbc8e57f3215655c677",null),(0,a.A)(g,"000e9c40adf4863e2a569c11e27d08a5c60e10abf4",null),(0,a.A)(h,"008c5888306603029997992d8c965e179ca97c89e6",null),(0,a.A)(y,"007414b2f3dbd4feee779bd8064c0480c8d85fb29c",null),(0,a.A)(v,"40871fb1d9a0824289c8ab17a3eaba998da3361b57",null),(0,a.A)(w,"40819614d6cb0ee4e17e766c48f6ea75841691bb64",null),(0,a.A)(x,"40468492781adb2263175f4245f0937589ae77cf6b",null)},50356:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"000e9c40adf4863e2a569c11e27d08a5c60e10abf4":()=>a.Dm,"00555b71b42034e579b9b02bbc8e57f3215655c677":()=>a.wz,"007414b2f3dbd4feee779bd8064c0480c8d85fb29c":()=>a._4,"008c5888306603029997992d8c965e179ca97c89e6":()=>a.OA,"00d488412b516bc24aca18dc84e420458b44b596b1":()=>a.y4,"40468492781adb2263175f4245f0937589ae77cf6b":()=>a.V3,"40819614d6cb0ee4e17e766c48f6ea75841691bb64":()=>a.Fq,"40871fb1d9a0824289c8ab17a3eaba998da3361b57":()=>a.Mo,"408929af2e2aac9aafeffc420416c1e63ec8f3fd51":()=>a.Lx});var a=t(36405)},54408:(e,r,t)=>{"use strict";t.d(r,{A:()=>h});var a=t(50023),n=t(38054),o=t(11417),s=t(28644),i=t(21790),l=t(41886),u=t(58883),d=t(81660),c=t(49116);function p(e){return(0,c.Ay)("MuiCardContent",e)}(0,d.A)("MuiCardContent",["root"]);var m=t(11432);let f=["className","component"],b=e=>{let{classes:r}=e;return(0,i.A)({root:["root"]},p,r)},g=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),h=o.forwardRef(function(e,r){let t=(0,u.A)({props:e,name:"MuiCardContent"}),{className:o,component:i="div"}=t,l=(0,n.A)(t,f),d=(0,a.A)({},t,{component:i}),c=b(d);return(0,m.jsx)(g,(0,a.A)({as:i,className:(0,s.A)(c.root,o),ownerState:d,ref:r},l))})},55768:(e,r,t)=>{"use strict";t.d(r,{A:()=>y});var a=t(50023),n=t(38054),o=t(11417),s=t(28644),i=t(21790),l=t(41886),u=t(58883),d=t(64886),c=t(81660),p=t(49116);function m(e){return(0,p.Ay)("MuiCard",e)}(0,c.A)("MuiCard",["root"]);var f=t(11432);let b=["className","raised"],g=e=>{let{classes:r}=e;return(0,i.A)({root:["root"]},m,r)},h=(0,l.Ay)(d.A,{name:"MuiCard",slot:"Root",overridesResolver:(e,r)=>r.root})(()=>({overflow:"hidden"})),y=o.forwardRef(function(e,r){let t=(0,u.A)({props:e,name:"MuiCard"}),{className:o,raised:i=!1}=t,l=(0,n.A)(t,b),d=(0,a.A)({},t,{raised:i}),c=g(d);return(0,f.jsx)(h,(0,a.A)({className:(0,s.A)(c.root,o),elevation:i?8:void 0,ref:r,ownerState:d},l))})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71718:(e,r,t)=>{Promise.resolve().then(t.bind(t,2449))},73284:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var a=t(10674),n=t(2449);function o(){return(0,a.jsx)(n.default,{})}},79551:e=>{"use strict";e.exports=require("url")},82281:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>s.a,__next_app__:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>u});var a=t(65282),n=t(20277),o=t(47757),s=t.n(o),i=t(96002),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let u={children:["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,73284)),"/Users/kang-yean-woo/gompyo/src/app/login/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,98445)),"/Users/kang-yean-woo/gompyo/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,24327)),"/Users/kang-yean-woo/gompyo/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,68366,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,75895,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/kang-yean-woo/gompyo/src/app/login/page.tsx"],c={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},87550:e=>{"use strict";e.exports=require("better-sqlite3")}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[883,32,91,36,541,548,768,547,913],()=>t(82281));module.exports=a})();
