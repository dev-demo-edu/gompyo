(()=>{var e={};e.id=884,e.ids=[884],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9367:(e,a,t)=>{"use strict";t.d(a,{default:()=>r});let r=(0,t(73602).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kang-yean-woo/gompyo/src/containers/cashflow/cashflow.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kang-yean-woo/gompyo/src/containers/cashflow/cashflow.tsx","default")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13097:()=>{},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},42623:(e,a,t)=>{"use strict";t.d(a,{Kg:()=>d,eg:()=>s,f3:()=>l,gt:()=>o,sg:()=>n,ye:()=>r});let r=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e.value):"",n=e=>{if(null===e.value||void 0===e.value||""===e.value)return"";let a=Number(e.value);if(isNaN(a))return"";let t=!Number.isInteger(a);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2*!!t,maximumFractionDigits:2*!!t}).format(a)},o=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.value)+"/kg":"",l=e=>e.value?new Date(e.value).toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"}):"",s=e=>{if(null===e.value||void 0===e.value||""===e.value)return"";let a=Number(e.value);if(isNaN(a))return"";let t=Number(a.toFixed(1));return Number.isInteger(t)?t.toString():t.toFixed(1)},d=e=>{if(!e.value)return"";let a=new Date(e.value),t=a.getFullYear(),r=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0");return`${t}/${r}/${n}`}},45786:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o});var r=t(10674),n=t(9367);function o(){return(0,r.jsx)(n.default,{})}},52710:(e,a,t)=>{"use strict";t.r(a),t.d(a,{"00090ec48fa5ea02289c67c715d8c9cbd15c4a86ce":()=>u,"00bb8469db643348058ac169c7568ad7a1fa54777f":()=>w,"00ddd1a3d7673f2c9c7277960c374990cb9c1e4c66":()=>i,"401828482b3204d51c0b6e12ee93f722e64e52f545":()=>p,"4078af0bb54a2fe1c4ef4ab6d8dfb66197852dcdee":()=>f,"4095a485407f35c50292db3a7fce8349651d8e9ab8":()=>c,"409c155c283369de2a18ddc66a12afc64dc986c4a4":()=>h,"40a3418883f39a362dafb7f2a0298ff5cf69081de3":()=>m,"40afcded9d2a930136d5404f2761948d624e67bfa5":()=>x,"601aa1b718d6ec68845f9e2ca021e92f7256bde5f6":()=>y,"60d0a955336dfac5bf517169f4ab273a5f07855018":()=>b,"60fbaabfaea3a1c899af0239ec082e15269b3fc84f":()=>g});var r=t(17464);t(55414);var n=t(13913),o=t(8613),l=t(18591),s=t(98149),d=t(26763);async function i(){return await n.db.select().from(o.cashflows).orderBy((0,l.Y)(o.cashflows.date),(0,l.Y)(o.cashflows.priority))}async function c(e){return(await n.db.select().from(o.cashflows).where((0,s.eq)(o.cashflows.id,e)))[0]}async function u(){return await n.db.select().from(o.companies).orderBy((0,l.Y)(o.companies.name))}async function f(e){let a=await n.db.select().from(o.cashflows).where((0,s.Uo)((0,s.eq)(o.cashflows.date,e.date),(0,s.eq)(o.cashflows.type,e.type),(0,s.eq)(o.cashflows.companyId,e.companyId))),t=null;return a.length+1}async function p(e){let a=await f(e);return await n.db.insert(o.cashflows).values({...e,id:(0,d.Ak)(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),priority:a})}async function m(e){let a=await n.db.delete(o.cashflows).where((0,s.RV)(o.cashflows.id,e));return await w(),a}async function h(e){for(let a of e)await n.db.update(o.cashflows).set({priority:a.priority}).where((0,s.eq)(o.cashflows.id,a.id))}async function b(e,a){return await n.db.update(o.companies).set({companyBalance:e}).where((0,s.eq)(o.companies.id,a))}async function x(e){let a=await n.db.select().from(o.cashflows).where((0,s.Uo)((0,s.eq)(o.cashflows.date,e.date),(0,s.eq)(o.cashflows.type,e.type),(0,s.eq)(o.cashflows.companyId,e.companyId))).orderBy((0,l.Y)(o.cashflows.priority));for(let e=0;e<a.length;e++)await n.db.update(o.cashflows).set({priority:e+1}).where((0,s.eq)(o.cashflows.id,a[e].id))}async function w(){let e=await n.db.select().from(o.cashflows),a=new Map;for(let t of e){let e=`${t.companyId}_${t.type}_${t.date}`;a.has(e)||a.set(e,[]),a.get(e).push(t)}for(let e of a.values()){e.sort((e,a)=>(e.priority??0)-(a.priority??0));for(let a=0;a<e.length;a++)await n.db.update(o.cashflows).set({priority:a+1}).where((0,s.eq)(o.cashflows.id,e[a].id))}}async function y(e,a){let t=await c(a),r=t?.type!==e.type,l=t?.date!==e.date,d=t?.priority;return(r||l)&&(d=await f(e)),await n.db.update(o.cashflows).set({...e,priority:d,updatedAt:new Date().toISOString()}).where((0,s.eq)(o.cashflows.id,a)),t&&(r||l)&&(await x(t),await x(e)),await n.db.select().from(o.cashflows).where((0,s.eq)(o.cashflows.id,a)).then(e=>e[0])}async function g(e,a){return await n.db.update(o.cashflows).set({isApproved:a,updatedAt:new Date().toISOString()}).where((0,s.eq)(o.cashflows.id,e))}(0,t(1634).D)([i,c,u,f,p,m,h,b,x,w,y,g]),(0,r.A)(i,"00ddd1a3d7673f2c9c7277960c374990cb9c1e4c66",null),(0,r.A)(c,"4095a485407f35c50292db3a7fce8349651d8e9ab8",null),(0,r.A)(u,"00090ec48fa5ea02289c67c715d8c9cbd15c4a86ce",null),(0,r.A)(f,"4078af0bb54a2fe1c4ef4ab6d8dfb66197852dcdee",null),(0,r.A)(p,"401828482b3204d51c0b6e12ee93f722e64e52f545",null),(0,r.A)(m,"40a3418883f39a362dafb7f2a0298ff5cf69081de3",null),(0,r.A)(h,"409c155c283369de2a18ddc66a12afc64dc986c4a4",null),(0,r.A)(b,"60d0a955336dfac5bf517169f4ab273a5f07855018",null),(0,r.A)(x,"40afcded9d2a930136d5404f2761948d624e67bfa5",null),(0,r.A)(w,"00bb8469db643348058ac169c7568ad7a1fa54777f",null),(0,r.A)(y,"601aa1b718d6ec68845f9e2ca021e92f7256bde5f6",null),(0,r.A)(g,"60fbaabfaea3a1c899af0239ec082e15269b3fc84f",null)},53686:(e,a,t)=>{Promise.resolve().then(t.bind(t,9367))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},71020:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var r=t(11432),n=t(25867);let o=(e="primary",a)=>{let t={fontWeight:600,border:"1px solid",boxShadow:"none",whiteSpace:"nowrap","&:disabled":{backgroundColor:"#9CA3AF",color:"#FFFFFF"}};switch(e){case"primary":return{...t,backgroundColor:"#22C55E",color:"#FFFFFF","&:hover":{backgroundColor:"#16A34A"}};case"inherit":return{whiteSpace:"nowrap"};case"secondary":return{...t,backgroundColor:a?"#f3f4f6":"#64748b",color:a?"#374151":"#FFFFFF",border:a?"1px solid #cbd5e1":"none","&:hover":{backgroundColor:a?"#e5e7eb":"#475569"}};case"danger":return{...t,backgroundColor:"#EF4444",color:"#FFFFFF","&:hover":{backgroundColor:"#DC2626"}};case"info":return{...t,backgroundColor:"#3B82F6",color:"#FFFFFF","&:hover":{backgroundColor:"#2563EB"}};case"special":return{...t,backgroundColor:"#6366F1",color:"#FFFFFF","&:hover":{backgroundColor:"#4F46E5"}};case"outline":return{...t,backgroundColor:"transparent",borderColor:"primary",color:"#22C55E","&:hover":{backgroundColor:"#F9FAFB",borderColor:"primary"},"&:disabled":{backgroundColor:"transparent",borderColor:"#9CA3AF",color:"#9CA3AF"}};case"outline-danger":return{...t,backgroundColor:"transparent",borderColor:"#EF4444",color:"#EF4444","&:hover":{backgroundColor:"#FEF2F2",borderColor:"#DC2626",color:"#DC2626"},"&:disabled":{backgroundColor:"transparent",borderColor:"#9CA3AF",color:"#9CA3AF"}};default:return t}};function l({variant:e="primary",children:a,minWidth:t,sx:l,editMode:s=!1,...d}){let i=o(e,s),c=e.includes("outline");return(0,r.jsx)(n.A,{variant:"inherit"===e?"contained":c?"outlined":"contained",color:"inherit"===e?"inherit":"primary",sx:{...i,minWidth:t,...l},...d,children:a})}},71227:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>f,tree:()=>i});var r=t(65282),n=t(20277),o=t(47757),l=t.n(o),s=t(96002),d={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>s[e]);t.d(a,d);let i={children:["",{children:["cashflow",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,45786)),"/Users/kang-yean-woo/gompyo/src/app/cashflow/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,98445)),"/Users/kang-yean-woo/gompyo/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,24327)),"/Users/kang-yean-woo/gompyo/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,68366,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,75895,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,34421))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/Users/kang-yean-woo/gompyo/src/app/cashflow/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/cashflow/page",pathname:"/cashflow",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:i}})},77598:e=>{"use strict";e.exports=require("node:crypto")},78175:(e,a,t)=>{"use strict";t.d(a,{default:()=>ea});var r=t(11432),n=t(82423),o=t(9037),l=t(11417);t(13097);var s=t(32246),d=t(90714);let i=(0,d.eU)([]),c=(0,d.eU)(""),u=(0,d.eU)(e=>{let a=e(i),t=e(c);return a.filter(e=>e.companyId===t)}),f=(0,d.eU)(0),p=(0,d.eU)([]),m=(0,d.eU)([]),h=(0,d.eU)([]),b=(0,d.eU)(e=>{let a=e(c),t=e(p).find(e=>e.id===a);return t?.companyBalance??0}),x=(0,d.eU)(null,(e,a,t)=>{let r=e(c);a(p,e=>e.map(e=>e.id===r?{...e,companyBalance:t}:e))}),w=(0,d.eU)(!1);var y=t(84245),g=t(63016);let v=(0,g.createServerReference)("60fbaabfaea3a1c899af0239ec082e15269b3fc84f",g.callServer,void 0,g.findSourceMapURL,"updateCashflowApproval"),A=(0,g.createServerReference)("00ddd1a3d7673f2c9c7277960c374990cb9c1e4c66",g.callServer,void 0,g.findSourceMapURL,"getCashflowList"),C=(0,g.createServerReference)("409c155c283369de2a18ddc66a12afc64dc986c4a4",g.callServer,void 0,g.findSourceMapURL,"updateCashflowPriorities");var j=t(42623);function F(e,a){let t=a;return e.map(e=>(t+=e.amount,{...e,company:e.counterparty,total:t}))}function S(){let e=(0,s.md)(u);(0,s.md)(f);let a=(0,s.Xr)(i),t=(0,s.Xr)(m),n=(0,s.Xr)(h),d=(0,s.md)(b),c=(0,s.md)(w);(0,l.useRef)(null);let[p,x]=(0,l.useState)(!1),g=async(e,t)=>{await v(e,t),a([...await A()])},S=async t=>{let r=t.node.data.type,n=t.node.data.date,o=[];t.api.forEachNodeAfterFilterAndSort(e=>{let a=e.data;a.type===r&&a.date===n&&o.push(a)});let l=o.map((e,a)=>({...e,priority:o.length>1?a+1:null}));a([...e.filter(e=>e.date!==n||e.type!==r),...l].sort((e,a)=>"balance-row"===e.id?-1:"balance-row"===a.id?1:e.date.localeCompare(a.date))),await C(l)},k=async t=>{let r=[];t.api.forEachNodeAfterFilterAndSort(e=>{r.push(e.data)});let n={};r.forEach(e=>{let a=`${e.date}-${e.type}`;n[a]||(n[a]=[]),n[a].push(e)});let o=[];Object.values(n).forEach(e=>{let a=e.map((a,t)=>({...a,priority:e.length>1?t+1:null}));o.push(...a)}),a(e.filter(e=>!o.some(a=>a.id===e.id)).concat(o).sort((e,a)=>"balance-row"===e.id?-1:"balance-row"===a.id?1:e.date.localeCompare(a.date))),await C(o)},N=[{headerName:"",field:"dragHandle",width:70,minWidth:70,pinned:"left",lockPinned:!0,suppressMovable:!0,filter:!1,sortable:!1,rowDrag:e=>"balance-row"!==e.data.id,cellRenderer:()=>"",hide:!c,suppressHeaderMenuButton:!0},{headerName:"",checkboxSelection:e=>"balance-row"!==e.data.id,field:"checkbox",minWidth:50,flex:1,headerCheckboxSelection:!0,filter:!1,pinned:"left",lockPinned:!0,width:70,hide:c,suppressHeaderMenuButton:!0},{headerName:"날짜",field:"date",minWidth:150,flex:1,filter:!1,sortable:!1,valueFormatter:j.f3,suppressHeaderMenuButton:!0},{headerName:"업체",field:"company",minWidth:180,flex:2,filter:!1,sortable:!1,suppressHeaderMenuButton:!0},{headerName:"금액",field:"amount",minWidth:100,flex:.8,filter:!1,sortable:!1,valueFormatter:j.eg,suppressHeaderMenuButton:!0},{headerName:"합계",field:"total",minWidth:100,flex:.8,filter:!1,sortable:!1,valueFormatter:j.eg,suppressHeaderMenuButton:!0},{headerName:"확인",field:"isApproved",minWidth:80,flex:.5,filter:!1,sortable:!1,cellRenderer:e=>{let a=e.data;return"balance-row"===a.id||"expense"!==a.type?"":(0,r.jsx)("div",{className:"checkbox-item center-checkbox",children:(0,r.jsx)("input",{type:"checkbox",className:"checkbox-input",checked:a.isApproved||!1,onChange:e=>g(a.id,e.target.checked)})})},onCellClicked:e=>{let a=e.data;"balance-row"!==a.id&&"expense"===a.type&&g(a.id,!a.isApproved)},suppressHeaderMenuButton:!0},{headerName:"우선순위",field:"priority",minWidth:100,flex:.6,filter:!1,sortable:!1,cellRenderer:e=>{let{date:a,type:t}=e.data,r=[];return e.api.forEachNode(e=>{e.data&&"balance-row"!==e.data.id&&r.push(e.data)}),r.filter(e=>e.date===a&&e.type===t).length>1?e.value:""},suppressHeaderMenuButton:!0}],q=(0,l.useMemo)(()=>F(e.filter(e=>"expense"===e.type),0),[e]),R={id:"balance-row",date:"",companyId:"balance-row",amount:d,priority:null,type:"income",counterparty:"잔액",createdAt:"",updatedAt:"",isApproved:null},I=(0,l.useMemo)(()=>F([R,...e].filter(e=>"income"===e.type),0),[e,d]);return(0,r.jsx)("div",{className:"h-[90vh] md:h-[75vh] flex flex-col overflow-hidden ",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row w-full flex-1 gap-x-6 h-full",children:[(0,r.jsxs)("div",{className:"w-full h-full flex flex-col overflow-hidden",children:[(0,r.jsx)("div",{className:"flex flex-row justify-between h-[44px]",children:(0,r.jsx)(y.A,{className:"p-2",variant:"h6",children:"지출"})}),(0,r.jsx)("div",{style:{height:"100%",width:"100%"},children:(0,r.jsx)(o.A,{columnDefs:N,data:q,onSelectionChanged:e=>{t(e.api.getSelectedRows().filter(e=>"balance-row"!==e.id))},onRowDragEnd:S,onDragStopped:k,pagination:!1,loading:p})})]}),(0,r.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex flex-row justify-between h-[44px]",children:[(0,r.jsx)(y.A,{className:"p-2",variant:"h6",children:"수금"}),(0,r.jsx)("div",{className:"flex flex-row justify-between",children:(0,r.jsx)(y.A,{className:"text-right font-extralight text-gray-500 pb-2 ",sx:{fontSize:"12px",verticalAlign:"bottom",display:"flex",alignItems:"flex-end"},children:"* 금액 단위: 100만원"})})]}),(0,r.jsx)("div",{style:{height:"100%",width:"100%"},children:(0,r.jsx)(o.A,{columnDefs:N,data:I,onSelectionChanged:e=>{n(e.api.getSelectedRows().filter(e=>"balance-row"!==e.id))},onRowDragEnd:S,onDragStopped:k,pagination:!1,loading:p})})]})]})})}g.callServer,g.findSourceMapURL;var k=t(82472),N=t(20245),q=t(2494),R=t(74247),I=t(14368),E=t(68634);let U=(0,g.createServerReference)("401828482b3204d51c0b6e12ee93f722e64e52f545",g.callServer,void 0,g.findSourceMapURL,"addCashflow"),M=E.z.string().superRefine((e,a)=>{let t=/^-?\d+(\.\d)?$/;if(isNaN(Number(e))){a.addIssue({code:E.z.ZodIssueCode.custom,message:"유효한 숫자여야 합니다."});return}if(/^-?\d+\.\d{2,}$/.test(e)){a.addIssue({code:E.z.ZodIssueCode.custom,message:"숫자는 소수점 한 자리까지만 입력 가능합니다."});return}if(/^[-+]?\d*(\.\d+)?([eE].+)?$/.test(e)&&!t.test(e)||!t.test(e)){a.addIssue({code:E.z.ZodIssueCode.custom,message:"유효한 숫자여야 합니다."});return}}).transform(e=>parseFloat(e)),z=E.z.string().superRefine((e,a)=>{let t=!isNaN(Number(e)),r=/^-?\d+(\.\d)?$/;if(!t){a.addIssue({code:E.z.ZodIssueCode.custom,message:"유효한 숫자여야 합니다."});return}if(0>parseFloat(e)){a.addIssue({code:E.z.ZodIssueCode.custom,message:"0 이상의 숫자만 입력 가능합니다."});return}if(/^-?\d+\.\d{2,}$/.test(e)){a.addIssue({code:E.z.ZodIssueCode.custom,message:"숫자는 소수점 한 자리까지만 입력 가능합니다."});return}if(/^[-+]?\d*(\.\d+)?([eE].+)?$/.test(e)&&!r.test(e)||!r.test(e)){a.addIssue({code:E.z.ZodIssueCode.custom,message:"유효한 숫자여야 합니다."});return}}).transform(e=>parseFloat(e)),B=E.z.object({date:E.z.string().min(1,"날짜를 입력해주세요."),counterparty:E.z.string().min(1,"업체를 입력해주세요."),amount:z,type:E.z.string()}),D=[{name:"type",label:"타입",type:"select",required:!0,options:[{label:"수금",value:"income"},{label:"지출",value:"expense"}]},{name:"date",label:"날짜",type:"date",required:!0},{name:"counterparty",label:"업체",type:"text",required:!0},{name:"amount",label:"금액",type:"text",required:!0,endAdornment:"백만원"}];function W({onClose:e,submitLabel:a="저장"}){let t=(0,s.Xr)(f),[n,o]=(0,l.useState)({}),[d]=(0,s.fp)(c),i=async a=>{try{await U({...a,amount:Number(a.amount),companyId:d,isApproved:!1}),t(e=>e+1),o({}),e?.()}catch(e){e instanceof Error?o({accountNumber:e.message}):o({accountNumber:"오류가 발생했습니다."})}};return(0,r.jsx)(I.A,{fields:D,onSubmit:i,submitLabel:a,zodSchema:B,fieldErrors:n})}let P=(0,g.createServerReference)("40a3418883f39a362dafb7f2a0298ff5cf69081de3",g.callServer,void 0,g.findSourceMapURL,"deleteCashflows"),_=(0,g.createServerReference)("60d0a955336dfac5bf517169f4ab273a5f07855018",g.callServer,void 0,g.findSourceMapURL,"updateCompanyBalance"),$=E.z.object({companyBalance:M}),L=[{name:"companyBalance",label:"잔액",type:"text",required:!0,defaultValue:"0",endAdornment:"백만원"}];function H({onClose:e,submitLabel:a="설정"}){let t=(0,s.Xr)(f),[n,o]=(0,l.useState)({}),[d]=(0,s.fp)(c),[i]=(0,s.fp)(b),u=(0,s.Xr)(x),p=async a=>{try{await _(Number(a.companyBalance),d),u(Number(a.companyBalance)),t(e=>e+1),o({}),e?.()}catch(e){e instanceof Error?o({accountNumber:e.message}):o({accountNumber:"오류가 발생했습니다."})}};return(0,r.jsx)(I.A,{fields:L,onSubmit:p,submitLabel:a,zodSchema:$,fieldErrors:n,initialValues:{companyBalance:i.toString()}})}let X=(0,g.createServerReference)("601aa1b718d6ec68845f9e2ca021e92f7256bde5f6",g.callServer,void 0,g.findSourceMapURL,"updateCashflow"),K=E.z.object({date:E.z.string().min(1,"날짜를 입력해주세요."),counterparty:E.z.string().min(1,"업체를 입력해주세요."),amount:z,type:E.z.string()}),Z=[{name:"type",label:"타입",type:"select",required:!0,options:[{label:"수금",value:"income"},{label:"지출",value:"expense"}]},{name:"date",label:"날짜",type:"date",required:!0},{name:"counterparty",label:"업체",type:"text",required:!0},{name:"amount",label:"금액",type:"text",required:!0,endAdornment:"백만원"}];function G({onClose:e,submitLabel:a="수정"}){let t=(0,s.Xr)(f),[n,o]=(0,l.useState)({}),[d]=(0,s.fp)(c),i=(0,s.md)(h),u=(0,s.md)(m),p=1===i.length?i[0]:1===u.length?u[0]:void 0,b=async a=>{if(!p){o({accountNumber:"수정할 내역이 선택되지 않았습니다."});return}try{await X({...a,amount:Number(a.amount),companyId:d,isApproved:p.isApproved},p.id),t(e=>e+1),o({}),e?.()}catch(e){e instanceof Error?o({accountNumber:e.message}):o({accountNumber:"오류가 발생했습니다."})}};return p?(0,r.jsx)(I.A,{fields:Z,onSubmit:b,submitLabel:a,zodSchema:K,fieldErrors:n,initialValues:{type:p.type,date:p.date,counterparty:p.counterparty,amount:String(p.amount)}}):(0,r.jsx)("div",{children:"수정할 내역을 선택해주세요."})}var O=t(71020);function T({open:e,onClose:a}){return(0,r.jsxs)(k.A,{open:e,onClose:a,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(N.A,{children:"목록 추가"}),(0,r.jsx)(q.A,{children:(0,r.jsx)(W,{onClose:a})})]})}function Y({open:e,onClose:a}){let t=(0,s.md)(m),n=(0,s.md)(h),o=(0,s.Xr)(f);async function l(){await P(t.map(e=>e.id)),await P(n.map(e=>e.id)),o(e=>e+1),a()}return(0,r.jsxs)(k.A,{open:e,onClose:a,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(N.A,{children:"내역 삭제 확인"}),(0,r.jsx)(q.A,{sx:{py:3},children:"정말로 선택한 내역을 삭제하시겠습니까?"}),(0,r.jsxs)(R.A,{sx:{px:3,pb:2,pt:0,justifyContent:"flex-end"},children:[(0,r.jsx)(O.A,{variant:"outline",onClick:a,children:"취소"}),(0,r.jsx)(O.A,{variant:"outline-danger",onClick:l,children:"삭제"})]})]})}function V({open:e,onClose:a}){return(0,r.jsxs)(k.A,{open:e,onClose:a,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(N.A,{children:"잔액 설정"}),(0,r.jsx)(q.A,{children:(0,r.jsx)(H,{onClose:a})})]})}function J({open:e,onClose:a}){return(0,r.jsxs)(k.A,{open:e,onClose:a,maxWidth:"xs",fullWidth:!0,children:[(0,r.jsx)(N.A,{children:"내역 수정"}),(0,r.jsx)(q.A,{children:(0,r.jsx)(G,{onClose:a})})]})}var Q=t(68792),ee=t(1816);function ea(){let[e,a]=(0,l.useState)(!1),[t,o]=(0,l.useState)(!1),[d,i]=(0,l.useState)(!1),[u,f]=(0,l.useState)(!1),[b,x]=(0,s.fp)(p),[y,g]=(0,s.fp)(c),v=(0,s.md)(h),A=(0,s.md)(m),[C,j]=(0,s.fp)(w);return(0,r.jsxs)("div",{className:"w-full min-h-screen bg-gray-100",children:[(0,r.jsxs)("div",{className:"p-4 sm:p-8",children:[(0,r.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"수금 지출 관리"}),(0,r.jsxs)(n.A,{direction:{xs:"column",lg:"row"},spacing:2,children:[(0,r.jsx)("div",{className:"flex flex-row justify-between items-end flex-shrink-0",style:{minHeight:24},children:(0,r.jsx)(Q.A,{value:y,onChange:(e,a)=>g(a),scrollButtons:"auto",children:b.map(e=>(0,r.jsx)(ee.A,{label:e.name,value:e.id},e.id))})}),(0,r.jsx)("div",{className:"overflow-auto w-full h-fit",children:(0,r.jsxs)(n.A,{direction:"row",spacing:2,sx:{width:"100%",justifyContent:{xs:"flex-start",lg:"flex-end"},pb:1,overflowX:"auto",flexWrap:"nowrap",minWidth:"max-content","& > *":{flexShrink:0}},children:[(0,r.jsx)(O.A,{variant:"info",onClick:e=>{e.currentTarget.blur(),a(!0)},children:"목록 추가"}),(0,r.jsx)(O.A,{variant:"primary",onClick:e=>{e.currentTarget.blur(),o(!0)},children:"잔액 설정"}),(0,r.jsx)(O.A,{variant:"primary",disabled:(1!==v.length||0!==A.length)&&(0!==v.length||1!==A.length),onClick:e=>{e.currentTarget.blur(),f(!0)},children:"선택 목록 수정"}),(0,r.jsx)(O.A,{variant:"danger",disabled:0===v.length&&0===A.length,onClick:e=>{e.currentTarget.blur(),i(!0)},children:"선택 목록 삭제"}),(0,r.jsx)(O.A,{variant:"secondary",editMode:C,onClick:e=>{e.currentTarget.blur(),j(e=>!e)},children:C?"편집 종료":"편집 모드"})]})})]}),(0,r.jsx)(S,{})]}),(0,r.jsx)(T,{open:e,onClose:()=>a(!1)}),(0,r.jsx)(V,{open:t,onClose:()=>o(!1)}),(0,r.jsx)(Y,{open:d,onClose:()=>i(!1)}),(0,r.jsx)(J,{open:u,onClose:()=>f(!1)})]})}},79551:e=>{"use strict";e.exports=require("url")},87550:e=>{"use strict";e.exports=require("better-sqlite3")},93598:(e,a,t)=>{Promise.resolve().then(t.bind(t,78175))}};var a=require("../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),r=a.X(0,[883,32,91,36,162,293,246,289,547,913,37,368],()=>t(71227));module.exports=r})();
