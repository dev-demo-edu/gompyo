"use strict";exports.id=192,exports.ids=[192],exports.modules={8613:(e,t,a)=>{a.r(t),a.d(t,{accountNumbers:()=>F,businessNumbers:()=>C,cargos:()=>D,cargosRelations:()=>L,contracts:()=>Q,contractsRelations:()=>E,costDetails:()=>q,costDetailsRelations:()=>k,costs:()=>b,costsRelations:()=>O,documents:()=>I,documentsRelations:()=>z,historyLogs:()=>R,historyLogsRelations:()=>M,importers:()=>_,importersRelations:()=>K,items:()=>v,itemsRelations:()=>S,payments:()=>N,paymentsRelations:()=>P,paymentsTt:()=>g,paymentsTtRelations:()=>T,paymentsUsance:()=>x,paymentsUsanceRelations:()=>j,shipments:()=>A,shipmentsRelations:()=>U,users:()=>w});var r=a(87985),i=a(71198),n=a(70228),s=a(10215),d=a(75263),l=a(49778),o=a(28370);let m=e=>e.value?new Date(e.value).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"",c=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e.value):"",u=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.value)+"/kg":"",p=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:m,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"importer",headerName:"수입회사",width:120},{field:"estimatedTimeArrival",headerName:"ETA",valueFormatter:m,width:150},{field:"arrivalPort",headerName:"도착항",width:120},{field:"itemName",headerName:"품목",width:120},{field:"contractTon",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"unitPrice",headerName:"단가",valueFormatter:c,width:130},{field:"totalPrice",headerName:"단가 * 무게",valueFormatter:c,width:150},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"warehouseEntryDate",headerName:"입고일",valueFormatter:m,width:150},{field:"importCostPerKg",headerName:"수입가/kg",valueFormatter:u,width:130},{field:"supplyCostPerKg",headerName:"수급가/kg",valueFormatter:u,width:130},{field:"totalCost",headerName:"총 비용",valueFormatter:c,width:150},{field:"totalCostPerKg",headerName:"총 비용/kg",valueFormatter:u,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:c,width:130},{field:"margin",headerName:"마진",valueFormatter:c,width:100},{field:"totalProfit",headerName:"총 이익",valueFormatter:c,width:150}],h=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:m,width:150},{field:"importer",headerName:"수입회사",width:120},{field:"productName",headerName:"제품명",width:150},{field:"itemName",headerName:"품목",width:120},{field:"weight",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"containerCount",headerName:"컨테이너 개수",width:120},{field:"packingUnit",headerName:"포장 단위",width:100},{field:"unitPrice",headerName:"단가",valueFormatter:c,width:130},{field:"totalPrice",headerName:"단가 * 무게",valueFormatter:c,width:150},{field:"supplyPrice",headerName:"수급가",valueFormatter:c,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:c,width:130},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"hsCode",headerName:"HS CODE",width:120},{field:"blNumber",headerName:"BL no.",width:120},{field:"departurePort",headerName:"port(출발항)",width:120},{field:"etd",headerName:"ETD",valueFormatter:m,width:150},{field:"arrivalPort",headerName:"port(도착항)",width:120},{field:"eta",headerName:"ETA",valueFormatter:m,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"customsDate",headerName:"통관일자",valueFormatter:m,width:150}],y=p.map(e=>e.field),f=h.map(e=>e.field),_=(0,r.D)("importers",{id:(0,i.Qq)("id").primaryKey(),importerName:(0,i.Qq)("importer_name").notNull(),calculationType:(0,i.Qq)("calculation_type").notNull()}),N=(0,r.D)("payments",{id:(0,i.Qq)("id").primaryKey(),paymentDueDate:(0,i.Qq)("payment_due_date"),paymentMethod:(0,i.Qq)("payment_method").notNull(),contractId:(0,i.Qq)("contract_id").notNull()},e=>[(0,n.z6)("payment_type_check",(0,l.ll)`${e.paymentMethod} IN ('T/T', 'CAD', 'L/C', 'Usance')`)]),g=(0,r.D)("payments_tt",{paymentId:(0,i.Qq)("payment_id").primaryKey().references(()=>N.id,{onDelete:"cascade"}),advancePaymentDate:(0,i.Qq)("advance_payment_date"),advancePaymentRatio:(0,s.x)("advance_payment_ratio"),advancePaymentAmount:(0,s.x)("advance_payment_amount"),remainingPaymentDate:(0,i.Qq)("remaining_payment_date"),remainingPaymentRatio:(0,s.x)("remaining_payment_ratio"),remainingPaymentAmount:(0,s.x)("remaining_payment_amount"),counterpartBank:(0,i.Qq)("counterpart_bank")}),x=(0,r.D)("payments_usance",{paymentId:(0,i.Qq)("payment_id").primaryKey().references(()=>N.id,{onDelete:"cascade"}),paymentTerm:(0,i.Qq)("payment_term"),contractExchangeRate:(0,i.Qq)("contact_exchange_rate")}),q=(0,r.D)("cost_details",{id:(0,i.Qq)("id").primaryKey(),unitPrice:(0,s.x)("unit_price"),exchangeRate:(0,s.x)("exchange_rate"),customsTaxRate:(0,s.x)("customs_tax_rate"),customTaxAmount:(0,s.x)("custom_tax_amount"),customsFee:(0,s.x)("customs_fee"),inspectionFee:(0,s.x)("inspection_fee"),doCharge:(0,s.x)("do_charge"),otherCosts:(0,s.x)("other_costs"),transferFee:(0,s.x)("transfer_fee"),costId:(0,i.Qq)("cost_id").notNull()}),Q=(0,r.D)("contracts",{id:(0,i.Qq)("id").primaryKey(),contractNumber:(0,i.Qq)("contract_number"),contractDate:(0,i.Qq)("contract_date"),exporter:(0,i.Qq)("exporter"),importerId:(0,i.Qq)("importer_id").references(()=>_.id),incoterms:(0,i.Qq)("incoterms")}),v=(0,r.D)("items",{id:(0,i.Qq)("id").primaryKey(),itemName:(0,i.Qq)("item_name"),itemVariety:(0,i.Qq)("item_variety"),originCountry:(0,i.Qq)("origin_country"),hsCode:(0,i.Qq)("hs_code"),packingUnit:(0,i.Qq)("packing_unit")}),b=(0,r.D)("costs",{id:(0,i.Qq)("id").primaryKey(),supplyPrice:(0,s.x)("supply_price"),shippingCost:(0,s.x)("shipping_cost"),laborCost:(0,s.x)("labor_cost"),transportStorageFee:(0,s.x)("transport_storage_fee"),loadingUnloadingFee:(0,s.x)("loading_unloading_fee"),usanceInterest:(0,s.x)("usance_interest"),cargoId:(0,i.Qq)("cargo_id").notNull()}),w=(0,r.D)("users",{id:(0,i.Qq)("id").primaryKey(),email:(0,i.Qq)("email"),password:(0,i.Qq)("password"),name:(0,i.Qq)("name"),planColumnOrder:(0,i.Qq)("plan_column_order").default(JSON.stringify(y)),shipmentColumnOrder:(0,i.Qq)("shipment_column_order").default(JSON.stringify(f))}),A=(0,r.D)("shipments",{id:(0,i.Qq)("id").primaryKey(),contractId:(0,i.Qq)("contract_id").notNull(),estimatedTimeArrival:(0,i.Qq)("estimated_time_arrival"),estimatedTimeDeparture:(0,i.Qq)("estimated_time_departure"),arrivalPort:(0,i.Qq)("arrival_port"),shippingCompany:(0,i.Qq)("shipping_company"),departurePort:(0,i.Qq)("departure_port"),blNumber:(0,i.Qq)("bl_number"),palletOrderDate:(0,i.Qq)("pallet_order_date"),palletType:(0,i.Qq)("pallet_type")}),D=(0,r.D)("cargos",{id:(0,i.Qq)("id").primaryKey(),itemsId:(0,i.Qq)("items_id").notNull(),shipmentId:(0,i.Qq)("shipment_id").notNull(),containerCount:(0,d.nd)("container_count"),contractTon:(0,d.nd)("contract_ton"),customsClearanceDate:(0,i.Qq)("customs_clearance_date"),quarantineDate:(0,i.Qq)("quarantine_date"),warehouseEntryDate:(0,i.Qq)("warehouse_entry_date"),progressStatus:(0,i.Qq)("progress_status"),sellingPrice:(0,s.x)("selling_price"),sellingPriceWholesale:(0,s.x)("selling_price_wholesale"),sellingPriceRetail:(0,s.x)("selling_price_retail"),margin:(0,s.x)("margin"),totalProfit:(0,s.x)("total_profit"),purchaseFeeRate:(0,s.x)("purchase_fee_rate"),remark:(0,i.Qq)("remark")},e=>[(0,n.z6)("progress_status_check",(0,l.ll)`${e.progressStatus} IN ('REVIEW', 'CONTRACTING', 'BEFORE_LC', 'BEFORE_ARRIVAL', 'WAREHOUSE_MOVING', 'BEFORE_QUARANTINE', 'QUARANTINING', 'CUSTOMS_DECLARING', 'DONE_ARRIVAL', 'AFTER_CUSTOMS', 'SELLING')`)]),I=(0,r.D)("documents",{id:(0,i.Qq)("id").primaryKey(),documentName:(0,i.Qq)("document_name").notNull(),documentType:(0,i.Qq)("document_type").notNull(),s3Url:(0,i.Qq)("s3_url").notNull(),uploadDate:(0,i.Qq)("upload_date").notNull(),relatedId:(0,i.Qq)("related_id").notNull(),documentCategory:(0,i.Qq)("document_category").notNull()}),R=(0,r.D)("history_logs",{id:(0,i.Qq)("id").primaryKey(),targetType:(0,i.Qq)("target_type"),targetId:(0,i.Qq)("target_id"),type:(0,i.Qq)("type"),user:(0,i.Qq)("user"),changes:(0,i.Qq)("changes"),status:(0,i.Qq)("status"),createdAt:(0,i.Qq)("created_at")}),F=(0,r.D)("account_numbers",{id:(0,i.Qq)("id").primaryKey(),accountNumber:(0,i.Qq)("account_number").notNull(),bankName:(0,i.Qq)("bank_name").notNull(),owner:(0,i.Qq)("owner").notNull(),createdAt:(0,i.Qq)("created_at").notNull()}),C=(0,r.D)("business_numbers",{id:(0,i.Qq)("id").primaryKey(),businessNumber:(0,i.Qq)("business_number").notNull(),businessName:(0,i.Qq)("business_name").notNull(),businessRepresentative:(0,i.Qq)("business_representative").notNull(),createdAt:(0,i.Qq)("created_at").notNull()}),K=(0,o.K1)(_,({many:e})=>({contracts:e(Q)})),P=(0,o.K1)(N,({one:e})=>({contract:e(Q,{fields:[N.contractId],references:[Q.id]}),paymentsTt:e(g,{fields:[N.id],references:[g.paymentId]}),paymentsUsance:e(x,{fields:[N.id],references:[x.paymentId]})})),T=(0,o.K1)(g,({one:e})=>({payment:e(N,{fields:[g.paymentId],references:[N.id]})})),j=(0,o.K1)(x,({one:e})=>({payment:e(N,{fields:[x.paymentId],references:[N.id]})})),k=(0,o.K1)(q,({one:e})=>({cost:e(b,{fields:[q.costId],references:[b.id]})})),E=(0,o.K1)(Q,({many:e,one:t})=>({payments:e(N),shipments:e(A),documents:e(I),importer:t(_,{fields:[Q.importerId],references:[_.id]})})),S=(0,o.K1)(v,({many:e})=>({cargos:e(D)})),O=(0,o.K1)(b,({one:e,many:t})=>({cargo:e(D,{fields:[b.cargoId],references:[D.id]}),costDetails:t(q)})),U=(0,o.K1)(A,({one:e,many:t})=>({contract:e(Q,{fields:[A.contractId],references:[Q.id]}),cargos:t(D),documents:t(I)})),L=(0,o.K1)(D,({one:e,many:t})=>({item:e(v,{fields:[D.itemsId],references:[v.id]}),shipment:e(A,{fields:[D.shipmentId],references:[A.id]}),costs:t(b)})),z=(0,o.K1)(I,({one:e})=>({contract:e(Q,{fields:[I.relatedId],references:[Q.id],relationName:"contract_documents"}),shipment:e(A,{fields:[I.relatedId],references:[A.id],relationName:"shipment_documents"})})),M=(0,o.K1)(R,({})=>({}))},13913:(e,t,a)=>{a.d(t,{db:()=>m});var r=a(58622),i=a(87550),n=a.n(i),s=a(8613),d=a(33873);let l=a.n(d)().join(process.cwd(),"drizzle","database.sqlite"),o=new(n())(l),m=(0,r.f)(o,{schema:s})},14368:(e,t,a)=>{a.d(t,{A:()=>N});var r=a(11432),i=a(11417),n=a(36),s=a(52510),d=a(64655),l=a(47338),o=a(1836),m=a(84245),c=a(34294),u=a(4105),p=a(82423),h=a(25867),y=a(92711),f=a(66778);function _(e){return e.reduce((e,t)=>{let a="array"===t.type?t.defaultValue??[]:t.defaultValue??"";return{...e,[t.name]:a}},{})}function N({zodSchema:e,steps:t,fields:a,onSubmit:N,submitLabel:g="저장",zodSchemas:x,onCancel:q,fieldErrors:Q={}}){let v=!!t,[b,w]=(0,i.useState)(0),A=v?t[b].fields:a,[D,I]=(0,i.useState)(v?t.reduce((e,t)=>({...e,..._(t.fields)}),{}):_(a)),[R,F]=(0,i.useState)({}),C=(e,t)=>{I(a=>({...a,[e]:t}))},K=e=>{I(t=>({...t,[e.name]:[...Array.isArray(t[e.name])?t[e.name]:[],_(e.fields??[])]}))},P=(e,t)=>{I(a=>({...a,[e.name]:Array.isArray(a[e.name])?a[e.name].filter((e,a)=>a!==t):[]}))},T=(e,t,a,r)=>{I(i=>({...i,[e.name]:Array.isArray(i[e.name])?i[e.name].map((e,i)=>i===t?{...e,[a]:r}:e):[]}))},j=e=>{let t={};return e.errors.forEach(e=>{t[e.path[0]]=e.message}),t},k=(e,t,a,i,h)=>{let _=Q[e.name]||i;switch(e.type){case"text":case"number":case"date":return(0,r.jsx)(n.A,{label:e.label,name:e.name,type:"number"===e.type?"number":e.type,value:t,onChange:t=>a("number"===e.type?Number(t.target.value):t.target.value),fullWidth:!0,error:!!_,helperText:_||e.helperText,InputLabelProps:"date"===e.type?{shrink:!0}:void 0,sx:{mb:1}},e.name+(h??""));case"select":return(0,r.jsxs)(s.A,{fullWidth:!0,error:!!_,sx:{mb:1},children:[(0,r.jsx)(d.A,{children:e.label}),(0,r.jsx)(l.A,{value:t,label:e.label,onChange:e=>a(e.target.value),children:e.options?.map(e=>r.jsx(o.A,{value:e.value,children:e.label},e.value))}),_&&(0,r.jsx)(m.A,{color:"error",variant:"caption",children:_})]},e.name+(h??""));case"array":return(0,r.jsxs)(c.A,{sx:{mb:2},children:[(0,r.jsxs)(c.A,{display:"flex",alignItems:"center",mb:1,children:[(0,r.jsx)(m.A,{variant:"subtitle1",children:e.label}),(0,r.jsx)(u.A,{size:"small",onClick:()=>K(e),sx:{ml:1},children:(0,r.jsx)(y.A,{fontSize:"small"})})]}),(Array.isArray(t)?t:[]).map((t,a)=>(0,r.jsxs)(c.A,{sx:{border:"1px solid #eee",borderRadius:1,p:2,mb:1},children:[(0,r.jsxs)(c.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsxs)(m.A,{variant:"body2",children:[e.label," #",a+1]}),(0,r.jsx)(u.A,{size:"small",onClick:()=>P(e,a),children:(0,r.jsx)(f.A,{fontSize:"small"})})]}),(0,r.jsx)(p.A,{spacing:1,mt:1,children:e.fields?.map(r=>k(r,t[r.name],t=>T(e,a,r.name,t),R[`${e.name}.${a}.${r.name}`],a))})]},a))]},e.name);case"custom":return e.render?e.render({value:t,onChange:a,error:_}):null;default:return null}};return(0,r.jsxs)("form",{onSubmit:a=>{let r;if(a.preventDefault(),(r=v&&x?x[b].safeParse(D):e?e.safeParse(D):{success:!0,data:D})&&!r.success){F(j(r.error));return}F({}),v&&b<t.length-1?w(e=>e+1):N(D)},children:[v&&(0,r.jsx)(m.A,{variant:"h6",sx:{mb:2},children:t[b].label}),(0,r.jsx)(p.A,{spacing:2,sx:{mt:1},children:A.map(e=>k(e,D[e.name],t=>C(e.name,t),R[e.name]))}),(0,r.jsxs)(c.A,{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:2,mt:2,children:[v&&b>0&&(0,r.jsx)(h.A,{variant:"outlined",color:"primary",onClick:()=>w(e=>e-1),children:"이전"}),"function"==typeof q&&(0,r.jsx)(h.A,{variant:"outlined",color:"primary",onClick:q,children:"취소"}),(0,r.jsx)(h.A,{type:"submit",variant:"contained",color:"primary",sx:{fontWeight:600},children:v&&b<t.length-1?"다음":g})]})]})}},66778:(e,t,a)=>{var r=a(33333);t.A=void 0;var i=r(a(67329)),n=a(11432);t.A=(0,i.default)((0,n.jsx)("path",{d:"M19 13H5v-2h14z"}),"Remove")}};
