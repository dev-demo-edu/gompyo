"use strict";exports.id=255,exports.ids=[255],exports.modules={29732:(e,t,r)=>{r.d(t,{A:()=>h});var a=r(11432),l=r(11417),i=r(98194),d=r(34105);let n=(0,d.A)((0,a.jsx)("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"}),"FilterList"),s=(0,d.A)((0,a.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),o=(0,d.A)((0,a.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft"),u=(0,d.A)((0,a.jsx)("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt");r(71251);var c=r(53341);function m(e){return new Date(e).toISOString().slice(0,10)}function h({columnDefs:e,data:t=[],loading:r=!1,error:i=null,onDragStarted:d,onDragStopped:h,onResetColumnOrder:f,onSelectionChanged:g,searchDateField:w}){let[p,v]=(0,l.useState)(""),[y,b]=(0,l.useState)(""),[x,N]=(0,l.useState)(""),[C,S]=(0,l.useState)(!1),[j,F]=(0,l.useState)(!0),D=(0,l.useMemo)(()=>t.filter(t=>{let r=!p||e.some(e=>{let r=e.field;if(!r)return!1;let a=t[r];return a&&a.toString().toLowerCase().includes(p.toLowerCase())});if(w){let e=m(t[w]),a=y?m(y):null,l=x?m(x):null;if(a&&l)return r&&e>=a&&e<=l;if(a)return r&&e>=a;if(l)return r&&e<=l}return r}),[t,p,y,x,e,w]);return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row w-full h-[800px] bg-transparent rounded-xl overflow-hidden shadow-lg  gap-6",children:[(0,a.jsxs)("button",{onClick:()=>S(!C),className:"md:hidden flex items-center justify-center gap-2 mb-4 px-4 py-2 bg-white rounded-lg shadow-sm text-gray-700 hover:bg-gray-100 transition-colors",children:[(0,a.jsx)(n,{className:"w-5 h-5"}),(0,a.jsxs)("span",{children:["필터 ",C?"숨기기":"보기"]})]}),(0,a.jsxs)("div",{className:`relative transition-all duration-300 p-6 space-y-6
        ${C?"block":"hidden md:block"}
        ${j?"w-12 bg-transparent":"w-full md:w-80 bg-white rounded-xl shadow-sm"}
        md:shrink-0 overflow-hidden`,children:[(0,a.jsx)("button",{onClick:()=>F(e=>!e),className:"absolute right-2 top-2 w-8 h-8 bg-white text-gray-600 rounded-full shadow-md hover:bg-gray-300 transition z-10 hidden md:block",children:j?(0,a.jsx)(s,{}):(0,a.jsx)(o,{})}),!j&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"필터"}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"검색어"}),(0,a.jsx)("input",{type:"text",placeholder:"검색어를 입력하세요",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:p,onChange:e=>v(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"조회 기간"}),(0,a.jsx)("input",{type:"date",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 mb-3",value:y,onChange:e=>b(e.target.value)}),(0,a.jsx)("input",{type:"date",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:x,onChange:e=>N(e.target.value)})]}),f&&(0,a.jsxs)("button",{onClick:f,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,a.jsx)(u,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"컬럼 순서 초기화"})]})]})]})]}),(0,a.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm overflow-hidden min-h-[400px]",children:(0,a.jsx)(c.A,{columnDefs:e,data:D,loading:r,error:i,onDragStarted:d,onDragStopped:h,onSelectionChanged:g,pagination:!1})})]})}i.syG.registerModules([i.JKr])},36405:(e,t,r)=>{r.d(t,{wz:()=>g,Dm:()=>w,OA:()=>p,Lx:()=>h,y4:()=>f,Mo:()=>v,Fq:()=>y});var a=r(17464);r(55414);var l=r(19541),i=r(14567),d=r(15198),n=r(13913),s=r(8613),o=r(98149);class u{async findByEmail(e){let[t]=await n.db.select().from(s.users).where((0,o.eq)(s.users.email,e));return t}async findById(e){let[t]=await n.db.select().from(s.users).where((0,o.eq)(s.users.id,e));return t}async getPlanColumnOrder(e){let t=await this.findById(e);return t.planColumnOrder?JSON.parse(t.planColumnOrder):null}async getShipmentColumnOrder(e){let t=await this.findById(e);return t.shipmentColumnOrder?JSON.parse(t.shipmentColumnOrder):null}async updatePlanColumnOrder(e,t){let[r]=await n.db.update(s.users).set({planColumnOrder:t}).where((0,o.eq)(s.users.id,e)).returning();return r}async updateShipmentColumnOrder(e,t){let[r]=await n.db.update(s.users).set({shipmentColumnOrder:t}).where((0,o.eq)(s.users.id,e)).returning();return r}async create(e){let[t]=await n.db.insert(s.users).values(e).returning();return t}async delete(e){return await n.db.delete(s.users).where((0,o.eq)(s.users.id,e)),!0}}var c=r(1634);let m=new u;async function h(e){let t=e.get("email"),r=e.get("password");try{let e=await m.findByEmail(t);if(!e||e.password!==r)return{error:"이메일 또는 비밀번호가 올바르지 않습니다."};return(await (0,i.UL)()).set({name:"userId",value:e.id,httpOnly:!0,maxAge:604800,path:"/"}),{success:!0}}catch(e){return console.error("Login error:",e),{error:"로그인 중 오류가 발생했습니다."}}}async function f(){(await (0,i.UL)()).delete("userId"),(0,d.redirect)("/login")}async function g(){let e=await (0,i.UL)(),t=e.get("userId")?.value;return t?m.findById(t):null}async function w(){let e=await (0,i.UL)(),t=e.get("userId")?.value;return t?await m.getPlanColumnOrder(t):[]}async function p(){let e=await (0,i.UL)(),t=e.get("userId")?.value;return t?await m.getShipmentColumnOrder(t):[]}async function v(e){let t=await (0,i.UL)(),r=t.get("userId")?.value;if(!r)return{error:"로그인이 필요합니다."};try{return await m.updatePlanColumnOrder(r,JSON.stringify(e)),(0,l.revalidatePath)("/"),{success:!0}}catch(e){return console.error("컬럼 순서 저장 오류:",e),{error:"컬럼 순서를 저장하는 중 오류가 발생했습니다."}}}async function y(e){let t=await (0,i.UL)(),r=t.get("userId")?.value;if(!r)return{error:"로그인이 필요합니다."};try{return await m.updateShipmentColumnOrder(r,JSON.stringify(e)),(0,l.revalidatePath)("/"),{success:!0}}catch(e){return console.error("컬럼 순서 저장 오류:",e),{error:"컬럼 순서를 저장하는 중 오류가 발생했습니다."}}}(0,c.D)([h,f,g,w,p,v,y]),(0,a.A)(h,"40294d9ddae535209c8f247be642158225b731dc87",null),(0,a.A)(f,"00a6c45c034058946149745ff5517dfa2e2bbe6c64",null),(0,a.A)(g,"000820e00a76417c4e99c475037689b341dcaa9f0d",null),(0,a.A)(w,"003c459ed43f48fe87ac77ad2cfaf51d9fac48e58f",null),(0,a.A)(p,"00e9abdd9560caf593506db97dbb5e80757a575e87",null),(0,a.A)(v,"40d0a833e6ff9c075400346a2fe62c05f1ec6e1f5e",null),(0,a.A)(y,"4000b6cae1210ba95dc5737969e207f26863b669b7",null)},42623:(e,t,r)=>{r.d(t,{Kg:()=>s,eg:()=>n,f3:()=>d,gt:()=>i,sg:()=>l,ye:()=>a});let a=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e.value):"",l=e=>{if(null===e.value||void 0===e.value||""===e.value)return"";let t=Number(e.value);if(isNaN(t))return"";let r=!Number.isInteger(t);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2*!!r,maximumFractionDigits:2*!!r}).format(t)},i=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.value)+"/kg":"",d=e=>e.value?new Date(e.value).toLocaleDateString("ko-KR",{month:"long",day:"numeric",weekday:"short"}):"",n=e=>{if(null===e.value||void 0===e.value||""===e.value)return"";let t=Number(e.value);if(isNaN(t))return"";let r=Number(t.toFixed(1));return Number.isInteger(r)?r.toString():r.toFixed(1)},s=e=>{if(!e.value)return"";let t=new Date(e.value),r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0");return`${r}/${a}/${l}`}},53295:(e,t,r)=>{r.d(t,{A:()=>l});var a=r(11417);let l=function(e){let t=(0,a.useRef)([]);return{onDragStarted:e=>{t.current=e.api.getColumnState().map(e=>e.colId)},onDragStopped:r=>{let a=r.api.getColumnState().map(e=>e.colId).filter(e=>"detail"!==e);t.current.every((e,t)=>e===a[t])||e(r)}}}},53341:(e,t,r)=>{r.d(t,{A:()=>o});var a=r(11432),l=r(11417),i=r(26093),d=r(38762),n=r(98194),s=r(29871);function o({columnDefs:e,data:t,loading:r=!1,error:n=null,onDragStarted:o,onDragStopped:u,onSelectionChanged:c,pagination:m=!0,paginationPageSize:h=15,onRowDragEnd:f}){let g=(0,l.useRef)(null),w=(0,l.useMemo)(()=>({sortable:!0,resizable:!0,minWidth:100,filter:!0,lockPinned:!0}),[]),p=(0,l.useMemo)(()=>e.filter(e=>e.field).map(e=>({colId:e.field,pinned:e.pinned,flex:e.flex,width:e.width,lockPinned:e.lockPinned})),[e]),v=(0,l.useMemo)(()=>d.z0,[]),y=(0,l.useCallback)(e=>{"checkbox"===e.colDef.field&&e.node.setSelected(!e.node.isSelected())},[]),b=(0,l.useCallback)(e=>{g.current=e.api,g.current?.applyColumnState({state:p,applyOrder:!0})},[p]);return n?(0,a.jsx)("div",{className:"w-full h-[800px] bg-white flex items-center justify-center overflow-y-auto",children:(0,a.jsx)("p",{className:"text-red-500",children:n})}):(0,a.jsx)("div",{className:"ag-theme-material w-full h-full bg-slate-50 rounded-xl overflow-hidden shadow-lg",children:r?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce"}),(0,a.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,a.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})}):(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(i.W6,{theme:s.g,rowData:t,columnDefs:e,defaultColDef:w,pagination:m,paginationPageSize:h,rowSelection:"multiple",localeText:v,onDragStarted:o,onDragStopped:u,onGridReady:b,onSelectionChanged:c,rowDragManaged:!0,animateRows:!0,getRowId:e=>e.data.id,onRowDragEnd:f,suppressRowClickSelection:!0,onCellClicked:y})})})}n.syG.registerModules([n.JKr])},61839:(e,t,r)=>{r.d(t,{FX:()=>n,cX:()=>i,mg:()=>d,zG:()=>l});var a=r(42623);let l=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:a.Kg,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"importer",headerName:"수입회사",width:120},{field:"estimatedTimeArrival",headerName:"ETA",valueFormatter:a.Kg,width:150},{field:"arrivalPort",headerName:"도착항",width:120},{field:"itemName",headerName:"품목",width:120},{field:"contractTon",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"packingUnit",headerName:"포장 단위",width:130},{field:"unitPrice",headerName:"단가",valueFormatter:a.sg,width:130},{field:"totalPrice",headerName:"단가 * 무게",valueFormatter:a.ye,width:150},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"warehouseEntryDate",headerName:"입고일",valueFormatter:a.Kg,width:150},{field:"importCostPerKg",headerName:"수입가/kg",valueFormatter:a.gt,width:130},{field:"supplyCostPerKg",headerName:"수급가/kg",valueFormatter:a.gt,width:130},{field:"totalCost",headerName:"총 비용",valueFormatter:a.ye,width:150},{field:"totalCostPerKg",headerName:"총 비용/kg",valueFormatter:a.gt,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:a.ye,width:130},{field:"margin",headerName:"마진",valueFormatter:a.ye,width:100},{field:"totalProfit",headerName:"총 이익",valueFormatter:a.ye,width:150}],i=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:a.Kg,width:150},{field:"importer",headerName:"수입회사",width:120},{field:"productName",headerName:"품종",width:150},{field:"itemName",headerName:"품목",width:120},{field:"weight",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"containerCount",headerName:"컨테이너 개수",width:120},{field:"packingUnit",headerName:"포장 단위",width:100},{field:"unitPrice",headerName:"단가",valueFormatter:a.sg,width:130},{field:"totalPrice",headerName:"단가 * 무게",valueFormatter:a.ye,width:150},{field:"supplyPrice",headerName:"수급가",valueFormatter:a.ye,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:a.ye,width:130},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"hsCode",headerName:"HS CODE",width:120},{field:"blNumber",headerName:"BL no.",width:120},{field:"departurePort",headerName:"port(출발항)",width:120},{field:"etd",headerName:"ETD",valueFormatter:a.Kg,width:150},{field:"arrivalPort",headerName:"port(도착항)",width:120},{field:"eta",headerName:"ETA",valueFormatter:a.Kg,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"customsDate",headerName:"통관일자",valueFormatter:a.Kg,width:150}],d=l.map(e=>({field:e.field,width:e.width||100})),n=i.map(e=>({field:e.field,width:e.width||100}))},63901:(e,t,r)=>{r.d(t,{w:()=>l});var a=r(63016);let l=(0,a.createServerReference)("4014f8936396d6646e3a51928c12b6bfe6f86e45fb",a.callServer,void 0,a.findSourceMapURL,"deletePlans")},95093:(e,t,r)=>{r.d(t,{t:()=>d});var a=r(11432),l=r(71251),i=r.n(l);let d=e=>(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)(i(),{href:`/detail/${e.data.id}`,className:"inline-block px-4 py-1.5 bg-[#22C55E] text-white rounded-lg hover:bg-[#16A34A] transition-colors text-sm font-medium text-center",children:"상세보기"})})}};
