"use strict";exports.id=688,exports.ids=[688],exports.modules={26284:(e,a,t)=>{t.d(a,{zG:()=>i,cX:()=>n,mg:()=>s,FX:()=>o});let r=e=>e.value?new Date(e.value).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"",l=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e.value):"",d=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.value)+"/kg":"",i=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:r,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"importer",headerName:"수입회사",width:120},{field:"estimatedTimeArrival",headerName:"ETA",valueFormatter:r,width:150},{field:"arrivalPort",headerName:"도착항",width:120},{field:"itemName",headerName:"품목",width:120},{field:"contractTon",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"unitPrice",headerName:"단가",valueFormatter:l,width:130},{field:"totalPrice",headerName:"단가 * 무게",valueFormatter:l,width:150},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"warehouseEntryDate",headerName:"입고일",valueFormatter:r,width:150},{field:"importCostPerKg",headerName:"수입가/kg",valueFormatter:d,width:130},{field:"supplyCostPerKg",headerName:"수급가/kg",valueFormatter:d,width:130},{field:"totalCost",headerName:"총 비용",valueFormatter:l,width:150},{field:"totalCostPerKg",headerName:"총 비용/kg",valueFormatter:d,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:l,width:130},{field:"margin",headerName:"마진",valueFormatter:l,width:100},{field:"totalProfit",headerName:"총 이익",valueFormatter:l,width:150}],n=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:r,width:150},{field:"importer",headerName:"수입회사",width:120},{field:"productName",headerName:"제품명",width:150},{field:"itemName",headerName:"품목",width:120},{field:"weight",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"containerCount",headerName:"컨테이너 개수",width:120},{field:"packingUnit",headerName:"포장 단위",width:100},{field:"unitPrice",headerName:"단가",valueFormatter:l,width:130},{field:"totalPrice",headerName:"단가 * 무게",valueFormatter:l,width:150},{field:"supplyPrice",headerName:"수급가",valueFormatter:l,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:l,width:130},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"hsCode",headerName:"HS CODE",width:120},{field:"blNumber",headerName:"BL no.",width:120},{field:"departurePort",headerName:"port(출발항)",width:120},{field:"etd",headerName:"ETD",valueFormatter:r,width:150},{field:"arrivalPort",headerName:"port(도착항)",width:120},{field:"eta",headerName:"ETA",valueFormatter:r,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"customsDate",headerName:"통관일자",valueFormatter:r,width:150}],s=i.map(e=>e.field),o=n.map(e=>e.field)},36405:(e,a,t)=>{t.d(a,{wz:()=>w,Dm:()=>g,OA:()=>p,Lx:()=>h,y4:()=>f,Mo:()=>y,Fq:()=>N});var r=t(17464);t(55414);var l=t(19541),d=t(14567),i=t(15198),n=t(13913),s=t(8613),o=t(98149);class u{async findByEmail(e){let[a]=await n.db.select().from(s.users).where((0,o.eq)(s.users.email,e));return a}async findById(e){let[a]=await n.db.select().from(s.users).where((0,o.eq)(s.users.id,e));return a}async getPlanColumnOrder(e){let a=await this.findById(e);return a.planColumnOrder?JSON.parse(a.planColumnOrder):null}async getShipmentColumnOrder(e){let a=await this.findById(e);return a.shipmentColumnOrder?JSON.parse(a.shipmentColumnOrder):null}async updatePlanColumnOrder(e,a){let[t]=await n.db.update(s.users).set({planColumnOrder:a}).where((0,o.eq)(s.users.id,e)).returning();return t}async updateShipmentColumnOrder(e,a){let[t]=await n.db.update(s.users).set({shipmentColumnOrder:a}).where((0,o.eq)(s.users.id,e)).returning();return t}async create(e){let[a]=await n.db.insert(s.users).values(e).returning();return a}async delete(e){return await n.db.delete(s.users).where((0,o.eq)(s.users.id,e)),!0}}var m=t(1634);let c=new u;async function h(e){let a=e.get("email"),t=e.get("password");try{let e=await c.findByEmail(a);if(!e||e.password!==t)return{error:"이메일 또는 비밀번호가 올바르지 않습니다."};return(await (0,d.UL)()).set({name:"userId",value:e.id,httpOnly:!0,maxAge:604800,path:"/"}),{success:!0}}catch(e){return console.error("Login error:",e),{error:"로그인 중 오류가 발생했습니다."}}}async function f(){(await (0,d.UL)()).delete("userId"),(0,i.redirect)("/login")}async function w(){let e=await (0,d.UL)(),a=e.get("userId")?.value;return a?c.findById(a):null}async function g(){let e=await (0,d.UL)(),a=e.get("userId")?.value;return a?await c.getPlanColumnOrder(a):[]}async function p(){let e=await (0,d.UL)(),a=e.get("userId")?.value;return a?await c.getShipmentColumnOrder(a):[]}async function y(e){let a=await (0,d.UL)(),t=a.get("userId")?.value;if(!t)return{error:"로그인이 필요합니다."};try{return await c.updatePlanColumnOrder(t,JSON.stringify(e)),(0,l.revalidatePath)("/"),{success:!0}}catch(e){return console.error("컬럼 순서 저장 오류:",e),{error:"컬럼 순서를 저장하는 중 오류가 발생했습니다."}}}async function N(e){let a=await (0,d.UL)(),t=a.get("userId")?.value;if(!t)return{error:"로그인이 필요합니다."};try{return await c.updateShipmentColumnOrder(t,JSON.stringify(e)),(0,l.revalidatePath)("/"),{success:!0}}catch(e){return console.error("컬럼 순서 저장 오류:",e),{error:"컬럼 순서를 저장하는 중 오류가 발생했습니다."}}}(0,m.D)([h,f,w,g,p,y,N]),(0,r.A)(h,"400c066bd73bd62514f27a88a17ebe646d14276ea7",null),(0,r.A)(f,"001ce2a144fe2a3241bba12c9ff53baf78ce300a60",null),(0,r.A)(w,"004ae8a1bad6924e662737232527d93e1a4d63665a",null),(0,r.A)(g,"007632cc964ce32c9ae88659de771465e31829822e",null),(0,r.A)(p,"006c2543e6ed3cab958cf2744b616699a0e65aa819",null),(0,r.A)(y,"40642458384ff36d90a2e9c0502212b384d041a6ae",null),(0,r.A)(N,"40caf5954f16e6e440a3a6947e1c7a519d99375fda",null)},53295:(e,a,t)=>{t.d(a,{A:()=>l});var r=t(11417);let l=function(e){let a=(0,r.useRef)([]);return{onDragStarted:e=>{a.current=e.api.getColumnState().map(e=>e.colId)},onDragStopped:t=>{let r=t.api.getColumnState().map(e=>e.colId).filter(e=>"detail"!==e);a.current.every((e,a)=>e===r[a])||e(t)}}}},53341:(e,a,t)=>{t.d(a,{A:()=>h,t:()=>c});var r=t(11432),l=t(11417),d=t(26093),i=t(38762),n=t(98194),s=t(10320),o=t(97136),u=t(71251),m=t.n(u);n.syG.registerModules([n.JKr]);let c=e=>(0,r.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,r.jsx)(m(),{href:`/detail/${e.data.id}`,className:"inline-block px-4 py-1.5 bg-[#22C55E] text-white rounded-lg hover:bg-[#16A34A] transition-colors text-sm font-medium text-center",children:"상세보기"})});function h({columnDefs:e,data:a,loading:t=!1,error:u=null,onDragStarted:m,onDragStopped:c,onResetColumnOrder:h}){let[f,w]=(0,l.useState)(""),[g,p]=(0,l.useState)(""),[y,N]=(0,l.useState)(""),[v,x]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),C=(0,l.useMemo)(()=>({sortable:!0,resizable:!0,minWidth:100,filter:!0,lockPinned:!0}),[]),F=(0,l.useMemo)(()=>({sort:{sortModel:[{colId:"contractDate",sort:"desc"}]}}),[]),S=(0,l.useMemo)(()=>i.z0,[]),D=(0,l.useMemo)(()=>a.filter(a=>{let t=!f||e.some(e=>{let t=e.field;if(!t)return!1;let r=a[t];return r&&r.toString().toLowerCase().includes(f.toLowerCase())}),r=new Date(a.contractDate),l=(!g||r>=new Date(g))&&(!y||r<=new Date(y));return t&&l}),[a,f,g,y,e]);return u?(0,r.jsx)("div",{className:"w-full h-[800px] bg-white flex items-center justify-center",children:(0,r.jsx)("p",{className:"text-red-500",children:u})}):(0,r.jsxs)("div",{className:"flex flex-col md:flex-row w-full h-[800px] bg-slate-50 rounded-xl overflow-hidden shadow-lg p-6 gap-6",children:[(0,r.jsxs)("button",{onClick:()=>x(!v),className:"md:hidden flex items-center justify-center gap-2 mb-4 px-4 py-2 bg-white rounded-lg shadow-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[(0,r.jsx)(s.A,{className:"w-5 h-5"}),(0,r.jsxs)("span",{children:["필터 ",v?"숨기기":"보기"]})]}),(0,r.jsxs)("div",{className:`relative transition-all duration-300 p-6 space-y-6
        ${v?"block":"hidden md:block"}
        ${b?"w-12 bg-slate-50":"w-full md:w-80 bg-white rounded-xl shadow-sm"}
        md:shrink-0 overflow-hidden`,children:[(0,r.jsx)("button",{onClick:()=>j(e=>!e),className:"absolute right-2 top-2 w-8 h-8 bg-gray-200 text-gray-600 rounded-full shadow-md hover:bg-gray-300 transition z-10 hidden md:block",children:b?">":"<"}),!b&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"필터"}),(0,r.jsxs)("div",{className:"space-y-5",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"검색어"}),(0,r.jsx)("input",{type:"text",placeholder:"검색어를 입력하세요",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:f,onChange:e=>w(e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"조회 기간"}),(0,r.jsx)("input",{type:"date",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 mb-3",value:g,onChange:e=>p(e.target.value)}),(0,r.jsx)("input",{type:"date",className:"w-full px-4 py-2.5 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",value:y,onChange:e=>N(e.target.value)})]}),h&&(0,r.jsxs)("button",{onClick:h,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:[(0,r.jsx)(o.A,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"컬럼 순서 초기화"})]})]})]})]}),(0,r.jsx)("div",{className:"flex-1 bg-white rounded-xl shadow-sm overflow-hidden min-h-[400px]",children:t?(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-3 h-3 bg-[#22C55E] rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})}):(0,r.jsx)("div",{className:"w-full h-full",children:(0,r.jsx)(d.W6,{theme:n.BhY,rowData:D,columnDefs:e,defaultColDef:C,initialState:F,pagination:!0,paginationPageSize:15,rowSelection:"multiple",localeText:S,onDragStarted:m,onDragStopped:c})})})]})}}};
