"use strict";exports.id=913,exports.ids=[913],exports.modules={8613:(e,t,a)=>{a.r(t),a.d(t,{accountNumbers:()=>R,businessNumbers:()=>F,cargos:()=>x,cargosRelations:()=>z,cashflows:()=>V,cashflowsRelations:()=>Y,companies:()=>W,companiesRelations:()=>J,companyYears:()=>Z,companyYearsRelations:()=>et,contracts:()=>D,contractsRelations:()=>S,costDetails:()=>w,costDetailsRelations:()=>U,costs:()=>I,costsRelations:()=>$,documents:()=>A,documentsRelations:()=>M,financialData:()=>ee,financialDataRelations:()=>er,historyLogs:()=>C,historyLogsRelations:()=>G,importers:()=>q,importersRelations:()=>P,items:()=>v,itemsRelations:()=>L,links:()=>T,partnerCompanies:()=>X,partnerCompaniesRelations:()=>ea,payments:()=>f,paymentsRelations:()=>k,paymentsTt:()=>Q,paymentsTtRelations:()=>E,paymentsUsance:()=>g,paymentsUsanceRelations:()=>O,quotationCompanies:()=>en,quotationCompaniesItems:()=>ed,quotationCompaniesItemsRelations:()=>em,quotationCompaniesRelations:()=>eo,quotationItems:()=>ei,quotationItemsRelations:()=>el,shipments:()=>K,shipmentsRelations:()=>B,stocks:()=>j,stocksRelations:()=>H,users:()=>b});var r=a(87985),n=a(71198),i=a(70228),d=a(10215),o=a(75263),l=a(49778),m=a(28370);let s=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW"}).format(e.value):"",c=e=>{if(null===e.value||void 0===e.value||""===e.value)return"";let t=Number(e.value);if(isNaN(t))return"";let a=!Number.isInteger(t);return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2*!!a,maximumFractionDigits:2*!!a}).format(t)},u=e=>e.value?new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.value)+"/kg":"",p=e=>{if(!e.value)return"";let t=new Date(e.value),a=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return`${a}/${r}/${n}`},_=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:p,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"importer",headerName:"수입회사",width:120},{field:"estimatedTimeArrival",headerName:"ETA",valueFormatter:p,width:150},{field:"arrivalPort",headerName:"도착항",width:120},{field:"itemName",headerName:"품목",width:120},{field:"contractTon",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"packingUnit",headerName:"포장 단위",width:130},{field:"unitPrice",headerName:"단가",valueFormatter:c,width:130},{field:"totalPriceUsd",headerName:"단가 * 톤수",valueFormatter:c,width:150},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"warehouseEntryDate",headerName:"입고일",valueFormatter:p,width:150},{field:"importCostPerKg",headerName:"수입가/kg",valueFormatter:u,width:130},{field:"supplyCostPerKg",headerName:"수급가/kg",valueFormatter:u,width:130},{field:"totalCost",headerName:"총 비용",valueFormatter:s,width:150},{field:"totalCostPerKg",headerName:"총 비용/kg",valueFormatter:u,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:s,width:130},{field:"margin",headerName:"마진",valueFormatter:s,width:100},{field:"totalProfit",headerName:"총 이익",valueFormatter:s,width:150}],y=[{field:"contractNumber",headerName:"계약 번호",width:130},{field:"progressStatus",headerName:"진행 상태",width:100},{field:"contractDate",headerName:"계약일자",valueFormatter:p,width:150},{field:"importer",headerName:"수입회사",width:120},{field:"productName",headerName:"품종",width:150},{field:"itemName",headerName:"품목",width:120},{field:"weight",headerName:"무게",valueFormatter:e=>`${e.value}톤`,width:100},{field:"containerCount",headerName:"컨테이너 개수",width:120},{field:"packingUnit",headerName:"포장 단위",width:100},{field:"unitPrice",headerName:"단가",valueFormatter:c,width:130},{field:"totalPriceUsd",headerName:"단가 * 톤수",valueFormatter:c,width:150},{field:"supplyPrice",headerName:"수급가",valueFormatter:s,width:130},{field:"sellingPrice",headerName:"판매가",valueFormatter:s,width:130},{field:"paymentMethod",headerName:"결제방식",width:100},{field:"hsCode",headerName:"HS CODE",width:120},{field:"blNumber",headerName:"BL no.",width:120},{field:"departurePort",headerName:"port(출발항)",width:120},{field:"etd",headerName:"ETD",valueFormatter:p,width:150},{field:"arrivalPort",headerName:"port(도착항)",width:120},{field:"eta",headerName:"ETA",valueFormatter:p,width:150},{field:"exporter",headerName:"공급업체",width:120},{field:"customsDate",headerName:"통관일자",valueFormatter:p,width:150}],N=_.map(e=>({field:e.field,width:e.width||100})),h=y.map(e=>({field:e.field,width:e.width||100})),q=(0,r.D)("importers",{id:(0,n.Qq)("id").primaryKey(),importerName:(0,n.Qq)("importer_name").notNull(),importerCode:(0,n.Qq)("importer_code"),calculationType:(0,n.Qq)("calculation_type").notNull()}),f=(0,r.D)("payments",{id:(0,n.Qq)("id").primaryKey(),paymentDueDate:(0,n.Qq)("payment_due_date"),paymentMethod:(0,n.Qq)("payment_method").notNull(),contractId:(0,n.Qq)("contract_id").notNull()},e=>[(0,i.z6)("payment_type_check",(0,l.ll)`${e.paymentMethod} IN ('T/T', 'CAD', 'L/C', 'Usance')`)]),Q=(0,r.D)("payments_tt",{paymentId:(0,n.Qq)("payment_id").primaryKey().references(()=>f.id,{onDelete:"cascade"}),advancePaymentDate:(0,n.Qq)("advance_payment_date"),advancePaymentRatio:(0,d.x)("advance_payment_ratio"),remainingPaymentDate:(0,n.Qq)("remaining_payment_date"),remainingPaymentRatio:(0,d.x)("remaining_payment_ratio"),counterpartBank:(0,n.Qq)("counterpart_bank")}),g=(0,r.D)("payments_usance",{paymentId:(0,n.Qq)("payment_id").primaryKey().references(()=>f.id,{onDelete:"cascade"}),paymentTerm:(0,n.Qq)("payment_term"),contractExchangeRate:(0,n.Qq)("contact_exchange_rate")}),w=(0,r.D)("cost_details",{id:(0,n.Qq)("id").primaryKey(),unitPrice:(0,d.x)("unit_price"),exchangeRate:(0,d.x)("exchange_rate"),customsTaxRate:(0,d.x)("customs_tax_rate"),customsFee:(0,d.x)("customs_fee"),inspectionFee:(0,d.x)("inspection_fee"),doCharge:(0,d.x)("do_charge"),otherCosts:(0,d.x)("other_costs"),transferFee:(0,d.x)("transfer_fee"),costId:(0,n.Qq)("cost_id").notNull()}),D=(0,r.D)("contracts",{id:(0,n.Qq)("id").primaryKey(),contractNumber:(0,n.Qq)("contract_number"),contractDate:(0,n.Qq)("contract_date"),exporter:(0,n.Qq)("exporter"),importerId:(0,n.Qq)("importer_id").references(()=>q.id),incoterms:(0,n.Qq)("incoterms"),createdAt:(0,n.Qq)("created_at"),updatedAt:(0,n.Qq)("updated_at")}),v=(0,r.D)("items",{id:(0,n.Qq)("id").primaryKey(),itemName:(0,n.Qq)("item_name"),itemVariety:(0,n.Qq)("item_variety"),originCountry:(0,n.Qq)("origin_country"),hsCode:(0,n.Qq)("hs_code"),packingUnit:(0,n.Qq)("packing_unit")}),I=(0,r.D)("costs",{id:(0,n.Qq)("id").primaryKey(),supplyPrice:(0,d.x)("supply_price"),shippingCost:(0,d.x)("shipping_cost"),laborCost:(0,d.x)("labor_cost"),transportStorageFee:(0,d.x)("transport_storage_fee"),loadingUnloadingFee:(0,d.x)("loading_unloading_fee"),usanceInterest:(0,d.x)("usance_interest"),cargoId:(0,n.Qq)("cargo_id").notNull(),gompyoLaborCost:(0,d.x)("gompyo_labor_cost"),gompyoTransportStorageFee:(0,d.x)("gompyo_transport_storage_fee"),gompyoLoadingUnloadingFee:(0,d.x)("gompyo_loading_unloading_fee")}),b=(0,r.D)("users",{id:(0,n.Qq)("id").primaryKey(),email:(0,n.Qq)("email"),password:(0,n.Qq)("password"),name:(0,n.Qq)("name"),planColumnOrder:(0,n.Qq)("plan_column_order").default(JSON.stringify(N)),shipmentColumnOrder:(0,n.Qq)("shipment_column_order").default(JSON.stringify(h)),quotationColumnOrder:(0,n.Qq)("quotation_column_order").default(JSON.stringify([{field:"companyColumnName",width:150}]))}),K=(0,r.D)("shipments",{id:(0,n.Qq)("id").primaryKey(),contractId:(0,n.Qq)("contract_id").notNull(),estimatedTimeArrival:(0,n.Qq)("estimated_time_arrival"),estimatedTimeDeparture:(0,n.Qq)("estimated_time_departure"),arrivalPort:(0,n.Qq)("arrival_port"),shippingCompany:(0,n.Qq)("shipping_company"),departurePort:(0,n.Qq)("departure_port"),blNumber:(0,n.Qq)("bl_number"),palletOrderDate:(0,n.Qq)("pallet_order_date"),palletType:(0,n.Qq)("pallet_type"),createdAt:(0,n.Qq)("created_at"),updatedAt:(0,n.Qq)("updated_at")}),x=(0,r.D)("cargos",{id:(0,n.Qq)("id").primaryKey(),itemsId:(0,n.Qq)("items_id").notNull(),shipmentId:(0,n.Qq)("shipment_id").notNull(),containerCount:(0,o.nd)("container_count"),contractTon:(0,o.nd)("contract_ton"),customsClearanceDate:(0,n.Qq)("customs_clearance_date"),quarantineDate:(0,n.Qq)("quarantine_date"),warehouseEntryDate:(0,n.Qq)("warehouse_entry_date"),progressStatus:(0,n.Qq)("progress_status"),sellingPrice:(0,d.x)("selling_price"),sellingPriceWholesale:(0,d.x)("selling_price_wholesale"),sellingPriceRetail:(0,d.x)("selling_price_retail"),margin:(0,d.x)("margin"),totalProfit:(0,d.x)("total_profit"),purchaseFeeRate:(0,d.x)("purchase_fee_rate"),remark:(0,n.Qq)("remark"),createdAt:(0,n.Qq)("created_at"),updatedAt:(0,n.Qq)("updated_at")},e=>[(0,i.z6)("progress_status_check",(0,l.ll)`${e.progressStatus} IN ('REVIEW', 'CONTRACTING', 'BEFORE_LC', 'BEFORE_ARRIVAL', 'WAREHOUSE_MOVING', 'BEFORE_QUARANTINE', 'QUARANTINING', 'CUSTOMS_DECLARING', 'DONE_ARRIVAL', 'AFTER_CUSTOMS', 'SELLING', 'SOLD_DONE')`)]),A=(0,r.D)("documents",{id:(0,n.Qq)("id").primaryKey(),documentName:(0,n.Qq)("document_name").notNull(),documentType:(0,n.Qq)("document_type").notNull(),s3Url:(0,n.Qq)("s3_url").notNull(),uploadDate:(0,n.Qq)("upload_date").notNull(),relatedId:(0,n.Qq)("related_id").notNull(),documentCategory:(0,n.Qq)("document_category").notNull()}),C=(0,r.D)("history_logs",{id:(0,n.Qq)("id").primaryKey(),targetType:(0,n.Qq)("target_type"),targetId:(0,n.Qq)("target_id"),type:(0,n.Qq)("type"),user:(0,n.Qq)("user"),changes:(0,n.Qq)("changes"),status:(0,n.Qq)("status"),createdAt:(0,n.Qq)("created_at")}),R=(0,r.D)("account_numbers",{id:(0,n.Qq)("id").primaryKey(),accountNumber:(0,n.Qq)("account_number").notNull(),bankName:(0,n.Qq)("bank_name").notNull(),owner:(0,n.Qq)("owner").notNull(),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at")}),F=(0,r.D)("business_numbers",{id:(0,n.Qq)("id").primaryKey(),businessNumber:(0,n.Qq)("business_number").notNull(),businessName:(0,n.Qq)("business_name").notNull(),businessRepresentative:(0,n.Qq)("business_representative").notNull(),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at")}),T=(0,r.D)("links",{id:(0,n.Qq)("id").primaryKey(),title:(0,n.Qq)("title").notNull(),url:(0,n.Qq)("url").notNull(),thumbnail:(0,n.Qq)("thumbnail"),order:(0,o.nd)("order").notNull(),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()}),P=(0,m.K1)(q,({many:e})=>({contracts:e(D)})),k=(0,m.K1)(f,({one:e})=>({contract:e(D,{fields:[f.contractId],references:[D.id]}),paymentsTt:e(Q,{fields:[f.id],references:[Q.paymentId]}),paymentsUsance:e(g,{fields:[f.id],references:[g.paymentId]})})),E=(0,m.K1)(Q,({one:e})=>({payment:e(f,{fields:[Q.paymentId],references:[f.id]})})),O=(0,m.K1)(g,({one:e})=>({payment:e(f,{fields:[g.paymentId],references:[f.id]})})),U=(0,m.K1)(w,({one:e})=>({cost:e(I,{fields:[w.costId],references:[I.id]})})),S=(0,m.K1)(D,({many:e,one:t})=>({payments:e(f),shipments:e(K),documents:e(A),importer:t(q,{fields:[D.importerId],references:[q.id]})})),L=(0,m.K1)(v,({many:e})=>({cargos:e(x)})),$=(0,m.K1)(I,({one:e,many:t})=>({cargo:e(x,{fields:[I.cargoId],references:[x.id]}),costDetails:t(w)})),B=(0,m.K1)(K,({one:e,many:t})=>({contract:e(D,{fields:[K.contractId],references:[D.id]}),cargos:t(x),documents:t(A)})),z=(0,m.K1)(x,({one:e,many:t})=>({item:e(v,{fields:[x.itemsId],references:[v.id]}),shipment:e(K,{fields:[x.shipmentId],references:[K.id]}),costs:t(I)})),M=(0,m.K1)(A,({one:e})=>({contract:e(D,{fields:[A.relatedId],references:[D.id],relationName:"contract_documents"}),shipment:e(K,{fields:[A.relatedId],references:[K.id],relationName:"shipment_documents"})})),G=(0,m.K1)(C,({})=>({})),V=(0,r.D)("cashflows",{id:(0,n.Qq)("id").primaryKey(),date:(0,n.Qq)("date").notNull(),companyId:(0,n.Qq)("company_id").notNull(),counterparty:(0,n.Qq)("counterparty").notNull(),amount:(0,d.x)("amount").notNull(),type:(0,n.Qq)("type").notNull(),priority:(0,o.nd)("priority"),isApproved:(0,o.nd)("is_approved",{mode:"boolean"}).default(!1),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()},e=>[(0,i.z6)("cashflow_type_check",(0,l.ll)`${e.type} IN ('income', 'expense')`)]),W=(0,r.D)("companies",{id:(0,n.Qq)("id").primaryKey(),name:(0,n.Qq)("name").notNull(),companyBalance:(0,d.x)("company_balance").notNull(),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()}),Y=(0,m.K1)(V,({one:e})=>({company:e(W,{fields:[V.companyId],references:[W.id]})})),J=(0,m.K1)(W,({many:e})=>({cashflows:e(V)})),j=(0,r.D)("stocks",{id:(0,n.Qq)("id").primaryKey(),cargoId:(0,n.Qq)("cargo_id").notNull().references(()=>x.id,{onDelete:"cascade"}),dnbCleared:(0,o.nd)("dnb_cleared").notNull().default(0),namhaeCleared:(0,o.nd)("namhae_cleared").notNull().default(0),interlivingCleared:(0,o.nd)("interliving_cleared").notNull().default(0),gompyoCleared:(0,o.nd)("gompyo_cleared").notNull().default(0),ramplusCleared:(0,o.nd)("ramplus_cleared").notNull().default(0),dnbUncleared:(0,o.nd)("dnb_uncleared").notNull().default(0),namhaeUncleared:(0,o.nd)("namhae_uncleared").notNull().default(0),interlivingUncleared:(0,o.nd)("interliving_uncleared").notNull().default(0),gompyoUncleared:(0,o.nd)("gompyo_uncleared").notNull().default(0),ramplusUncleared:(0,o.nd)("ramplus_uncleared").notNull().default(0),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()}),H=(0,m.K1)(j,({one:e})=>({cargo:e(x,{fields:[j.cargoId],references:[x.id]})})),X=(0,r.D)("partner_companies",{id:(0,n.Qq)("id").primaryKey(),name:(0,n.Qq)("name").notNull(),type:(0,n.Qq)("type").notNull(),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()},e=>[(0,i.z6)("partner_company_type_check",(0,l.ll)`${e.type} IN ('payment', 'collection')`)]),Z=(0,r.D)("company_years",{id:(0,n.Qq)("id").primaryKey(),companyId:(0,n.Qq)("company_id").notNull().references(()=>X.id,{onDelete:"cascade"}),year:(0,o.nd)("year").notNull(),lampleOpeningBalance:(0,d.x)("lample_opening_balance").default(0),gompyoOpeningBalance:(0,d.x)("gompyo_opening_balance").default(0),lampleClosingBalance:(0,d.x)("lample_closing_balance").default(0),gompyoClosingBalance:(0,d.x)("gompyo_closing_balance").default(0),isActive:(0,o.nd)("is_active",{mode:"boolean"}).default(!0),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()}),ee=(0,r.D)("financial_data",{id:(0,n.Qq)("id").primaryKey(),yearId:(0,n.Qq)("year_id").notNull().references(()=>Z.id,{onDelete:"cascade"}),month:(0,n.Qq)("month").notNull(),isCarryover:(0,o.nd)("is_carryover",{mode:"boolean"}).default(!1),lamplePurchase:(0,d.x)("lample_purchase"),lamplePayment:(0,d.x)("lample_payment"),gompyoPurchase:(0,d.x)("gompyo_purchase"),gompyoPayment:(0,d.x)("gompyo_payment"),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()}),et=(0,m.K1)(Z,({one:e,many:t})=>({company:e(X,{fields:[Z.companyId],references:[X.id]}),financialData:t(ee)})),ea=(0,m.K1)(X,({many:e})=>({companyYears:e(Z)})),er=(0,m.K1)(ee,({one:e})=>({companyYear:e(Z,{fields:[ee.yearId],references:[Z.id]})})),en=(0,r.D)("quotation_companies",{id:(0,n.Qq)("id").primaryKey(),companyName:(0,n.Qq)("company_name").notNull(),companyType:(0,n.Qq)("company_type").notNull(),priceType:(0,n.Qq)("price_type").notNull(),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()},e=>[(0,i.z6)("company_type_check",(0,l.ll)`${e.companyType} IN ('domestic', 'foreign')`),(0,i.z6)("price_type_check",(0,l.ll)`${e.priceType} IN ('arrival', 'loading')`)]),ei=(0,r.D)("quotation_items",{id:(0,n.Qq)("id").primaryKey(),itemName:(0,n.Qq)("item_name").notNull(),itemOrigin:(0,n.Qq)("item_origin").notNull(),itemNameEn:(0,n.Qq)("item_name_en"),itemOriginEn:(0,n.Qq)("item_origin_en"),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()}),ed=(0,r.D)("quotation_companies_items",{id:(0,n.Qq)("id").primaryKey(),companyId:(0,n.Qq)("company_id").notNull().references(()=>en.id,{onDelete:"cascade"}),itemId:(0,n.Qq)("item_id").notNull().references(()=>ei.id,{onDelete:"cascade"}),value:(0,d.x)("value"),createdAt:(0,n.Qq)("created_at").notNull(),updatedAt:(0,n.Qq)("updated_at").notNull()}),eo=(0,m.K1)(en,({many:e})=>({quotationCompaniesItems:e(ed)})),el=(0,m.K1)(ei,({many:e})=>({quotationCompaniesItems:e(ed)})),em=(0,m.K1)(ed,({one:e})=>({company:e(en,{fields:[ed.companyId],references:[en.id]}),item:e(ei,{fields:[ed.itemId],references:[ei.id]})}))},13913:(e,t,a)=>{a.d(t,{db:()=>s});var r=a(58622),n=a(87550),i=a.n(n),d=a(8613),o=a(33873);let l=a.n(o)().join(process.cwd(),"drizzle","database.sqlite"),m=new(i())(l);m.pragma("foreign_keys = ON"),m.pragma("journal_mode = DELETE");let s=(0,r.f)(m,{schema:d})}};
