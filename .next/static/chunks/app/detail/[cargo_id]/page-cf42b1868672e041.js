(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3999],{28369:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>th});var r=a(22318),n=a(27849),l=a(6987),o=a(42846),i=a(92262),s=a(20926),c=a(81759),d=a(17859),u=a(73848),m=a(54069),p=a(2877),g=a(91394),h=a(46558),x=a(56690),v=a(23093),b=a(5600),y=a(15792),f=a(60720);let A=e=>{if(null==e||""===e)return"";let t=parseFloat(String(e).replace(/[^0-9.-]/g,""));return isNaN(t)?"":new Intl.NumberFormat("ko-KR").format(t)},j=e=>{if(null==e||""===e)return"";let t=parseFloat(String(e).replace(/[^0-9.-]/g,""));return isNaN(t)?"":new Intl.NumberFormat("ko-KR").format(Math.floor(t))},C=e=>e.map(e=>({value:e.importerName,label:e.importerName})),T=e=>[{name:"contractNumber",label:"계약 번호",valueType:"string"},{name:"contractDate",label:"계약 일자",valueType:"string",type:"date"},{name:"importerName",label:"수입회사",valueType:"string",type:"select",options:C(e)},{name:"exporter",label:"공급업체",valueType:"string"},{name:"incoterms",label:"인코텀즈",valueType:"string"},{name:"contractTon",label:"계약 톤수",valueType:"string",type:"number",endAdornment:"톤"},{name:"departurePort",label:"출발항",gridSize:6,valueType:"string"},{name:"arrivalPort",label:"도착항",gridSize:6,valueType:"string"},{name:"estimatedTimeDeparture",label:"ETD",gridSize:6,valueType:"string",type:"date"},{name:"estimatedTimeArrival",label:"ETA",gridSize:6,valueType:"string",type:"date"},{name:"blNumber",label:"B/L 번호",valueType:"string"}],S=[{name:"paymentMethod",label:"결제 방식",valueType:"string",type:"select",options:[{value:"T/T",label:"T/T"},{value:"CAD",label:"CAD"},{value:"L/C",label:"L/C at sight"},{value:"Usance",label:"Payment Usance"}]}],D={"T/T":[{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD"},{name:"counterpartBank",label:"상대방 은행",valueType:"string"},{name:"advancePaymentDate",label:"선급금 날짜",gridSize:6,valueType:"string",type:"date"},{name:"remainingPaymentDate",label:"잔금 날짜",gridSize:6,valueType:"string",type:"date"},{name:"advancePaymentRatio",label:"선급금 비율",gridSize:6,valueType:"number",endAdornment:"%"},{name:"remainingPaymentRatio",label:"잔금 비율",gridSize:6,valueType:"number",endAdornment:"%"},{name:"advancePaymentAmount",label:"선급금 금액",gridSize:6,valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0},{name:"remainingPaymentAmount",label:"잔금 금액",gridSize:6,valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0}],CAD:[{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD"},{name:"paymentDueDate",label:"대금 결제일",valueType:"string",type:"date"}],"L/C":[{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD"},{name:"paymentDueDate",label:"대금 결제일",valueType:"string",type:"date"}],Usance:[{name:"paymentTerm",label:"결제 기간",valueType:"string",endAdornment:"일"},{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD"},{name:"paymentDueDate",label:"대금 결제일",valueType:"string",type:"date"}]},N=[{name:"unitPrice",label:"단가",valueType:"number",endAdornment:"MT/USD",removeDecimal:!0},{name:"totalContractPrice",label:"총 계약가",valueType:"number",endAdornment:"₩",disabled:!0,removeDecimal:!0},{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD",removeDecimal:!0},{name:"costPerKg",label:"원가",valueType:"number",endAdornment:"₩/Kg",disabled:!0,removeDecimal:!0},{name:"customsTaxRate",label:"관세율",valueType:"number",endAdornment:"%",removeDecimal:!0},{name:"customTaxAmount",label:"관세액",valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0},{name:"transferFee",label:"송금수수료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"customsFee",label:"관세수수료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"inspectionFee",label:"검사료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"doCharge",label:"D/O Charge",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"otherCosts",label:"기타비용",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"purchaseFeeRate",label:"매입 수수료율",valueType:"number",type:"text",endAdornment:"%",removeDecimal:!0}],w=[{name:"contractorCost",label:"수입회사 원가",valueType:"number",disabled:!0,removeDecimal:!0,endAdornment:"₩/Kg"},{name:"supplyPrice",label:"수입회사 수급가",valueType:"number",disabled:!0,removeDecimal:!0,endAdornment:"₩/Kg"},{name:"contractorProfit",label:"수입회사 이익",valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0},{name:"shippingCost",label:"배송비",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"laborCost",label:"작업료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"transportStorageFee",label:"운송/보관료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"loadingUnloadingFee",label:"상하차 비용",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"usanceInterest",label:"Usance 이자(환차손)",valueType:"number",endAdornment:"₩",removeDecimal:!0}],F=[{name:"totalCost",label:"총비용",valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0},{name:"totalCostPerKg",label:"총비용/Kg",valueType:"number",disabled:!0,endAdornment:"₩/Kg",removeDecimal:!0},{name:"sellingPrice",label:"판매가(총판)",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"sellingPriceWholesale",label:"판매가(도매)",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"sellingPriceRetail",label:"판매가(소매)",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"margin",label:"마진",valueType:"number",disabled:!0,removeDecimal:!0,endAdornment:"₩/Kg"},{name:"totalProfit",label:"총이익",valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0}],R=[{name:"gompyoLaborCost",label:"곰표 작업료",valueType:"number",endAdornment:"₩"},{name:"gompyoTransportStorageFee",label:"곰표 운송/보관료",valueType:"number",endAdornment:"₩"},{name:"gompyoLoadingUnloadingFee",label:"곰표 상하차 비용",valueType:"number",endAdornment:"₩"}];var k=a(86956),E=a(49812),P=a(64358);let U=(0,P.createServerReference)("4063a6742af0e4103c19e6a8805b727860413c32c0",P.callServer,void 0,P.findSourceMapURL,"getCargoDetail"),L=(0,P.createServerReference)("60a108b1d2731d78fe3329b05108193d6b39210b4c",P.callServer,void 0,P.findSourceMapURL,"updateCargoDetail");var I=a(62171);class M{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee+t.gompyoLaborCost+t.gompyoTransportStorageFee+t.gompyoLoadingUnloadingFee,l=t.sellingPrice-n/t.contractTon/1e3,o=l*t.contractTon*1e3,i=n/t.contractTon/1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:l,totalProfit:o,totalCostPerKg:i}}}class O{calculate(e,t){let a=(e.contractorCostAmount+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee+t.usanceInterest)/t.contractTon/1e3*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3+t.gompyoLaborCost+t.gompyoLoadingUnloadingFee+t.gompyoTransportStorageFee,l=t.sellingPrice-n/t.contractTon/1e3,o=l*t.contractTon*1e3,i=n/t.contractTon/1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:l,totalProfit:o,totalCostPerKg:i}}}class _{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),r=(a-e.contractorCost)*t.contractTon*1e3,n=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee+t.gompyoLaborCost+t.gompyoTransportStorageFee+t.gompyoLoadingUnloadingFee,l=t.sellingPrice-n/t.contractTon/1e3,o=l*t.contractTon*1e3,i=n/t.contractTon/1e3;return{supplyPrice:a,contractorProfit:r,totalCost:n,margin:l,totalProfit:o,totalCostPerKg:i}}}class W{static createStrategy(e){if(!e)return new M;switch(e.calculationType){case I.A.STANDARD:return new M;case I.A.DNB:return new O;case I.A.NAMHAE:return new _;default:return new M}}}class z{calculateValues(){let e=this.data.costDetail.unitPrice||0,t=this.data.costDetail.exchangeRate||0,a=this.data.cargo.contractTon||0,r=this.data.cargo.sellingPrice||0,n=this.data.cargo.purchaseFeeRate||0,l=Math.floor(e*t*a),o=Math.floor(e*a),i=e*t/1e3,s=l*(this.data.costDetail.customsTaxRate||0)/100,c=l+s+(this.data.costDetail.transferFee||0)+(this.data.costDetail.customsFee||0)+(this.data.costDetail.inspectionFee||0)+(this.data.costDetail.doCharge||0)+(this.data.costDetail.otherCosts||0),d=c/a/1e3,u=l*(this.data.payment.advancePaymentRatio||0)/100,m=l*(this.data.payment.remainingPaymentRatio||0)/100,p=this.calculationStrategy.calculate({contractorCostAmount:c,costPerKg:i,totalContractPrice:l,contractorCost:d},{contractTon:a,sellingPrice:r,purchaseFeeRate:n,shippingCost:this.data.cost.shippingCost||0,laborCost:this.data.cost.laborCost||0,transportStorageFee:this.data.cost.transportStorageFee||0,loadingUnloadingFee:this.data.cost.loadingUnloadingFee||0,usanceInterest:this.data.cost.usanceInterest||0,gompyoLaborCost:this.data.cost.gompyoLaborCost||0,gompyoTransportStorageFee:this.data.cost.gompyoTransportStorageFee||0,gompyoLoadingUnloadingFee:this.data.cost.gompyoLoadingUnloadingFee||0});return{supplyPrice:p.supplyPrice,margin:p.margin,totalProfit:p.totalProfit,totalContractPrice:l,totalPriceUsd:o,costPerKg:i,contractorCost:d,contractorProfit:p.contractorProfit,totalCost:p.totalCost,totalCostPerKg:p.totalCostPerKg,customTaxAmount:s,advancePaymentAmount:u,remainingPaymentAmount:m}}mapItem(e){return{id:e.id,itemName:e.itemName||"",itemVariety:e.itemVariety||"",originCountry:e.originCountry||"",hsCode:e.hsCode||"",packingUnit:e.packingUnit||""}}mapShipment(e){return{id:e.id,estimatedTimeArrival:e.estimatedTimeArrival||"",estimatedTimeDeparture:e.estimatedTimeDeparture||"",arrivalPort:e.arrivalPort||"",departurePort:e.departurePort||"",blNumber:e.blNumber||"",palletOrderDate:e.palletOrderDate||"",palletType:e.palletType||"",shippingCompany:e.shippingCompany||"",contractId:e.contractId||"",createdAt:e.createdAt||"",updatedAt:e.updatedAt||""}}mapContract(e,t,a){return{id:e.id,incoterms:e.incoterms||"",contractNumber:e.contractNumber||"",contractDate:e.contractDate||"",exporter:e.exporter||"",importerId:e.importerId||"",departurePort:t.departurePort||"",arrivalPort:t.arrivalPort||"",estimatedTimeDeparture:t.estimatedTimeDeparture||"",estimatedTimeArrival:t.estimatedTimeArrival||"",blNumber:t.blNumber||"",importerName:(null==a?void 0:a.importerName)||"",createdAt:e.createdAt||"",updatedAt:e.updatedAt||""}}mapPayment(e){return{id:e.id,paymentDueDate:e.paymentDueDate||"",paymentMethod:e.paymentMethod||"",contractId:e.contractId,advancePaymentDate:e.advancePaymentDate||"",advancePaymentRatio:e.advancePaymentRatio||0,advancePaymentAmount:this.calculatedValues.advancePaymentAmount,remainingPaymentDate:e.remainingPaymentDate||"",remainingPaymentRatio:e.remainingPaymentRatio||0,remainingPaymentAmount:this.calculatedValues.remainingPaymentAmount,counterpartBank:e.counterpartBank||"",paymentTerm:e.paymentTerm||"",totalContractAmount:this.calculatedValues.totalContractPrice}}mapAndCalculateCostDetail(e){return{id:e.id,unitPrice:e.unitPrice||0,totalContractPrice:this.calculatedValues.totalContractPrice,totalPriceUsd:this.calculatedValues.totalPriceUsd,exchangeRate:e.exchangeRate||0,costPerKg:this.calculatedValues.costPerKg,costId:e.costId,customTaxAmount:this.calculatedValues.customTaxAmount,customsTaxRate:e.customsTaxRate||0,customsFee:e.customsFee||0,inspectionFee:e.inspectionFee||0,doCharge:e.doCharge||0,otherCosts:e.otherCosts||0,transferFee:e.transferFee||0}}mapAndCalculateContractAmount(e,t){return{id:t.id,cargoId:t.cargoId,contractorCost:this.calculatedValues.contractorCost,supplyPrice:this.calculatedValues.supplyPrice,contractorProfit:this.calculatedValues.contractorProfit,shippingCost:t.shippingCost||0,laborCost:t.laborCost||0,transportStorageFee:t.transportStorageFee||0,loadingUnloadingFee:t.loadingUnloadingFee||0,usanceInterest:t.usanceInterest||0,gompyoLaborCost:t.gompyoLaborCost||0,gompyoTransportStorageFee:t.gompyoTransportStorageFee||0,gompyoLoadingUnloadingFee:t.gompyoLoadingUnloadingFee||0}}mapAndCalculateExpense(e){return{id:e.id,itemsId:e.itemsId,shipmentId:e.shipmentId,containerCount:e.containerCount,contractTon:e.contractTon,customsClearanceDate:e.customsClearanceDate,quarantineDate:e.quarantineDate,warehouseEntryDate:e.warehouseEntryDate,progressStatus:e.progressStatus,totalCost:this.calculatedValues.totalCost,totalCostPerKg:this.calculatedValues.totalCostPerKg,sellingPrice:e.sellingPrice||0,sellingPriceWholesale:e.sellingPriceWholesale||0,sellingPriceRetail:e.sellingPriceRetail||0,margin:this.calculatedValues.margin,totalProfit:this.calculatedValues.totalProfit,purchaseFeeRate:e.purchaseFeeRate,remark:e.remark,createdAt:e.createdAt,updatedAt:e.updatedAt}}calculate(){return{importer:this.data.importer,contract:this.mapContract(this.data.contract,this.data.shipment,this.data.importer),payment:this.mapPayment(this.data.payment),costDetail:this.mapAndCalculateCostDetail(this.data.costDetail),cost:this.mapAndCalculateContractAmount(this.data.cargo,this.data.cost),cargo:this.mapAndCalculateExpense(this.data.cargo),item:this.mapItem(this.data.item),shipment:this.mapShipment(this.data.shipment)}}constructor(e){this.data=e,this.calculationStrategy=W.createStrategy(e.importer),this.calculatedValues=this.calculateValues()}}let V=(0,P.createServerReference)("7095ef2eadccbf256ebac5f8e468ff97678f9f2dbc",P.callServer,void 0,P.findSourceMapURL,"createNewShipmentAndUpdateCargo");var B=a(37342),H=a(93976);let G=(0,E.eU)(null),K=(0,E.eU)(null),q=(0,E.eU)(e=>{let t=e(G);return t?new z(t).calculate():null},async(e,t,a)=>{try{let e=await U(a);t(G,e)}catch(e){throw console.error("화물 정보 조회 중 오류 발생:",e),e}}),X=(0,E.eU)(!1),Q=(0,E.eU)(null);(0,E.eU)(null,(e,t)=>{let a=e(G);a&&t(K,JSON.parse(JSON.stringify(a)))});let J=(0,E.eU)(null,(e,t)=>{let a=e(K);a&&(t(G,a),t(K,null))}),Y=(0,E.eU)(null,async(e,t,a)=>{let{formData:r,cargoId:n,option:l}=a,o=e(G);if(o)try{let e={};if(e.cargo={...o.cargo,...r},e.costDetail={...o.costDetail,...r},e.cost={...o.cost,...r},e.payment={...o.payment,...r},e.contract={...o.contract,...r},e.item={...o.item,...r},e.importer={...o.importer,...r},r.blNumber&&"single"===l&&r.blNumber!==o.shipment.blNumber){let t=await V(n,r,l);e.shipment={...t},t&&(e.cargo.shipmentId=t.id)}else e.shipment={...o.shipment,...r};e.importer.importerName!==o.importer.importerName&&(0,B.L)(n,o.importer.importerName,e.importer.importerName),e.cargo.contractTon!==o.cargo.contractTon&&(e.cargo.containerCount=Math.ceil(Number(e.cargo.contractTon)/24),await (0,H.k)(n,e.importer.importerCode,Number(e.cargo.contractTon)-Number(o.cargo.contractTon)));let a=await L(n,e);t(G,a)}catch(e){throw e}}),Z=(0,P.createServerReference)("40dbba5f5914048ddecd1259d673e82f2f643b7c51",P.callServer,void 0,P.findSourceMapURL,"addChangeLog"),$=(0,P.createServerReference)("00555b71b42034e579b9b02bbc8e57f3215655c677",P.callServer,void 0,P.findSourceMapURL,"getUser"),ee=(0,E.eU)(null),et=(0,E.eU)(async e=>{let t=e(ee);if(t)return t;let a=await $();return a?{id:a.id,email:a.email,name:a.name,planColumnOrder:a.planColumnOrder||"",shipmentColumnOrder:a.shipmentColumnOrder||""}:null},async(e,t,a)=>{t(ee,a)});function ea(e){let{title:t,fields:a,data:o={},onSave:i,onFieldChange:c,className:C=""}=e,[T,S]=(0,s.useState)(!1),[D,N]=(0,s.useState)({}),[w,F]=(0,s.useState)({}),[,R]=(0,k.fp)(J),[E]=(0,k.fp)(et),[P]=(0,k.fp)(q);(0,s.useEffect)(()=>{N(Object.entries(o).reduce((e,t)=>{var a;let[r,n]=t;return e[r]=null!==(a=null==n?void 0:n.toString())&&void 0!==a?a:null,e},{}))},[o]);let U=(e,t)=>{if(null===e)return null;switch(t){case"number":return""===e?null:Number(e);case"date":return""===e?null:e;default:return e}},L=e=>{let t=["계약 번호","계약 일자","공급 업체","수입처","품목","품종","포장단위"],a={};return e.forEach(e=>{let r;switch(e.valueType){case"number":r=f.z.string({message:"숫자를 입력해주세요"});break;case"date":r=f.z.coerce.string().min(1,"날짜를 선택해주세요.").default(new Date().toISOString().split("T")[0]);break;default:r=f.z.string({message:"값을 입력해주세요"})}t.includes(e.label)||(r=r.optional()),a[e.name]=r}),f.z.object(a)},I=async(e,t)=>{let r=[];a.forEach(a=>{let n=e[a.name],l=t[a.name];if(n!==(null==l?void 0:l.toString())){var o,i;r.push({field:a.label,from:null!==(o=null==n?void 0:n.toString())&&void 0!==o?o:"",to:null!==(i=null==l?void 0:l.toString())&&void 0!==i?i:""})}}),r.length>0&&(console.log("changes",r),console.log("currentUser",E),await Z({targetId:(null==P?void 0:P.cargo.id)||"",user:(null==E?void 0:E.name)||"",changes:r}))},M=async()=>{let e=L(a).safeParse(D);if(!e.success){let t={};e.error.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),F(t);return}if(F({}),i){let e=a.reduce((e,t)=>{let a=D[t.name];return e[t.name]=U(a,t.valueType),e},{}),t=Object.entries(o).reduce((e,t)=>{var a;let[r,n]=t;return e[r]=null!==(a=null==n?void 0:n.toString())&&void 0!==a?a:null,e},{});await I(t,e),i(e)}S(!1)},O=e=>t=>{let r=t.target.value||null,n=a.find(t=>t.name===e);(null==n?void 0:n.valueType)==="number"&&r&&(r=r.replace(/[^0-9.-]/g,"")),N(t=>({...t,[e]:r})),c&&c(e,r)},_=e=>{var t;if("select"===e.type&&e.options)return(0,r.jsx)(d.A,{fullWidth:!0,disabled:!T||e.disabled,children:(0,r.jsx)(u.A,{freeSolo:!0,options:e.options,getOptionLabel:e=>"string"==typeof e?e:e.label,value:e.options.find(t=>t.value===D[e.name])||D[e.name]||null,onChange:(t,a)=>{let r="string"==typeof a?a:(null==a?void 0:a.value)||null;N(t=>({...t,[e.name]:r})),c&&c(e.name,r)},onInputChange:(t,a)=>{N(t=>({...t,[e.name]:a})),c&&c(e.name,a)},disabled:!T||e.disabled,renderInput:t=>(0,r.jsx)(m.A,{...t,label:e.label,error:!!w[e.name],helperText:w[e.name],sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(145, 158, 171, 0.2)"},"&.Mui-disabled":{backgroundColor:"rgba(0, 0, 0, 0.02)","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(0, 0, 0, 0.3)",borderWidth:"1px"},"& .MuiInputBase-input":{color:"rgba(0, 0, 0, 0.6)",WebkitTextFillColor:"rgba(0, 0, 0, 0.6)"}}}}}),renderOption:(e,t)=>{let{key:a,...n}=e;return(0,r.jsx)("li",{...n,children:"string"==typeof t?t:t.label},a)}})});let a=null!==(t=D[e.name])&&void 0!==t?t:"";"number"===e.valueType&&a&&(a=e.removeDecimal?j(a):A(a));let n={fullWidth:!0,label:e.label,variant:"outlined",placeholder:e.placeholder||"입력해주세요.",className:"bg-background-paper",disabled:!T||e.disabled,value:a,type:"textarea"===e.type?void 0:e.type,onChange:O(e.name),error:!!w[e.name],helperText:w[e.name],sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(145, 158, 171, 0.2)"},"&.Mui-disabled":{backgroundColor:"rgba(0, 0, 0, 0.02)","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(0, 0, 0, 0.3)",borderWidth:"1px"},"& .MuiInputBase-input":{color:"rgba(0, 0, 0, 0.6)",WebkitTextFillColor:"rgba(0, 0, 0, 0.6)"}}}},InputLabelProps:"date"===e.type?{shrink:!0}:void 0,InputProps:e.endAdornment?{endAdornment:(0,r.jsx)(p.A,{sx:{color:"inherit","& .MuiTypography-root":{color:"inherit"}},position:"end",children:e.endAdornment})}:void 0,multiline:"textarea"===e.type,rows:"textarea"===e.type?4:void 0};return(0,r.jsx)(m.A,{...n})};return(0,r.jsxs)(g.A,{className:"bg-background-paper rounded-2xl shadow-[0px_12px_24px_-4px_rgba(145,158,171,0.12)] shadow-[0px_0px_2px_0px_rgba(145,158,171,0.20)] inline-flex flex-col justify-start items-end ".concat(C),children:[(0,r.jsxs)(n.A,{className:"self-stretch pl-6 pr-4 py-6 border-b border-[rgba(145,158,171,0.2)] flex justify-between items-center",children:[(0,r.jsx)(l.A,{variant:"h6",className:"text-text-primary font-semibold",children:t}),(0,r.jsx)(n.A,{children:T?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.A,{onClick:M,color:"primary",children:(0,r.jsx)(v.A,{})}),(0,r.jsx)(h.A,{onClick:()=>{N(Object.entries(o).reduce((e,t)=>{var a;let[r,n]=t;return e[r]=null!==(a=null==n?void 0:n.toString())&&void 0!==a?a:null,e},{})),F({}),S(!1),R()},color:"primary",children:(0,r.jsx)(b.A,{})})]}):(0,r.jsx)(h.A,{onClick:()=>S(!0),children:(0,r.jsx)(y.A,{className:"text-action-disabled opacity-80"})})})]}),(0,r.jsx)(n.A,{className:"self-stretch p-6",children:(0,r.jsx)(x.Ay,{container:!0,spacing:3,children:a.map(e=>(0,r.jsx)(x.Ay,{item:!0,xs:e.gridSize||12,children:_(e)},e.name))})})]})}var er=a(80835),en=a(40309);function el(){let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)({title:"",description:""}),l=()=>{t(!1)};return{toast:e=>{n(e),t(!0)},ToastComponent:()=>(0,r.jsx)(er.A,{open:e,autoHideDuration:2e3,onClose:l,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,r.jsxs)(en.A,{onClose:l,severity:"destructive"===a.variant?"error":"success",sx:{width:"100%"},children:[(0,r.jsx)("div",{className:"font-semibold",children:a.title}),(0,r.jsx)("div",{children:a.description})]})})}}var eo=a(9285),ei=a(71599);let es=e=>{let{open:t,onClose:a,onSelect:o}=e;return(0,r.jsx)(eo.A,{open:t,onClose:a,"aria-labelledby":"bl-number-update-modal","aria-describedby":"bl-number-update-modal-description",children:(0,r.jsxs)(n.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2},children:[(0,r.jsx)(l.A,{id:"bl-number-update-modal",variant:"h6",component:"h2",sx:{mb:2},children:"B/L 번호 업데이트"}),(0,r.jsx)(l.A,{id:"bl-number-update-modal-description",sx:{mb:3},children:"B/L 번호를 어떻게 업데이트하시겠습니까?"}),(0,r.jsxs)(n.A,{sx:{display:"flex",gap:2,justifyContent:"center"},children:[(0,r.jsx)(ei.A,{variant:"outlined",onClick:()=>o("all"),children:"전체 계약 업데이트"}),(0,r.jsx)(ei.A,{variant:"contained",onClick:()=>o("single"),children:"특정 화물 업데이트"})]})]})})};var ec=a(69850);function ed(e){var t,a,l;let{cargoId:o}=e,[i,d]=(0,k.fp)(q),[u,m]=(0,k.fp)(X),p=(0,k.Xr)(Q),[,g]=(0,k.fp)(Y),{toast:h,ToastComponent:x}=el(),[v,b]=(0,s.useState)(!1),[y,f]=(0,s.useState)(null),[A,j]=(0,s.useState)(""),[C,E]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{E(await (0,ec.F)())})()},[]),(0,s.useEffect)(()=>{console.log(i)},[i]);let[P,U]=(0,s.useState)(()=>(console.log("Initializing currentPaymentFields"),S));(0,s.useEffect)(()=>{var e,t;console.log("mappedData effect triggered, paymentMethod:",null==i?void 0:null===(e=i.payment)||void 0===e?void 0:e.paymentMethod),(null==i?void 0:null===(t=i.payment)||void 0===t?void 0:t.paymentMethod)&&j(i.payment.paymentMethod)},[null==i?void 0:null===(t=i.payment)||void 0===t?void 0:t.paymentMethod]);let L=e=>{if(console.log("handlePaymentMethodChange called with:",e),j(e),!e){U(S);return}U([...S,...D["L/C at sight"===e?"L/C":"Payment Usance"===e?"Usance":e]||[]])},I={...null==i?void 0:i.payment,paymentMethod:A||(null==i?void 0:null===(a=i.payment)||void 0===a?void 0:a.paymentMethod),exchangeRate:null==i?void 0:null===(l=i.costDetail)||void 0===l?void 0:l.exchangeRate};(0,s.useEffect)(()=>{!async function(){if(i){m(!1);return}try{m(!0),await d(o)}catch(e){p(e instanceof Error?e.message:"데이터를 불러오는 중 오류가 발생했습니다.")}finally{m(!1)}}()},[o,i,d,m,p]);let M=async e=>{if(!i)return;"T/T"===e.paymentMethod&&(e.totalContractAmount=(i.costDetail.unitPrice||0)*(i.costDetail.exchangeRate||0)*(i.cargo.contractTon||0));let t={...e};if(t.blNumber&&t.blNumber!==i.contract.blNumber){f(t),b(!0);return}try{await g({formData:t,cargoId:o}),await d(o),h({title:"성공",description:"데이터가 성공적으로 저장되었습니다."})}catch(e){h({title:"오류",description:e instanceof Error?e.message:"데이터 저장 중 오류가 발생했습니다.",variant:"destructive"})}},O=async e=>{if(b(!1),y){try{await g({formData:y,cargoId:o,option:e}),await d(o),h({title:"성공",description:"데이터가 성공적으로 저장되었습니다."})}catch(e){h({title:"오류",description:e instanceof Error?e.message:"데이터 저장 중 오류가 발생했습니다.",variant:"destructive"})}f(null)}};return u?(0,r.jsx)(n.A,{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(c.A,{})}):i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x,{}),(0,r.jsx)(es,{open:v,onClose:()=>b(!1),onSelect:O}),(0,r.jsxs)(n.A,{className:"w-full mx-auto inline-flex justify-start items-start gap-6 flex-wrap content-start",children:[(0,r.jsx)(ea,{title:"계약 정보",fields:T(C),className:"w-full",data:{...i.contract,contractTon:i.cargo.contractTon},onSave:e=>M(e)}),(0,r.jsx)(ea,{title:"결제 정보",fields:P,className:"w-full",data:I,onSave:e=>{M(e)},onFieldChange:(e,t)=>{"paymentMethod"===e&&L(t)}}),(0,r.jsx)(ea,{title:"원가 정보",fields:N,className:"w-full md:w-[calc(50%-12px)]",data:{...i.costDetail,purchaseFeeRate:i.cargo.purchaseFeeRate},onSave:e=>M(e)}),(0,r.jsx)(ea,{title:"수입회사 금액 정보",fields:w,className:"w-full md:w-[calc(50%-12px)]",data:i.cost,onSave:e=>M(e)}),(0,r.jsx)(ea,{title:"곰표 비용 정보",fields:R,className:"w-full",data:i.cost,onSave:e=>M(e)}),(0,r.jsx)(ea,{title:"비용 정보",fields:F,className:"w-full",data:i.cargo,onSave:e=>M(e)})]})]}):(0,r.jsx)("div",{})}let eu=[{name:"itemName",label:"품목명",gridSize:6,valueType:"string"},{name:"itemVariety",label:"품종",gridSize:6,valueType:"string"},{name:"originCountry",label:"원산지",gridSize:12,valueType:"string"},{name:"hsCode",label:"HS Code",gridSize:12,valueType:"string"}],em=[{name:"packingUnit",label:"포장 단위",gridSize:12,type:"select",valueType:"string",options:[{value:"25kg",label:"25kg"},{value:"1.2ton",label:"1.2ton"},{value:"bulk",label:"bulk"}]},{name:"contractTon",label:"계약 톤수",gridSize:12,endAdornment:"톤",valueType:"number",type:"number"},{name:"containerCount",label:"컨테이너 개수",gridSize:12,endAdornment:"개",valueType:"number",type:"number"}],ep=[{name:"shippingCompany",label:"선사",gridSize:12,valueType:"string"},{name:"customsClearanceDate",label:"통관일",gridSize:12,valueType:"string",type:"date"},{name:"warehouseEntryDate",label:"입고일",gridSize:12,valueType:"string",type:"date"},{name:"quarantineDate",label:"검역일",gridSize:12,valueType:"string",type:"date"},{name:"palletOrderDate",label:"파레트 주문일",gridSize:12,valueType:"string",type:"date"},{name:"palletType",label:"파레트 종류",gridSize:12,valueType:"string"}],eg={name:"remark",label:"비고",gridSize:12,valueType:"string",type:"textarea"},eh=e=>e?Object.entries(e).reduce((e,t)=>{let[a,r]=t;return null==r?e[a]="":e[a]=r,e},{}):{},ex=(e,t)=>({packingUnit:(null==e?void 0:e.packingUnit)||null,contractTon:(null==t?void 0:t.contractTon)||null,containerCount:(null==t?void 0:t.containerCount)||null}),ev=(e,t)=>({palletOrderDate:(null==t?void 0:t.palletOrderDate)||null,palletType:(null==t?void 0:t.palletType)||null,shippingCompany:(null==t?void 0:t.shippingCompany)||null,customsClearanceDate:(null==e?void 0:e.customsClearanceDate)||null,warehouseEntryDate:(null==e?void 0:e.warehouseEntryDate)||null,quarantineDate:(null==e?void 0:e.quarantineDate)||null});function eb(e){var t;let{cargoId:a}=e,[l]=(0,k.fp)(q),[o]=(0,k.fp)(X),[,i]=(0,k.fp)(Y),{toast:s,ToastComponent:d}=el(),u=async e=>{if(l)try{await i({formData:e,cargoId:a}),s({title:"성공",description:"데이터가 성공적으로 저장되었습니다."})}catch(e){s({title:"오류",description:e instanceof Error?e.message:"데이터 저장 중 오류가 발생했습니다.",variant:"destructive"})}};if(o)return(0,r.jsx)(n.A,{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(c.A,{})});if(!l)return(0,r.jsx)("div",{});let m=eh(l.item),p=eh(ex(l.item,l.cargo)),g=eh(ev(l.cargo,l.shipment)),h={remark:(null===(t=l.cargo)||void 0===t?void 0:t.remark)||""};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsx)(ea,{title:"상품 정보",fields:eu,data:m,onSave:e=>u(e)}),(0,r.jsx)(ea,{title:"포장 정보",fields:em,data:p,onSave:e=>u(e)}),(0,r.jsx)(ea,{title:"상태 정보",fields:ep,data:g,onSave:e=>u(e)}),(0,r.jsx)(ea,{title:"비고",fields:[eg],data:h,onSave:e=>u(e)})]}),(0,r.jsx)(d,{})]})}var ey=a(79508);let ef=(0,P.createServerReference)("60aea33a02f3c68619e1c2a7ca24a01c78829a7fde",P.callServer,void 0,P.findSourceMapURL,"updateCargoStatusInfo");var eA=a(40017),ej=a(57797),eC=a(89085),eT=a(33096),eS=a(68116),eD=a(83675),eN=a(70006),ew=a(57598),eF=a(40404),eR=a(39390),ek=a(58361),eE=a(43828),eP=a(81143),eU=a(17341),eL=a(73244);let eI=(0,P.createServerReference)("6013bdf9d826847e61ea5ef60628366f103542032e",P.callServer,void 0,P.findSourceMapURL,"getDocuments"),eM=(0,P.createServerReference)("781ce36a0be249e5a065e0694b358408aa37ef9f9e",P.callServer,void 0,P.findSourceMapURL,"getUploadPresignedUrl"),eO=(0,P.createServerReference)("4064cff9274afc706b451554d343ccb896b45e26b0",P.callServer,void 0,P.findSourceMapURL,"saveDocument"),e_=(0,P.createServerReference)("4065de5d59cf80d610016c6dc484304f1fe5a020e1",P.callServer,void 0,P.findSourceMapURL,"getSignedDownloadUrl"),eW=(0,P.createServerReference)("6043fe1abbee92ff23cadcdb8ac086b6806d2182c4",P.callServer,void 0,P.findSourceMapURL,"deleteDocument"),ez=(0,E.eU)({}),eV=(0,E.eU)(e=>e(ez),(e,t,a)=>{let{relatedId:r,category:n,documents:l,isLoading:o}=a,i=e(ez),s="".concat(r,"-").concat(n);t(ez,{...i,[s]:{documents:l,isLoading:o,lastFetched:Date.now()}})}),eB=(0,E.eU)(e=>{let t=e(ez);return(e,a)=>{var r;return(null===(r=t["".concat(e,"-").concat(a)])||void 0===r?void 0:r.documents)||[]}}),eH=(0,E.eU)(e=>{let t=e(ez);return(e,a)=>{var r;return(null===(r=t["".concat(e,"-").concat(a)])||void 0===r?void 0:r.isLoading)||!1}});var eG=a(75746);function eK(e){let{open:t,onClose:a,onUpload:o,category:i}=e,[c,d]=(0,s.useState)(!1),[u,m]=(0,s.useState)([]),[p,g]=(0,s.useState)(!1),[x,v]=(0,s.useState)({}),b=()=>{m([]),g(!1),v({})},y=(0,s.useCallback)(e=>{e.preventDefault(),d(!0)},[]),f=(0,s.useCallback)(e=>{e.preventDefault(),d(!1)},[]),A=(0,s.useCallback)(e=>{e.preventDefault(),d(!1);let t=Array.from(e.dataTransfer.files);t.length>0&&m(e=>[...e,...t])},[]),j=e=>{m(t=>t.filter((t,a)=>a!==e))},C=()=>{p||(b(),a())};return(0,r.jsxs)(eA.A,{open:t,onClose:C,maxWidth:"sm",fullWidth:!0,children:[(0,r.jsx)(ej.A,{children:"contract"===i?"계약 관련 서류 업로드":"선적 관련 서류 업로드"}),(0,r.jsxs)(eC.A,{children:[(0,r.jsxs)(n.A,{className:"mt-4 p-8 border-2 border-dashed rounded-lg text-center ".concat(c?"border-primary bg-primary/5":"border-gray-300"),onDragOver:y,onDragLeave:f,onDrop:A,children:[(0,r.jsx)(eE.A,{className:"text-4xl text-gray-400 mb-4"}),(0,r.jsxs)(l.A,{variant:"body1",sx:{mb:2},children:["파일을 드래그하여 업로드하거나",(0,r.jsx)("br",{}),"파일 선택 버튼을 클릭해 주세요."]}),(0,r.jsxs)(eG.A,{variant:"outline",component:"label",disabled:p,children:["파일 선택",(0,r.jsx)("input",{type:"file",multiple:!0,hidden:!0,onChange:e=>{let t=Array.from(e.target.files||[]);t.length>0&&m(e=>[...e,...t])},disabled:p})]})]}),u.length>0&&(0,r.jsxs)(n.A,{className:"mt-4",children:[(0,r.jsx)(l.A,{variant:"subtitle2",className:"mb-2",children:"선택된 파일 목록"}),(0,r.jsx)(eT.A,{className:"max-h-48 overflow-y-auto",children:u.map((e,t)=>(0,r.jsx)(eS.Ay,{secondaryAction:(0,r.jsx)(h.A,{edge:"end","aria-label":"delete",onClick:()=>j(t),disabled:p,children:(0,r.jsx)(eP.A,{})}),children:(0,r.jsx)(eD.A,{primary:e.name,secondary:"".concat((e.size/1024).toFixed(2)," KB")})},t))})]}),p&&u.length>0&&(0,r.jsxs)(n.A,{className:"mt-4",children:[(0,r.jsx)(l.A,{variant:"subtitle2",className:"mb-2",children:"업로드 진행 상태"}),(0,r.jsx)(eT.A,{className:"max-h-48 overflow-y-auto",children:u.map((e,t)=>(0,r.jsx)(eS.Ay,{children:(0,r.jsxs)(n.A,{sx:{width:"100%"},children:[(0,r.jsx)(l.A,{variant:"body2",children:e.name}),(0,r.jsx)(eN.A,{variant:"determinate",value:x[e.name]||0,sx:{mt:1,height:8,borderRadius:4}}),(0,r.jsxs)(l.A,{variant:"caption",sx:{mt:.5,display:"block"},children:[x[e.name]||0,"%"]})]})},t))})]})]}),(0,r.jsxs)(ew.A,{children:[(0,r.jsx)(eG.A,{variant:"outline",onClick:C,disabled:p,children:"취소"}),(0,r.jsx)(eG.A,{variant:"primary",onClick:()=>{u.length>0&&(g(!0),v(u.reduce((e,t)=>(e[t.name]=0,e),{})),o(u,i,(e,t)=>{v(r=>{let n={...r,[e]:t};return 100===t&&Object.values(n).every(e=>100===e)&&setTimeout(()=>{b(),a()},1e3),n})}))},disabled:0===u.length||p,children:p?"업로드 중...":"업로드 (".concat(u.length,")")})]})]})}function eq(e){let{cargoId:t}=e,[a,o]=(0,s.useState)("contract"),[d,u]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[x,v]=(0,s.useState)(null),{toast:b}=el(),[,y]=(0,k.fp)(eV),f=(0,k.md)(eB),A=(0,k.md)(eH),[j]=(0,k.fp)(q),[C,T]=(0,s.useState)(""),[S,D]=(0,s.useState)("");(0,s.useEffect)(()=>{var e,t;if(j){if(T((null===(e=j.contract)||void 0===e?void 0:e.id)||""),D((null===(t=j.shipment)||void 0===t?void 0:t.id)||""),!C&&!S){b({title:"오류",description:"관련 문서를 찾을 수 없습니다.",variant:"destructive"});return}F()}},[j]);let N=f("contract"===a?C:S,a),w=A("contract"===a?C:S,a);(0,s.useEffect)(()=>{F()},[t]);let F=async()=>{for(let a of["contract","shipment"]){var e,t;let r="contract"===a?null==j?void 0:null===(e=j.contract)||void 0===e?void 0:e.id:null==j?void 0:null===(t=j.shipment)||void 0===t?void 0:t.id;if(!r){b({title:"오류",description:"관련 문서를 찾을 수 없습니다.",variant:"destructive"});return}try{y({relatedId:r,category:a,documents:[],isLoading:!0});let e=await eI(r,a);e.success&&e.documents?y({relatedId:r,category:a,documents:e.documents,isLoading:!1}):(console.error("".concat(a," 문서 목록 조회 실패:"),e.error),b({title:"오류",description:e.error||"문서 목록을 불러오는데 실패했습니다.",variant:"destructive"}),y({relatedId:r,category:a,documents:[],isLoading:!1}))}catch(e){console.error("".concat(a," 문서 목록 조회 중 오류 발생:"),e),b({title:"오류",description:"문서 목록을 불러오는 중 오류가 발생했습니다.",variant:"destructive"}),y({relatedId:r,category:a,documents:[],isLoading:!1})}}},R=async(e,t,a)=>{try{var r,n;let l="contract"===t?null==j?void 0:null===(r=j.contract)||void 0===r?void 0:r.id:null==j?void 0:null===(n=j.shipment)||void 0===n?void 0:n.id;if(!l){b({title:"오류",description:"관련 문서를 찾을 수 없습니다.",variant:"destructive"});return}let o=e.map(async e=>{let r=await eM(e.name,e.type,l,t);if(!r.success||!r.url)throw Error("파일 ".concat(e.name,"의 Presigned URL 생성에 실패했습니다."));if(await new Promise((t,n)=>{let l=new XMLHttpRequest;l.upload.addEventListener("progress",t=>{if(t.lengthComputable){let r=Math.round(t.loaded/t.total*100);a(e.name,r)}}),l.open("PUT",r.url),l.setRequestHeader("Content-Type",e.type),l.onload=()=>{l.status>=200&&l.status<300?(a(e.name,100),t()):n(Error("업로드 실패: ".concat(l.statusText)))},l.onerror=()=>n(Error("업로드 중 네트워크 오류 발생")),l.send(e)}),!(await eO({name:e.name,type:e.type,url:r.fileUrl,relatedId:l,category:t})).success)throw Error("파일 ".concat(e.name,"의 정보 저장에 실패했습니다."))});await Promise.all(o),await F(),b({title:"성공",description:"".concat(e.length,"개의 파일이 업로드되었습니다.")}),setTimeout(()=>{u(!1)},1e3)}catch(e){console.error("파일 업로드 중 오류 발생:",e),b({title:"오류",description:e instanceof Error?e.message:"파일 업로드 중 오류가 발생했습니다.",variant:"destructive"})}},E=async e=>{try{let t=await e_(e.id);t.success?window.open(t.url,"_blank"):b({title:"오류",description:t.error||"파일 다운로드에 실패했습니다.",variant:"destructive"})}catch(e){console.error("파일 다운로드 중 오류 발생:",e),b({title:"오류",description:"파일 다운로드 중 오류가 발생했습니다.",variant:"destructive"})}},P=async e=>{v(e),p(!0)},U=async()=>{if(x)try{let e=await eW(x.id,t);e.success?(p(!1),v(null),await F(),b({title:"성공",description:"문서가 삭제되었습니다."})):b({title:"오류",description:e.error||"문서 삭제에 실패했습니다.",variant:"destructive"})}catch(e){console.error("문서 삭제 중 오류 발생:",e),b({title:"오류",description:"문서 삭제 중 오류가 발생했습니다.",variant:"destructive"})}},L=()=>{p(!1),v(null)},I=N.filter(e=>e.documentCategory===a);return w?(0,r.jsx)(n.A,{className:"flex justify-center items-center h-full",children:(0,r.jsx)(c.A,{})}):(0,r.jsxs)(n.A,{className:"space-y-6",children:[(0,r.jsx)(g.A,{className:"p-4",children:(0,r.jsxs)(i.A,{spacing:3,children:[(0,r.jsxs)(i.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,r.jsx)(l.A,{variant:"h6",className:"font-bold",children:"서류 관리"}),(0,r.jsx)(eG.A,{variant:"primary",startIcon:(0,r.jsx)(eU.A,{}),onClick:()=>u(!0),children:"contract"===a?"계약 관련 서류 업로드":"선적 관련 서류 업로드"})]}),(0,r.jsxs)(eF.A,{value:a,onChange:(e,t)=>o(t),className:"border-b",children:[(0,r.jsx)(eR.A,{label:"계약 관련 서류",value:"contract"}),(0,r.jsx)(eR.A,{label:"선적 관련 서류",value:"shipment"})]}),(0,r.jsx)(eT.A,{children:0===I.length?(0,r.jsx)(eS.Ay,{children:(0,r.jsx)(eD.A,{primary:"등록된 ".concat("contract"===a?"계약":"선적"," 관련 서류가 없습니다.")})}):I.map(e=>(0,r.jsx)(eS.Ay,{divider:!0,secondaryAction:(0,r.jsxs)(i.A,{direction:"row",spacing:1,children:[(0,r.jsx)(h.A,{edge:"end","aria-label":"download",onClick:()=>E(e),children:(0,r.jsx)(eL.A,{})}),(0,r.jsx)(h.A,{edge:"end","aria-label":"delete",onClick:()=>P(e),children:(0,r.jsx)(eP.A,{})})]}),children:(0,r.jsx)(eD.A,{primary:e.documentName,secondary:new Date(e.uploadDate).toLocaleDateString()})},e.id))})]})}),(0,r.jsx)(eK,{open:d,onClose:()=>u(!1),onUpload:R,category:a}),(0,r.jsxs)(eA.A,{open:m,onClose:L,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,r.jsx)(ej.A,{id:"delete-dialog-title",children:"문서 삭제 확인"}),(0,r.jsx)(eC.A,{children:(0,r.jsxs)(ek.A,{id:"delete-dialog-description",children:[null==x?void 0:x.documentName," 문서를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."]})}),(0,r.jsxs)(ew.A,{children:[(0,r.jsx)(eG.A,{variant:"outline",onClick:L,children:"취소"}),(0,r.jsx)(eG.A,{variant:"danger",onClick:U,children:"삭제"})]})]})]})}var eX=a(67394),eQ=a(36429),eJ=a(87418),eY=a(67446),eZ=a(45278),e$=a(48805),e0=a(52511);function e1(e){let{item:t,onClick:a}=e,o=(0,eX.GP)((0,eQ.H)(t.created_at),"yyyy.MM.dd HH:mm",{locale:eJ.ko}),i="status"===t.type?"#e8f5e9":"change"===t.type?"#fff8e1":"#e3f2fd",s="status"===t.type?"#c8e6c9":"change"===t.type?"#ffecb3":"#bbdefb",c="status"===t.type?"#43a047":"change"===t.type?"#f57c00":"#1976d2";return(0,r.jsxs)(eY.A,{elevation:0,sx:{position:"relative",display:"flex",alignItems:"flex-start",padding:2,paddingTop:{xs:2.5,sm:2},paddingLeft:{xs:3,sm:4.5},borderRadius:2,border:"1px solid #e0e0e0",backgroundColor:i,cursor:"pointer",transition:"all 0.2s","&:hover":{boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}},onClick:()=>{a&&a(t)},children:[(0,r.jsx)(n.A,{sx:{position:"absolute",left:{xs:12,sm:16},top:{xs:16,sm:18}},children:(0,r.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:28,height:28,borderRadius:"50%",backgroundColor:s,color:c,boxShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:(0,r.jsx)(e$.A,{sx:{width:18,height:18}})})}),(0,r.jsxs)(n.A,{sx:{flexGrow:1,minWidth:0,paddingLeft:{xs:1.5,sm:2}},children:["change"===t.type?(0,r.jsx)(e2,{item:t}):"status"===t.type?(0,r.jsx)(e6,{item:t}):(0,r.jsx)(e5,{item:t}),(0,r.jsxs)(n.A,{sx:{mt:1,display:"flex",alignItems:"center",fontSize:"0.75rem",color:"text.secondary"},children:[(0,r.jsx)(e0.A,{sx:{mr:.5,width:12,height:12}}),(0,r.jsx)(l.A,{variant:"caption",children:o})]})]})]})}function e2(e){let{item:t}=e;return(0,r.jsxs)(l.A,{variant:"body2",sx:{lineHeight:1.5},children:[(0,r.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.user}),(0,r.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","님이"," "]}),(0,r.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.field}),(0,r.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:["을(를)"," "]}),(0,r.jsx)(l.A,{component:"span",sx:{fontWeight:500,textDecoration:"line-through",color:"grey.500"},children:t.from}),(0,r.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","→"," "]}),(0,r.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.to}),(0,r.jsx)(l.A,{component:"span",sx:{color:"text.secondary"},children:"으로 변경"})]})}function e5(e){let{item:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.A,{variant:"body2",sx:{lineHeight:1.5,mb:.5},children:[(0,r.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.user}),(0,r.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","님이"," "]}),(0,r.jsxs)(l.A,{component:"span",sx:{fontWeight:500},children:[t.changes.length,"개 항목"]}),(0,r.jsx)(l.A,{component:"span",sx:{color:"text.secondary"},children:"을 동시에 변경"})]}),(0,r.jsx)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:.5},children:t.changes.map((e,t)=>(0,r.jsx)(eZ.A,{label:e.field,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20,backgroundColor:"rgba(25, 118, 210, 0.08)",borderColor:"rgba(25, 118, 210, 0.3)"}},t))})]})}function e6(e){let{item:t}=e;return(0,r.jsxs)(l.A,{variant:"body2",sx:{lineHeight:1.5},children:[(0,r.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:["화물 상태가"," "]}),(0,r.jsxs)(l.A,{component:"span",sx:{fontWeight:500},children:["'",t.status,"'"]}),(0,r.jsx)(l.A,{component:"span",sx:{color:"text.secondary"},children:"로 변경됨"}),"시스템 처리"!==t.user&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","("]}),(0,r.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.user}),(0,r.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","님)"]})]})]})}var e4=a(18686),e3=a(6309),e8=a(89189);function e7(e){let{date:t}=e,a=(0,eQ.H)(t),o=(0,eX.GP)(a,"yyyy년 MM월 dd일",{locale:eJ.ko});return(0,e4.c)(a)?o="오늘":(0,e3.P)(a)&&(o="어제"),(0,r.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",py:1.5},children:[(0,r.jsx)(e8.A,{sx:{flexGrow:1}}),(0,r.jsx)(l.A,{variant:"body2",sx:{px:2,fontWeight:500,color:"text.secondary"},children:o}),(0,r.jsx)(e8.A,{sx:{flexGrow:1}})]})}function e9(e){let{item:t,open:a,onOpenChange:o}=e;if(!t)return null;let i=(0,eX.GP)((0,eQ.H)(t.created_at),"yyyy년 MM월 dd일 HH시 mm분",{locale:eJ.ko}),s="change"===t.type,c="multi-change"===t.type;return(0,r.jsxs)(eA.A,{open:a,onClose:()=>{o(!1)},maxWidth:"sm",fullWidth:!0,children:[(0,r.jsx)(ej.A,{children:s?"변경 이력 상세":c?"다중 변경 이력 상세":"상태 변경 상세"}),(0,r.jsxs)(eC.A,{children:[(0,r.jsxs)(ek.A,{style:{marginBottom:"16px"},children:[i,"에 기록된 이력입니다."]}),(0,r.jsxs)("div",{style:{padding:"16px 0"},children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{color:"#6c757d"},children:"작업자"}),(0,r.jsx)("span",{style:{fontWeight:500},children:t.user})]}),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{color:"#6c757d"},children:"변경 필드"}),(0,r.jsx)("span",{style:{fontWeight:500},children:t.field})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{color:"#6c757d"},children:"변경 전"}),(0,r.jsx)("span",{style:{fontWeight:500,color:"#dc3545"},children:t.from})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{color:"#6c757d"},children:"변경 후"}),(0,r.jsx)("span",{style:{fontWeight:500,color:"#198754"},children:t.to})]})]}),!s&&!c&&(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{color:"#6c757d"},children:"변경된 상태"}),(0,r.jsx)("span",{style:{fontWeight:500},children:t.status})]}),c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{color:"#6c757d"},children:"변경된 항목 수"}),(0,r.jsxs)("span",{style:{fontWeight:500},children:[t.changes.length,"개"]})]}),(0,r.jsxs)(n.A,{sx:{mt:2,mb:1},children:[(0,r.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"변경 상세 내역"}),(0,r.jsx)(eT.A,{disablePadding:!0,children:t.changes.map((e,t)=>(0,r.jsx)(eS.Ay,{sx:{py:1,px:2,mb:1,backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:1},children:(0,r.jsx)(eD.A,{primary:(0,r.jsx)(l.A,{variant:"body2",fontWeight:500,children:e.field}),secondary:(0,r.jsxs)(n.A,{sx:{mt:.5},children:[(0,r.jsx)(l.A,{variant:"body2",component:"span",sx:{display:"block",color:"error.main",textDecoration:"line-through"},children:e.from}),(0,r.jsx)(l.A,{variant:"body2",component:"span",sx:{display:"block",color:"success.main"},children:e.to})]})})},t))})]})]}),(0,r.jsx)(e8.A,{style:{margin:"16px 0"}}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{color:"#6c757d"},children:"기록 시간"}),(0,r.jsx)("span",{style:{fontWeight:500},children:i})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,r.jsx)("span",{style:{color:"#6c757d"},children:"기록 유형"}),(0,r.jsx)("span",{style:{fontWeight:500},children:s?"변경 이력":c?"다중 변경 이력":"상태 변경"})]})]})]})]})}var te=a(4906),tt=a(51403),ta=a(42776);function tr(e){let{items:t,showFilters:a=!0,showDateGroups:n=!0}=e,[l,o]=(0,s.useState)("all"),[i,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!1),m=(0,s.useMemo)(()=>"all"===l?t:t.filter(e=>e.type===l),[t,l]),p=(0,s.useMemo)(()=>{let e={};return m.forEach(t=>{let a=(0,tt.x)((0,ta.o)((0,eQ.H)(t.created_at)));e[a]||(e[a]=[]),e[a].push(t)}),Object.entries(e).sort((e,t)=>{let[a]=e,[r]=t;return new Date(r).getTime()-new Date(a).getTime()}).map(e=>{let[t,a]=e;return{date:t,items:a.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())}})},[m]),g=e=>{c(e),u(!0)};return 0===t.length?(0,r.jsx)("div",{style:{textAlign:"center",padding:"40px 0",color:"#6c757d"},children:"기록된 변경 이력이 없습니다."}):(0,r.jsxs)("div",{style:{width:"100%"},children:[a&&(0,r.jsx)("div",{style:{display:"flex",marginBottom:"16px",position:"sticky",top:0,backgroundColor:"transparent",zIndex:10,padding:"8px"},children:(0,r.jsxs)(te.A,{size:"small",variant:"outlined",children:[(0,r.jsx)(eG.A,{variant:"all"===l?"primary":"outline",onClick:()=>o("all"),children:"전체"}),(0,r.jsx)(eG.A,{variant:"change"===l?"primary":"outline",onClick:()=>o("change"),children:"단일변경"}),(0,r.jsx)(eG.A,{variant:"multi-change"===l?"primary":"outline",onClick:()=>o("multi-change"),children:"다중변경"}),(0,r.jsx)(eG.A,{variant:"status"===l?"primary":"outline",onClick:()=>o("status"),children:"상태변경"})]})}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:n?p.map(e=>{let{date:t,items:a}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)(e7,{date:t}),(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:a.map((e,t)=>(0,r.jsx)(e1,{item:e,onClick:g},"".concat(e.type,"-").concat(t,"-").concat(e.created_at)))})]},t)}):m.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).map((e,t)=>(0,r.jsx)(e1,{item:e,onClick:g},"".concat(e.type,"-").concat(t,"-").concat(e.created_at)))}),(0,r.jsx)(e9,{item:i,open:d,onOpenChange:u})]})}let tn=(0,P.createServerReference)("406f7a49cd9fd355861b8d3dbdd08646f6c40bcbfa",P.callServer,void 0,P.findSourceMapURL,"getHistoryLogs");function tl(){let[e]=(0,k.fp)(q),[t,a]=(0,s.useState)([]),[n,l]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(async()=>{if(null==e?void 0:e.cargo.id)try{l(!0);let t=await tn(e.cargo.id);a(t)}catch(e){console.error("히스토리 데이터를 가져오는 중 오류 발생:",e)}finally{l(!1)}})()},[null==e?void 0:e.cargo.id]),n)?(0,r.jsx)("div",{className:"flex justify-center items-center",children:(0,r.jsx)(c.A,{})}):(0,r.jsx)(tr,{items:t})}var to=a(66292),ti=a(51434);let ts=[{field:"name",headerName:"",editable:!1,flex:1,minWidth:120,pinned:"left"},{field:"cleared",headerName:"통관재고",editable:!0,type:"number",flex:1,minWidth:120,cellEditorPopup:!1},{field:"uncleared",headerName:"미통관재고",editable:!0,type:"number",flex:1,minWidth:120,cellEditorPopup:!1}];function tc(e){let{cargoId:t}=e,[l,o]=(0,s.useState)([]),[i,d]=(0,s.useState)(!1),u=(0,k.md)(q),{toast:m,ToastComponent:p}=el();(0,s.useEffect)(()=>{(async()=>{try{var e,a,r,n,l,i,s,c,m,p,g;d(!0);let h=await (0,ti.T)(t),x=h?(e=h,[{id:"dnb",name:"디앤비 재고",cleared:null!==(a=e.dnbCleared)&&void 0!==a?a:0,uncleared:null!==(r=e.dnbUncleared)&&void 0!==r?r:0},{id:"namhae",name:"남해 재고",cleared:null!==(n=e.namhaeCleared)&&void 0!==n?n:0,uncleared:null!==(l=e.namhaeUncleared)&&void 0!==l?l:0},{id:"interliving",name:"인터리빙 재고",cleared:null!==(i=e.interlivingCleared)&&void 0!==i?i:0,uncleared:null!==(s=e.interlivingUncleared)&&void 0!==s?s:0},{id:"gompyo",name:"곰표 재고",cleared:null!==(c=e.gompyoCleared)&&void 0!==c?c:0,uncleared:null!==(m=e.gompyoUncleared)&&void 0!==m?m:0},{id:"rample",name:"램플 재고",cleared:null!==(p=e.ramplusCleared)&&void 0!==p?p:0,uncleared:null!==(g=e.ramplusUncleared)&&void 0!==g?g:0}]):[];x.push(td(u,x)),o(x),d(!1)}catch(e){console.error("Error fetching stock:",e),d(!1)}})()},[]);let g=async e=>{let{id:r}=e.data,n=e.colDef.field,i=e.newValue;if("name"===n)return;if((""===i||null===i)&&(i=0),isNaN(Number(i))){e.node.setDataValue(n,e.oldValue);return}let s=l.find(e=>e.id===r);if(!s)return;let c={...s,[n]:Number(i)};o(e=>{let t=e.map(e=>e.id===r?c:e).filter(e=>"sales"!==e.id);return[...t,td(u,t)]});try{await a.e(7078).then(a.bind(a,47078)).then(e=>{let{updateStock:a}=e;return a(t,r,c.cleared,c.uncleared)}),m({title:"성공",description:"상태가 성공적으로 변경되었습니다."})}catch(t){o(e=>{let t=e.map(e=>e.id===r?s:e).filter(e=>"sales"!==e.id);return[...t,td(u,t)]}),e.node.setDataValue(n,e.oldValue),console.error("상태 업데이트 중 오류 발생:",t),m({title:"오류",description:"상태 변경 중 오류가 발생했습니다.",variant:"destructive"})}};return i?(0,r.jsx)(n.A,{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(c.A,{})}):(0,r.jsxs)(n.A,{children:[(0,r.jsx)(n.A,{sx:{width:"100%",height:"".concat(56+56*l.length,"px"),display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},children:(0,r.jsx)(to.A,{columnDefs:ts,data:l,loading:!1,error:null,pagination:!1,onCellValueChanged:g})}),(0,r.jsx)(p,{})]})}function td(e,t){return{id:"sales",name:"판매량",cleared:function(e,t){var a;if(!e)return 0;let r=t.reduce((e,t)=>{var a,r;return e+(null!==(a=t.cleared)&&void 0!==a?a:0)+(null!==(r=t.uncleared)&&void 0!==r?r:0)},0);return(null!==(a=e.cargo.contractTon)&&void 0!==a?a:0)-r}(e,t),uncleared:0}}var tu=function(e){return e.REVIEW="검토중",e.CONTRACTING="계약중",e.BEFORE_LC="L/C오픈전",e.BEFORE_ARRIVAL="입항전",e.WAREHOUSE_MOVING="창고 이동중",e.BEFORE_QUARANTINE="검역전",e.QUARANTINING="검역중",e.CUSTOMS_DECLARING="세관신고중",e.DONE_ARRIVAL="입항완료",e.AFTER_CUSTOMS="통관완료",e.SELLING="판매중",e.SOLD_DONE="판매완료",e}({});let tm={REVIEW:"검토중",CONTRACTING:"계약중",BEFORE_LC:"L/C오픈전",BEFORE_ARRIVAL:"입항전",WAREHOUSE_MOVING:"창고 이동중",BEFORE_QUARANTINE:"검역전",QUARANTINING:"검역중",CUSTOMS_DECLARING:"세관신고중",DONE_ARRIVAL:"입항완료",AFTER_CUSTOMS:"통관완료",SELLING:"판매중",SOLD_DONE:"판매완료"},tp={검토중:"REVIEW",계약중:"CONTRACTING","L/C오픈전":"BEFORE_LC",입항전:"BEFORE_ARRIVAL","창고 이동중":"WAREHOUSE_MOVING",검역전:"BEFORE_QUARANTINE",검역중:"QUARANTINING",세관신고중:"CUSTOMS_DECLARING",입항완료:"DONE_ARRIVAL",통관완료:"AFTER_CUSTOMS",판매중:"SELLING",판매완료:"SOLD_DONE"},tg=Object.values(tu);function th(){let e=(0,ey.useParams)(),[t,a]=(0,s.useState)("entire"),[c,d]=(0,k.fp)(q),{toast:u,ToastComponent:m}=el(),[p,g]=(0,s.useState)(!0),[h,x]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[y,f]=(0,s.useState)(null),A=(0,s.useRef)(null),j=(0,ey.useRouter)();(0,s.useEffect)(()=>{(async function(){try{if(c&&c.cargo.id===e.cargo_id){g(!1);return}await d(e.cargo_id),g(!1)}catch(e){console.error("화물 데이터 가져오기 실패:",e),j.push("/404")}})()},[e.cargo_id]),(0,s.useEffect)(()=>{h&&f(C())},[h]);let C=()=>{var e;if(!(null==c?void 0:null===(e=c.cargo)||void 0===e?void 0:e.progressStatus))return 0;let t=tm[c.cargo.progressStatus];return t?tg.indexOf(t):0},T=()=>null!==y?y:C(),S=()=>{let e=T();return e/(tg.length-1)*100},D=async t=>{if(!(null==c?void 0:c.cargo)||t<0||t>=tg.length)return;let a=tp[tg[t]];if(a)try{var r,n,l;await ef(e.cargo_id,{status:a,customsClearanceDate:c.cargo.customsClearanceDate||"",warehouseEntryDate:c.cargo.warehouseEntryDate||"",quarantineDate:c.cargo.quarantineDate||"",shippingCompany:(null===(r=c.shipment)||void 0===r?void 0:r.shippingCompany)||"",palletOrderDate:(null===(n=c.shipment)||void 0===n?void 0:n.palletOrderDate)||"",palletType:(null===(l=c.shipment)||void 0===l?void 0:l.palletType)||""}),await d(e.cargo_id),u({title:"성공",description:'상태가 "'.concat(tg[t],'"로 변경되었습니다.')})}catch(e){console.error("상태 업데이트 중 오류 발생:",e),u({title:"오류",description:"상태 변경 중 오류가 발생했습니다.",variant:"destructive"})}},N=e=>{if(!A.current)return 0;let t=A.current.getBoundingClientRect(),a=Math.max(0,Math.min(100,(e-t.left)/t.width*100)),r=tg.length,n=Math.round(a/(100/(r-1)));return Math.max(0,Math.min(r-1,n))},w=e=>{h&&(b(!0),e.preventDefault(),f(N(e.clientX)))},F=(0,s.useCallback)(e=>{v&&h&&f(N(e.clientX))},[v,h,N]),R=(0,s.useCallback)(()=>{v&&(b(!1),f(e=>e))},[v]);return(0,s.useEffect)(()=>(v&&(document.addEventListener("mousemove",F),document.addEventListener("mouseup",R)),()=>{document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",R)}),[v,F,R]),(0,r.jsx)(r.Fragment,{children:p||!c?(0,r.jsx)(n.A,{className:"w-full h-screen flex justify-center items-center",children:(0,r.jsx)(l.A,{className:"ml-4 text-lg",children:"로딩 중..."})}):(0,r.jsxs)("div",{className:"min-h-screen bg-background-paper",children:[(0,r.jsx)(n.A,{className:"w-full h-16 px-10 bg-background-default flex justify-between items-center",children:(0,r.jsx)(l.A,{variant:"h4",className:"text-success-darker font-bold font-['Public_Sans']",children:"상세보기"})}),(0,r.jsx)(n.A,{className:"w-full h-32 p-4 relative",children:(0,r.jsxs)(o.A,{maxWidth:"xl",className:"progress-container h-full",children:[h&&(0,r.jsx)(l.A,{className:"absolute text-xs text-gray-500 whitespace-nowrap bg-white px-2 py-1 rounded shadow-sm",style:{left:"50%",top:0,transform:"translateX(-50%)"},children:v?"드래그 중... 잠시 멈춰서 상태를 저장하세요":"동그라미를 드래그하거나 점을 클릭하여 상태를 변경하세요"}),(0,r.jsxs)(n.A,{className:"relative h-full flex items-center",children:[(0,r.jsx)(n.A,{ref:A,className:"w-full h-3 bg-gray-200 rounded-2xl ".concat(h?"cursor-pointer":""),onMouseDown:w}),(0,r.jsx)(n.A,{className:"absolute h-3 bg-gradient-to-r from-green-300 to-green-500 rounded-2xl transition-all duration-300 pointer-events-none",style:{width:(()=>{let e=T(),t=tg.length;return"".concat(e/(t-1)*100,"%")})()}}),h&&tg.map((e,t)=>{let a=t/(tg.length-1)*100;return(0,r.jsx)(n.A,{className:"absolute w-3 h-3 rounded-full transition-all duration-200 cursor-pointer ".concat(t<=T()?"bg-green-600 shadow-md":"bg-gray-400"," hover:scale-125"),style:{left:"".concat(a,"%"),top:"50%",transform:"translate(-50%, -50%)",zIndex:10},onClick:e=>{e.stopPropagation(),h&&f(t)}},e)}),(0,r.jsx)(n.A,{className:"absolute transition-none z-20 ".concat(h?"cursor-grab":""," ").concat(v?"cursor-grabbing":""),style:{left:"".concat(S(),"%"),top:"50%",transform:"translate(-50%, -50%)"},onMouseDown:w,children:(0,r.jsx)(n.A,{className:"w-12 h-12 bg-white rounded-full border-4 border-emerald-600 shadow-lg transition-all duration-300 ".concat(h?"hover:border-emerald-700 hover:scale-110":""," ").concat(v?"scale-125 shadow-2xl border-emerald-800":""),children:(0,r.jsx)(n.A,{className:"w-full h-full rounded-full bg-emerald-600 opacity-20"})})}),(0,r.jsx)(l.A,{className:"absolute text-sm font-semibold font-['Public_Sans'] whitespace-nowrap transition-none pointer-events-none ".concat(v?"text-emerald-800":"text-emerald-600"),style:{left:"".concat(S(),"%"),top:"calc(50% + 35px)",transform:"translateX(-50%)"},children:tg[T()]?tg[T()]:""})]})]})}),(0,r.jsxs)(i.A,{direction:"row",spacing:2,sx:{justifyContent:"flex-end",paddingX:{xs:2,md:3},marginTop:2},children:[(0,r.jsx)(eG.A,{variant:"secondary",editMode:h,onClick:h?()=>{null!==y&&y!==C()&&D(y),x(!1)}:()=>{x(!0),b(!1),f(C())},children:h?"편집 완료":"편집모드"}),h&&(0,r.jsx)(eG.A,{variant:"outline",onClick:()=>{f(C()),x(!1)},children:"취소"})]}),(0,r.jsxs)(o.A,{maxWidth:"xl",className:"mt-8",children:[(0,r.jsx)(n.A,{className:"mb-8",children:(0,r.jsx)(i.A,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:"center",children:(0,r.jsx)("div",{className:"overflow-auto w-full flex flex-col gap-4",children:(0,r.jsxs)(i.A,{direction:"row",spacing:2,sx:{width:"100%",justifyContent:"flex-start",pb:1,overflowX:"auto",flexWrap:"nowrap",minWidth:"max-content","& > *":{flexShrink:0}},children:[(0,r.jsx)(eG.A,{variant:"entire"===t?"primary":"inherit",onClick:()=>a("entire"),children:"전체정보"}),(0,r.jsx)(eG.A,{variant:"document"===t?"primary":"inherit",onClick:()=>a("document"),children:"서류정보"}),(0,r.jsx)(eG.A,{variant:"cargo"===t?"primary":"inherit",onClick:()=>a("cargo"),children:"화물 정보"}),(0,r.jsx)(eG.A,{variant:"stock"===t?"primary":"inherit",onClick:()=>a("stock"),children:"재고 정보"}),(0,r.jsx)(eG.A,{variant:"history"===t?"primary":"inherit",onClick:()=>a("history"),children:"히스토리"})]})})})}),(()=>{switch(t){case"entire":return(0,r.jsx)(ed,{cargoId:e.cargo_id});case"document":return(0,r.jsx)(eq,{cargoId:e.cargo_id});case"cargo":return(0,r.jsx)(eb,{cargoId:e.cargo_id});case"history":return(0,r.jsx)(tl,{});case"stock":return(0,r.jsx)(tc,{cargoId:e.cargo_id});default:return null}})(),(0,r.jsx)(n.A,{className:"w-[1093px] h-[50px]"})]}),(0,r.jsx)(m,{})]})})}},37342:(e,t,a)=>{"use strict";a.d(t,{L:()=>n});var r=a(64358);let n=(0,r.createServerReference)("708066d271083700e75828f5249be105d9a7ae90a3",r.callServer,void 0,r.findSourceMapURL,"switchImporter")},51434:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var r=a(64358);let n=(0,r.createServerReference)("40aeba8f684b66c867bedb937c07d52021a57f8c42",r.callServer,void 0,r.findSourceMapURL,"getStock")},55587:(e,t,a)=>{Promise.resolve().then(a.bind(a,28369))},62171:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var r=function(e){return e.STANDARD="STANDARD",e.DNB="DNB",e.NAMHAE="NAMHAE",e}({})},69850:(e,t,a)=>{"use strict";a.d(t,{F:()=>n});var r=a(64358);let n=(0,r.createServerReference)("001a699d075857c273ad9c3e1498e8004aecf5f06b",r.callServer,void 0,r.findSourceMapURL,"getAllImporters")},75746:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var r=a(22318),n=a(71599);let l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"primary",t=arguments.length>1?arguments[1]:void 0,a={fontWeight:600,border:"1px solid",boxShadow:"none",whiteSpace:"nowrap","&:disabled":{backgroundColor:"#9CA3AF",color:"#FFFFFF"}};switch(e){case"primary":return{...a,backgroundColor:"#22C55E",color:"#FFFFFF","&:hover":{backgroundColor:"#16A34A"}};case"inherit":return{whiteSpace:"nowrap"};case"secondary":return{...a,backgroundColor:t?"#f3f4f6":"#64748b",color:t?"#374151":"#FFFFFF",border:t?"1px solid #cbd5e1":"none","&:hover":{backgroundColor:t?"#e5e7eb":"#475569"}};case"danger":return{...a,backgroundColor:"#EF4444",color:"#FFFFFF","&:hover":{backgroundColor:"#DC2626"}};case"info":return{...a,backgroundColor:"#3B82F6",color:"#FFFFFF","&:hover":{backgroundColor:"#2563EB"}};case"special":return{...a,backgroundColor:"#6366F1",color:"#FFFFFF","&:hover":{backgroundColor:"#4F46E5"}};case"outline":return{...a,backgroundColor:"transparent",borderColor:"primary",color:"#22C55E","&:hover":{backgroundColor:"#F9FAFB",borderColor:"primary"},"&:disabled":{backgroundColor:"transparent",borderColor:"#9CA3AF",color:"#9CA3AF"}};case"outline-danger":return{...a,backgroundColor:"transparent",borderColor:"#EF4444",color:"#EF4444","&:hover":{backgroundColor:"#FEF2F2",borderColor:"#DC2626",color:"#DC2626"},"&:disabled":{backgroundColor:"transparent",borderColor:"#9CA3AF",color:"#9CA3AF"}};default:return a}};function o(e){let{variant:t="primary",children:a,minWidth:o,sx:i,editMode:s=!1,...c}=e,d=l(t,s),u=t.includes("outline");return(0,r.jsx)(n.A,{variant:"inherit"===t?"contained":u?"outlined":"contained",color:"inherit"===t?"inherit":"primary",sx:{...d,minWidth:o,...i},...c,children:a})}},93976:(e,t,a)=>{"use strict";a.d(t,{k:()=>n});var r=a(64358);let n=(0,r.createServerReference)("70cb62e0dde91bfc11ff6248b4d732ebf3b40628b3",r.callServer,void 0,r.findSourceMapURL,"addUnclearedStockNumber")}},e=>{var t=t=>e(e.s=t);e.O(0,[1775,8082,7045,3336,4069,6510,4090,2394,6956,5059,2555,4379,7133,6451,6292,9039,1077,7358],()=>t(55587)),_N_E=e.O()}]);
