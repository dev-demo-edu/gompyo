(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[999],{33964:(e,t,a)=>{"use strict";a.d(t,{T:()=>r});var n=a(64358);let r=(0,n.createServerReference)("401ce28628fcc55c7d6ba86a34b968e575129ab991",n.callServer,void 0,n.findSourceMapURL,"getStock")},51331:(e,t,a)=>{"use strict";a.d(t,{F:()=>r});var n=a(64358);let r=(0,n.createServerReference)("00c5a15d93ce2e21150395c1f1edf45fc13f09b740",n.callServer,void 0,n.findSourceMapURL,"getAllImporters")},55587:(e,t,a)=>{Promise.resolve().then(a.bind(a,77480))},62171:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var n=function(e){return e.STANDARD="STANDARD",e.DNB="DNB",e.NAMHAE="NAMHAE",e}({})},74111:(e,t,a)=>{"use strict";a.d(t,{L:()=>r});var n=a(64358);let r=(0,n.createServerReference)("70d2de23087ff715844d2ff13df2a7480eaf8b3576",n.callServer,void 0,n.findSourceMapURL,"switchImporter")},77480:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tg});var n=a(22318),r=a(27849),l=a(6987),i=a(42846),o=a(92262),s=a(71599),c=a(20926),d=a(81759),u=a(17859),m=a(63001),p=a(54069),g=a(2877),h=a(91394),x=a(46558),v=a(56690),y=a(23093),b=a(5600),f=a(15792),A=a(60720);let j=e=>{if(null==e||""===e)return"";let t=parseFloat(String(e).replace(/[^0-9.-]/g,""));return isNaN(t)?"":new Intl.NumberFormat("ko-KR").format(t)},C=e=>{if(null==e||""===e)return"";let t=parseFloat(String(e).replace(/[^0-9.-]/g,""));return isNaN(t)?"":new Intl.NumberFormat("ko-KR").format(Math.floor(t))},T=e=>e.map(e=>({value:e.importerName,label:e.importerName})),S=e=>[{name:"contractNumber",label:"계약 번호",valueType:"string"},{name:"contractDate",label:"계약 일자",valueType:"string",type:"date"},{name:"importerName",label:"수입회사",valueType:"string",type:"select",options:T(e)},{name:"exporter",label:"공급업체",valueType:"string"},{name:"incoterms",label:"인코텀즈",valueType:"string"},{name:"contractTon",label:"계약 톤수",valueType:"string",type:"number",endAdornment:"톤"},{name:"departurePort",label:"출발항",gridSize:6,valueType:"string"},{name:"arrivalPort",label:"도착항",gridSize:6,valueType:"string"},{name:"estimatedTimeDeparture",label:"ETD",gridSize:6,valueType:"string",type:"date"},{name:"estimatedTimeArrival",label:"ETA",gridSize:6,valueType:"string",type:"date"},{name:"blNumber",label:"B/L 번호",valueType:"string"}],D=[{name:"paymentMethod",label:"결제 방식",valueType:"string",type:"select",options:[{value:"T/T",label:"T/T"},{value:"CAD",label:"CAD"},{value:"L/C",label:"L/C at sight"},{value:"Usance",label:"Payment Usance"}]}],N={"T/T":[{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD"},{name:"counterpartBank",label:"상대방 은행",valueType:"string"},{name:"advancePaymentDate",label:"선급금 날짜",gridSize:6,valueType:"string",type:"date"},{name:"remainingPaymentDate",label:"잔금 날짜",gridSize:6,valueType:"string",type:"date"},{name:"advancePaymentRatio",label:"선급금 비율",gridSize:6,valueType:"number",endAdornment:"%"},{name:"remainingPaymentRatio",label:"잔금 비율",gridSize:6,valueType:"number",endAdornment:"%"},{name:"advancePaymentAmount",label:"선급금 금액",gridSize:6,valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0},{name:"remainingPaymentAmount",label:"잔금 금액",gridSize:6,valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0}],CAD:[{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD"},{name:"paymentDueDate",label:"대금 결제일",valueType:"string",type:"date"}],"L/C":[{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD"},{name:"paymentDueDate",label:"대금 결제일",valueType:"string",type:"date"}],Usance:[{name:"paymentTerm",label:"결제 기간",valueType:"string",endAdornment:"일"},{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD"},{name:"paymentDueDate",label:"대금 결제일",valueType:"string",type:"date"}]},w=[{name:"unitPrice",label:"단가",valueType:"number",endAdornment:"MT/USD",removeDecimal:!0},{name:"totalContractPrice",label:"총 계약가",valueType:"number",endAdornment:"₩",disabled:!0,removeDecimal:!0},{name:"exchangeRate",label:"환율",valueType:"number",endAdornment:"₩/USD",removeDecimal:!0},{name:"costPerKg",label:"원가",valueType:"number",endAdornment:"₩/Kg",disabled:!0,removeDecimal:!0},{name:"customsTaxRate",label:"관세율",valueType:"number",endAdornment:"%",removeDecimal:!0},{name:"customTaxAmount",label:"관세액",valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0},{name:"transferFee",label:"송금수수료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"customsFee",label:"관세수수료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"inspectionFee",label:"검사료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"doCharge",label:"D/O Charge",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"otherCosts",label:"기타비용",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"purchaseFeeRate",label:"매입 수수료율",valueType:"number",type:"text",endAdornment:"%",removeDecimal:!0}],R=[{name:"contractorCost",label:"수입회사 원가",valueType:"number",disabled:!0,removeDecimal:!0,endAdornment:"₩/Kg"},{name:"supplyPrice",label:"수입회사 수급가",valueType:"number",disabled:!0,removeDecimal:!0,endAdornment:"₩/Kg"},{name:"contractorProfit",label:"수입회사 이익",valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0},{name:"shippingCost",label:"배송비",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"laborCost",label:"작업료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"transportStorageFee",label:"운송/보관료",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"loadingUnloadingFee",label:"상하차 비용",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"usanceInterest",label:"Usance 이자(환차손)",valueType:"number",endAdornment:"₩",removeDecimal:!0}],P=[{name:"totalCost",label:"총비용",valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0},{name:"totalCostPerKg",label:"총비용/Kg",valueType:"number",disabled:!0,endAdornment:"₩/Kg",removeDecimal:!0},{name:"sellingPrice",label:"판매가(총판)",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"sellingPriceWholesale",label:"판매가(도매)",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"sellingPriceRetail",label:"판매가(소매)",valueType:"number",endAdornment:"₩",removeDecimal:!0},{name:"margin",label:"마진",valueType:"number",disabled:!0,removeDecimal:!0,endAdornment:"₩/Kg"},{name:"totalProfit",label:"총이익",valueType:"number",disabled:!0,endAdornment:"₩",removeDecimal:!0}],E=[{name:"gompyoLaborCost",label:"곰표 작업료",valueType:"number",endAdornment:"₩"},{name:"gompyoTransportStorageFee",label:"곰표 운송/보관료",valueType:"number",endAdornment:"₩"},{name:"gompyoLoadingUnloadingFee",label:"곰표 상하차 비용",valueType:"number",endAdornment:"₩"}];var U=a(86956),k=a(49812),F=a(64358);let I=(0,F.createServerReference)("40a3833a5a46db315f2cb88d982156d0da3f60698b",F.callServer,void 0,F.findSourceMapURL,"getCargoDetail"),L=(0,F.createServerReference)("60296ab25a0c95190a9a8eb0a32b119e35dade782e",F.callServer,void 0,F.findSourceMapURL,"updateCargoDetail");var M=a(62171);class O{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),n=(a-e.contractorCost)*t.contractTon*1e3,r=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee+t.gompyoLaborCost+t.gompyoTransportStorageFee+t.gompyoLoadingUnloadingFee,l=t.sellingPrice-r/t.contractTon/1e3,i=l*t.contractTon*1e3,o=r/t.contractTon/1e3;return{supplyPrice:a,contractorProfit:n,totalCost:r,margin:l,totalProfit:i,totalCostPerKg:o}}}class _{calculate(e,t){let a=(e.contractorCostAmount+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee+t.usanceInterest)/t.contractTon/1e3*(1+t.purchaseFeeRate/100),n=(a-e.contractorCost)*t.contractTon*1e3,r=a*t.contractTon*1e3+t.gompyoLaborCost+t.gompyoLoadingUnloadingFee+t.gompyoTransportStorageFee,l=t.sellingPrice-r/t.contractTon/1e3,i=l*t.contractTon*1e3,o=r/t.contractTon/1e3;return{supplyPrice:a,contractorProfit:n,totalCost:r,margin:l,totalProfit:i,totalCostPerKg:o}}}class W{calculate(e,t){let a=e.contractorCost*(1+t.purchaseFeeRate/100),n=(a-e.contractorCost)*t.contractTon*1e3,r=a*t.contractTon*1e3+t.shippingCost+t.laborCost+t.transportStorageFee+t.loadingUnloadingFee+t.gompyoLaborCost+t.gompyoTransportStorageFee+t.gompyoLoadingUnloadingFee,l=t.sellingPrice-r/t.contractTon/1e3,i=l*t.contractTon*1e3,o=r/t.contractTon/1e3;return{supplyPrice:a,contractorProfit:n,totalCost:r,margin:l,totalProfit:i,totalCostPerKg:o}}}class z{static createStrategy(e){if(!e)return new O;switch(e.calculationType){case M.A.STANDARD:return new O;case M.A.DNB:return new _;case M.A.NAMHAE:return new W;default:return new O}}}class V{calculateValues(){let e=this.data.costDetail.unitPrice||0,t=this.data.costDetail.exchangeRate||0,a=this.data.cargo.contractTon||0,n=this.data.cargo.sellingPrice||0,r=this.data.cargo.purchaseFeeRate||0,l=Math.floor(e*t*a),i=e*t/1e3,o=l*(this.data.costDetail.customsTaxRate||0)/100,s=l+o+(this.data.costDetail.transferFee||0)+(this.data.costDetail.customsFee||0)+(this.data.costDetail.inspectionFee||0)+(this.data.costDetail.doCharge||0)+(this.data.costDetail.otherCosts||0),c=s/a/1e3,d=l*(this.data.payment.advancePaymentRatio||0)/100,u=l*(this.data.payment.remainingPaymentRatio||0)/100,m=this.calculationStrategy.calculate({contractorCostAmount:s,costPerKg:i,totalContractPrice:l,contractorCost:c},{contractTon:a,sellingPrice:n,purchaseFeeRate:r,shippingCost:this.data.cost.shippingCost||0,laborCost:this.data.cost.laborCost||0,transportStorageFee:this.data.cost.transportStorageFee||0,loadingUnloadingFee:this.data.cost.loadingUnloadingFee||0,usanceInterest:this.data.cost.usanceInterest||0,gompyoLaborCost:this.data.cost.gompyoLaborCost||0,gompyoTransportStorageFee:this.data.cost.gompyoTransportStorageFee||0,gompyoLoadingUnloadingFee:this.data.cost.gompyoLoadingUnloadingFee||0});return{supplyPrice:m.supplyPrice,margin:m.margin,totalProfit:m.totalProfit,totalContractPrice:l,costPerKg:i,contractorCost:c,contractorProfit:m.contractorProfit,totalCost:m.totalCost,totalCostPerKg:m.totalCostPerKg,customTaxAmount:o,advancePaymentAmount:d,remainingPaymentAmount:u}}mapItem(e){return{id:e.id,itemName:e.itemName||"",itemVariety:e.itemVariety||"",originCountry:e.originCountry||"",hsCode:e.hsCode||"",packingUnit:e.packingUnit||""}}mapShipment(e){return{id:e.id,estimatedTimeArrival:e.estimatedTimeArrival||"",estimatedTimeDeparture:e.estimatedTimeDeparture||"",arrivalPort:e.arrivalPort||"",departurePort:e.departurePort||"",blNumber:e.blNumber||"",palletOrderDate:e.palletOrderDate||"",palletType:e.palletType||"",shippingCompany:e.shippingCompany||"",contractId:e.contractId||"",createdAt:e.createdAt||"",updatedAt:e.updatedAt||""}}mapContract(e,t,a){return{id:e.id,incoterms:e.incoterms||"",contractNumber:e.contractNumber||"",contractDate:e.contractDate||"",exporter:e.exporter||"",importerId:e.importerId||"",departurePort:t.departurePort||"",arrivalPort:t.arrivalPort||"",estimatedTimeDeparture:t.estimatedTimeDeparture||"",estimatedTimeArrival:t.estimatedTimeArrival||"",blNumber:t.blNumber||"",importerName:(null==a?void 0:a.importerName)||"",createdAt:e.createdAt||"",updatedAt:e.updatedAt||""}}mapPayment(e){return{id:e.id,paymentDueDate:e.paymentDueDate||"",paymentMethod:e.paymentMethod||"",contractId:e.contractId,advancePaymentDate:e.advancePaymentDate||"",advancePaymentRatio:e.advancePaymentRatio||0,advancePaymentAmount:this.calculatedValues.advancePaymentAmount,remainingPaymentDate:e.remainingPaymentDate||"",remainingPaymentRatio:e.remainingPaymentRatio||0,remainingPaymentAmount:this.calculatedValues.remainingPaymentAmount,counterpartBank:e.counterpartBank||"",paymentTerm:e.paymentTerm||"",totalContractAmount:this.calculatedValues.totalContractPrice}}mapAndCalculateCostDetail(e){return{id:e.id,unitPrice:e.unitPrice||0,totalContractPrice:this.calculatedValues.totalContractPrice,exchangeRate:e.exchangeRate||0,costPerKg:this.calculatedValues.costPerKg,costId:e.costId,customTaxAmount:this.calculatedValues.customTaxAmount,customsTaxRate:e.customsTaxRate||0,customsFee:e.customsFee||0,inspectionFee:e.inspectionFee||0,doCharge:e.doCharge||0,otherCosts:e.otherCosts||0,transferFee:e.transferFee||0}}mapAndCalculateContractAmount(e,t){return{id:t.id,cargoId:t.cargoId,contractorCost:this.calculatedValues.contractorCost,supplyPrice:this.calculatedValues.supplyPrice,contractorProfit:this.calculatedValues.contractorProfit,shippingCost:t.shippingCost||0,laborCost:t.laborCost||0,transportStorageFee:t.transportStorageFee||0,loadingUnloadingFee:t.loadingUnloadingFee||0,usanceInterest:t.usanceInterest||0,gompyoLaborCost:t.gompyoLaborCost||0,gompyoTransportStorageFee:t.gompyoTransportStorageFee||0,gompyoLoadingUnloadingFee:t.gompyoLoadingUnloadingFee||0}}mapAndCalculateExpense(e){return{id:e.id,itemsId:e.itemsId,shipmentId:e.shipmentId,containerCount:e.containerCount,contractTon:e.contractTon,customsClearanceDate:e.customsClearanceDate,quarantineDate:e.quarantineDate,warehouseEntryDate:e.warehouseEntryDate,progressStatus:e.progressStatus,totalCost:this.calculatedValues.totalCost,totalCostPerKg:this.calculatedValues.totalCostPerKg,sellingPrice:e.sellingPrice||0,sellingPriceWholesale:e.sellingPriceWholesale||0,sellingPriceRetail:e.sellingPriceRetail||0,margin:this.calculatedValues.margin,totalProfit:this.calculatedValues.totalProfit,purchaseFeeRate:e.purchaseFeeRate,remark:e.remark,createdAt:e.createdAt,updatedAt:e.updatedAt}}calculate(){return{importer:this.data.importer,contract:this.mapContract(this.data.contract,this.data.shipment,this.data.importer),payment:this.mapPayment(this.data.payment),costDetail:this.mapAndCalculateCostDetail(this.data.costDetail),cost:this.mapAndCalculateContractAmount(this.data.cargo,this.data.cost),cargo:this.mapAndCalculateExpense(this.data.cargo),item:this.mapItem(this.data.item),shipment:this.mapShipment(this.data.shipment)}}constructor(e){this.data=e,this.calculationStrategy=z.createStrategy(e.importer),this.calculatedValues=this.calculateValues()}}let B=(0,F.createServerReference)("708d2e2b18d40c79b5462540c2985cd223c7eb9716",F.callServer,void 0,F.findSourceMapURL,"createNewShipmentAndUpdateCargo");var H=a(74111),G=a(87603);let K=(0,k.eU)(null),q=(0,k.eU)(null),Q=(0,k.eU)(e=>{let t=e(K);return t?new V(t).calculate():null},async(e,t,a)=>{try{let e=await I(a);t(K,e)}catch(e){throw console.error("화물 정보 조회 중 오류 발생:",e),e}}),X=(0,k.eU)(!1),J=(0,k.eU)(null);(0,k.eU)(null,(e,t)=>{let a=e(K);a&&t(q,JSON.parse(JSON.stringify(a)))});let Y=(0,k.eU)(null,(e,t)=>{let a=e(q);a&&(t(K,a),t(q,null))}),Z=(0,k.eU)(null,async(e,t,a)=>{let{formData:n,cargoId:r,option:l}=a,i=e(K);if(i)try{let e={};if(e.cargo={...i.cargo,...n},e.costDetail={...i.costDetail,...n},e.cost={...i.cost,...n},e.payment={...i.payment,...n},e.contract={...i.contract,...n},e.item={...i.item,...n},e.importer={...i.importer,...n},n.blNumber&&"single"===l&&n.blNumber!==i.shipment.blNumber){let t=await B(r,n,l);e.shipment={...t},t&&(e.cargo.shipmentId=t.id)}else e.shipment={...i.shipment,...n};e.importer.importerName!==i.importer.importerName&&(0,H.L)(r,i.importer.importerName,e.importer.importerName),e.cargo.contractTon!==i.cargo.contractTon&&(e.cargo.containerCount=Math.ceil(Number(e.cargo.contractTon)/24),await (0,G.k)(r,e.importer.importerCode,Number(e.cargo.contractTon)-Number(i.cargo.contractTon)));let a=await L(r,e);t(K,a)}catch(e){throw e}}),$=(0,F.createServerReference)("40f988d447d0664db528e52b318aa37c5ac8be0b3c",F.callServer,void 0,F.findSourceMapURL,"addChangeLog"),ee=(0,F.createServerReference)("0028b4c78e95647dc5a53ee5fba9631161871c02cb",F.callServer,void 0,F.findSourceMapURL,"getUser"),et=(0,k.eU)(null),ea=(0,k.eU)(async e=>{let t=e(et);if(t)return t;let a=await ee();return a?{id:a.id,email:a.email,name:a.name,planColumnOrder:a.planColumnOrder||"",shipmentColumnOrder:a.shipmentColumnOrder||""}:null},async(e,t,a)=>{t(et,a)});function en(e){let{title:t,fields:a,data:i={},onSave:o,onFieldChange:s,className:d=""}=e,[T,S]=(0,c.useState)(!1),[D,N]=(0,c.useState)({}),[w,R]=(0,c.useState)({}),[,P]=(0,U.fp)(Y),[E]=(0,U.fp)(ea),[k]=(0,U.fp)(Q);(0,c.useEffect)(()=>{N(Object.entries(i).reduce((e,t)=>{var a;let[n,r]=t;return e[n]=null!==(a=null==r?void 0:r.toString())&&void 0!==a?a:null,e},{}))},[i]);let F=(e,t)=>{if(null===e)return null;switch(t){case"number":return""===e?null:Number(e);case"date":return""===e?null:e;default:return e}},I=e=>{let t=["계약 번호","계약 일자","공급 업체","수입처","품목","품종","포장단위"],a={};return e.forEach(e=>{let n;switch(e.valueType){case"number":n=A.z.string({message:"숫자를 입력해주세요"});break;case"date":n=A.z.coerce.string().min(1,"날짜를 선택해주세요.").default(new Date().toISOString().split("T")[0]);break;default:n=A.z.string({message:"값을 입력해주세요"})}t.includes(e.label)||(n=n.optional()),a[e.name]=n}),A.z.object(a)},L=async(e,t)=>{let n=[];a.forEach(a=>{let r=e[a.name],l=t[a.name];if(r!==(null==l?void 0:l.toString())){var i,o;n.push({field:a.label,from:null!==(i=null==r?void 0:r.toString())&&void 0!==i?i:"",to:null!==(o=null==l?void 0:l.toString())&&void 0!==o?o:""})}}),n.length>0&&(console.log("changes",n),console.log("currentUser",E),await $({targetId:(null==k?void 0:k.cargo.id)||"",user:(null==E?void 0:E.name)||"",changes:n}))},M=async()=>{let e=I(a).safeParse(D);if(!e.success){let t={};e.error.errors.forEach(e=>{e.path[0]&&(t[e.path[0]]=e.message)}),R(t);return}if(R({}),o){let e=a.reduce((e,t)=>{let a=D[t.name];return e[t.name]=F(a,t.valueType),e},{}),t=Object.entries(i).reduce((e,t)=>{var a;let[n,r]=t;return e[n]=null!==(a=null==r?void 0:r.toString())&&void 0!==a?a:null,e},{});await L(t,e),o(e)}S(!1)},O=e=>t=>{let n=t.target.value||null,r=a.find(t=>t.name===e);(null==r?void 0:r.valueType)==="number"&&n&&(n=n.replace(/[^0-9.-]/g,"")),N(t=>({...t,[e]:n})),s&&s(e,n)},_=e=>{var t;if("select"===e.type&&e.options)return(0,n.jsx)(u.A,{fullWidth:!0,disabled:!T||e.disabled,children:(0,n.jsx)(m.A,{freeSolo:!0,options:e.options,getOptionLabel:e=>"string"==typeof e?e:e.label,value:e.options.find(t=>t.value===D[e.name])||D[e.name]||null,onChange:(t,a)=>{let n="string"==typeof a?a:(null==a?void 0:a.value)||null;N(t=>({...t,[e.name]:n})),s&&s(e.name,n)},onInputChange:(t,a)=>{N(t=>({...t,[e.name]:a})),s&&s(e.name,a)},disabled:!T||e.disabled,renderInput:t=>(0,n.jsx)(p.A,{...t,label:e.label,error:!!w[e.name],helperText:w[e.name],sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(145, 158, 171, 0.2)"},"&.Mui-disabled":{backgroundColor:"rgba(0, 0, 0, 0.02)","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(0, 0, 0, 0.3)",borderWidth:"1px"},"& .MuiInputBase-input":{color:"rgba(0, 0, 0, 0.6)",WebkitTextFillColor:"rgba(0, 0, 0, 0.6)"}}}}}),renderOption:(e,t)=>{let{key:a,...r}=e;return(0,n.jsx)("li",{...r,children:"string"==typeof t?t:t.label},a)}})});let a=null!==(t=D[e.name])&&void 0!==t?t:"";"number"===e.valueType&&a&&(a=e.removeDecimal?C(a):j(a));let r={fullWidth:!0,label:e.label,variant:"outlined",placeholder:e.placeholder||"입력해주세요.",className:"bg-background-paper",disabled:!T||e.disabled,value:a,type:"textarea"===e.type?void 0:e.type,onChange:O(e.name),error:!!w[e.name],helperText:w[e.name],sx:{"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:"rgba(145, 158, 171, 0.2)"},"&.Mui-disabled":{backgroundColor:"rgba(0, 0, 0, 0.02)","& .MuiOutlinedInput-notchedOutline":{borderColor:"rgba(0, 0, 0, 0.3)",borderWidth:"1px"},"& .MuiInputBase-input":{color:"rgba(0, 0, 0, 0.6)",WebkitTextFillColor:"rgba(0, 0, 0, 0.6)"}}}},InputLabelProps:"date"===e.type?{shrink:!0}:void 0,InputProps:e.endAdornment?{endAdornment:(0,n.jsx)(g.A,{sx:{color:"inherit","& .MuiTypography-root":{color:"inherit"}},position:"end",children:e.endAdornment})}:void 0,multiline:"textarea"===e.type,rows:"textarea"===e.type?4:void 0};return(0,n.jsx)(p.A,{...r})};return(0,n.jsxs)(h.A,{className:"bg-background-paper rounded-2xl shadow-[0px_12px_24px_-4px_rgba(145,158,171,0.12)] shadow-[0px_0px_2px_0px_rgba(145,158,171,0.20)] inline-flex flex-col justify-start items-end ".concat(d),children:[(0,n.jsxs)(r.A,{className:"self-stretch pl-6 pr-4 py-6 border-b border-[rgba(145,158,171,0.2)] flex justify-between items-center",children:[(0,n.jsx)(l.A,{variant:"h6",className:"text-text-primary font-semibold",children:t}),(0,n.jsx)(r.A,{children:T?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.A,{onClick:M,color:"primary",children:(0,n.jsx)(y.A,{})}),(0,n.jsx)(x.A,{onClick:()=>{N(Object.entries(i).reduce((e,t)=>{var a;let[n,r]=t;return e[n]=null!==(a=null==r?void 0:r.toString())&&void 0!==a?a:null,e},{})),R({}),S(!1),P()},color:"primary",children:(0,n.jsx)(b.A,{})})]}):(0,n.jsx)(x.A,{onClick:()=>S(!0),children:(0,n.jsx)(f.A,{className:"text-action-disabled opacity-80"})})})]}),(0,n.jsx)(r.A,{className:"self-stretch p-6",children:(0,n.jsx)(v.Ay,{container:!0,spacing:3,children:a.map(e=>(0,n.jsx)(v.Ay,{item:!0,xs:e.gridSize||12,children:_(e)},e.name))})})]})}var er=a(80835),el=a(40309);function ei(){let[e,t]=(0,c.useState)(!1),[a,r]=(0,c.useState)({title:"",description:""}),l=()=>{t(!1)};return{toast:e=>{r(e),t(!0)},ToastComponent:()=>(0,n.jsx)(er.A,{open:e,autoHideDuration:2e3,onClose:l,anchorOrigin:{vertical:"top",horizontal:"right"},children:(0,n.jsxs)(el.A,{onClose:l,severity:"destructive"===a.variant?"error":"success",sx:{width:"100%"},children:[(0,n.jsx)("div",{className:"font-semibold",children:a.title}),(0,n.jsx)("div",{children:a.description})]})})}}var eo=a(9285);let es=e=>{let{open:t,onClose:a,onSelect:i}=e;return(0,n.jsx)(eo.A,{open:t,onClose:a,"aria-labelledby":"bl-number-update-modal","aria-describedby":"bl-number-update-modal-description",children:(0,n.jsxs)(r.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",boxShadow:24,p:4,borderRadius:2},children:[(0,n.jsx)(l.A,{id:"bl-number-update-modal",variant:"h6",component:"h2",sx:{mb:2},children:"B/L 번호 업데이트"}),(0,n.jsx)(l.A,{id:"bl-number-update-modal-description",sx:{mb:3},children:"B/L 번호를 어떻게 업데이트하시겠습니까?"}),(0,n.jsxs)(r.A,{sx:{display:"flex",gap:2,justifyContent:"center"},children:[(0,n.jsx)(s.A,{variant:"outlined",onClick:()=>i("all"),children:"전체 계약 업데이트"}),(0,n.jsx)(s.A,{variant:"contained",onClick:()=>i("single"),children:"특정 화물 업데이트"})]})]})})};var ec=a(51331);function ed(e){var t,a,l;let{cargoId:i}=e,[o,s]=(0,U.fp)(Q),[u,m]=(0,U.fp)(X),p=(0,U.Xr)(J),[,g]=(0,U.fp)(Z),{toast:h,ToastComponent:x}=ei(),[v,y]=(0,c.useState)(!1),[b,f]=(0,c.useState)(null),[A,j]=(0,c.useState)(""),[C,T]=(0,c.useState)([]);(0,c.useEffect)(()=>{(async()=>{T(await (0,ec.F)())})()},[]),(0,c.useEffect)(()=>{console.log(o)},[o]);let[k,F]=(0,c.useState)(()=>(console.log("Initializing currentPaymentFields"),D));(0,c.useEffect)(()=>{var e,t;console.log("mappedData effect triggered, paymentMethod:",null==o?void 0:null===(e=o.payment)||void 0===e?void 0:e.paymentMethod),(null==o?void 0:null===(t=o.payment)||void 0===t?void 0:t.paymentMethod)&&j(o.payment.paymentMethod)},[null==o?void 0:null===(t=o.payment)||void 0===t?void 0:t.paymentMethod]);let I=e=>{if(console.log("handlePaymentMethodChange called with:",e),j(e),!e){F(D);return}F([...D,...N["L/C at sight"===e?"L/C":"Payment Usance"===e?"Usance":e]||[]])},L={...null==o?void 0:o.payment,paymentMethod:A||(null==o?void 0:null===(a=o.payment)||void 0===a?void 0:a.paymentMethod),exchangeRate:null==o?void 0:null===(l=o.costDetail)||void 0===l?void 0:l.exchangeRate};(0,c.useEffect)(()=>{!async function(){if(o){m(!1);return}try{m(!0),await s(i)}catch(e){p(e instanceof Error?e.message:"데이터를 불러오는 중 오류가 발생했습니다.")}finally{m(!1)}}()},[i,o,s,m,p]);let M=async e=>{if(!o)return;"T/T"===e.paymentMethod&&(e.totalContractAmount=(o.costDetail.unitPrice||0)*(o.costDetail.exchangeRate||0)*(o.cargo.contractTon||0));let t={...e};if(t.blNumber&&t.blNumber!==o.contract.blNumber){f(t),y(!0);return}try{await g({formData:t,cargoId:i}),await s(i),h({title:"성공",description:"데이터가 성공적으로 저장되었습니다."})}catch(e){h({title:"오류",description:e instanceof Error?e.message:"데이터 저장 중 오류가 발생했습니다.",variant:"destructive"})}},O=async e=>{if(y(!1),b){try{await g({formData:b,cargoId:i,option:e}),await s(i),h({title:"성공",description:"데이터가 성공적으로 저장되었습니다."})}catch(e){h({title:"오류",description:e instanceof Error?e.message:"데이터 저장 중 오류가 발생했습니다.",variant:"destructive"})}f(null)}};return u?(0,n.jsx)(r.A,{className:"w-full h-full flex items-center justify-center",children:(0,n.jsx)(d.A,{})}):o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x,{}),(0,n.jsx)(es,{open:v,onClose:()=>y(!1),onSelect:O}),(0,n.jsxs)(r.A,{className:"w-full mx-auto inline-flex justify-start items-start gap-6 flex-wrap content-start",children:[(0,n.jsx)(en,{title:"계약 정보",fields:S(C),className:"w-full",data:{...o.contract,contractTon:o.cargo.contractTon},onSave:e=>M(e)}),(0,n.jsx)(en,{title:"결제 정보",fields:k,className:"w-full",data:L,onSave:e=>{M(e)},onFieldChange:(e,t)=>{"paymentMethod"===e&&I(t)}}),(0,n.jsx)(en,{title:"원가 정보",fields:w,className:"w-full md:w-[calc(50%-12px)]",data:{...o.costDetail,purchaseFeeRate:o.cargo.purchaseFeeRate},onSave:e=>M(e)}),(0,n.jsx)(en,{title:"수입회사 금액 정보",fields:R,className:"w-full md:w-[calc(50%-12px)]",data:o.cost,onSave:e=>M(e)}),(0,n.jsx)(en,{title:"곰표 비용 정보",fields:E,className:"w-full",data:o.cost,onSave:e=>M(e)}),(0,n.jsx)(en,{title:"비용 정보",fields:P,className:"w-full",data:o.cargo,onSave:e=>M(e)})]})]}):(0,n.jsx)("div",{})}let eu=[{name:"itemName",label:"품목명",gridSize:6,valueType:"string"},{name:"itemVariety",label:"품종",gridSize:6,valueType:"string"},{name:"originCountry",label:"원산지",gridSize:12,valueType:"string"},{name:"hsCode",label:"HS Code",gridSize:12,valueType:"string"}],em=[{name:"packingUnit",label:"포장 단위",gridSize:12,type:"select",valueType:"string",options:[{value:"25kg",label:"25kg"},{value:"1.2ton",label:"1.2ton"},{value:"bulk",label:"bulk"}]},{name:"contractTon",label:"계약 톤수",gridSize:12,endAdornment:"톤",valueType:"number",type:"number"},{name:"containerCount",label:"컨테이너 개수",gridSize:12,endAdornment:"개",valueType:"number",type:"number"}],ep=[{name:"shippingCompany",label:"선사",gridSize:12,valueType:"string"},{name:"customsClearanceDate",label:"통관일",gridSize:12,valueType:"string",type:"date"},{name:"warehouseEntryDate",label:"입고일",gridSize:12,valueType:"string",type:"date"},{name:"quarantineDate",label:"검역일",gridSize:12,valueType:"string",type:"date"},{name:"palletOrderDate",label:"파레트 주문일",gridSize:12,valueType:"string",type:"date"},{name:"palletType",label:"파레트 종류",gridSize:12,valueType:"string"}],eg={name:"remark",label:"비고",gridSize:12,valueType:"string",type:"textarea"},eh=e=>e?Object.entries(e).reduce((e,t)=>{let[a,n]=t;return null==n?e[a]="":e[a]=n,e},{}):{},ex=(e,t)=>({packingUnit:(null==e?void 0:e.packingUnit)||null,contractTon:(null==t?void 0:t.contractTon)||null,containerCount:(null==t?void 0:t.containerCount)||null}),ev=(e,t)=>({palletOrderDate:(null==t?void 0:t.palletOrderDate)||null,palletType:(null==t?void 0:t.palletType)||null,shippingCompany:(null==t?void 0:t.shippingCompany)||null,customsClearanceDate:(null==e?void 0:e.customsClearanceDate)||null,warehouseEntryDate:(null==e?void 0:e.warehouseEntryDate)||null,quarantineDate:(null==e?void 0:e.quarantineDate)||null});function ey(e){var t;let{cargoId:a}=e,[l]=(0,U.fp)(Q),[i]=(0,U.fp)(X),[,o]=(0,U.fp)(Z),{toast:s,ToastComponent:c}=ei(),u=async e=>{if(l)try{await o({formData:e,cargoId:a}),s({title:"성공",description:"데이터가 성공적으로 저장되었습니다."})}catch(e){s({title:"오류",description:e instanceof Error?e.message:"데이터 저장 중 오류가 발생했습니다.",variant:"destructive"})}};if(i)return(0,n.jsx)(r.A,{className:"w-full h-full flex items-center justify-center",children:(0,n.jsx)(d.A,{})});if(!l)return(0,n.jsx)("div",{});let m=eh(l.item),p=eh(ex(l.item,l.cargo)),g=eh(ev(l.cargo,l.shipment)),h={remark:(null===(t=l.cargo)||void 0===t?void 0:t.remark)||""};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsx)(en,{title:"상품 정보",fields:eu,data:m,onSave:e=>u(e)}),(0,n.jsx)(en,{title:"포장 정보",fields:em,data:p,onSave:e=>u(e)}),(0,n.jsx)(en,{title:"상태 정보",fields:ep,data:g,onSave:e=>u(e)}),(0,n.jsx)(en,{title:"비고",fields:[eg],data:h,onSave:e=>u(e)})]}),(0,n.jsx)(c,{})]})}var eb=a(79508);let ef=(0,F.createServerReference)("6007af0150aa50b8121a08fad7f6e063f792f80606",F.callServer,void 0,F.findSourceMapURL,"updateCargoStatusInfo");var eA=a(40017),ej=a(57797),eC=a(89085),eT=a(33096),eS=a(68116),eD=a(83675),eN=a(70006),ew=a(57598),eR=a(40404),eP=a(39390),eE=a(58361),eU=a(43828),ek=a(81143),eF=a(17341),eI=a(73244);let eL=(0,F.createServerReference)("600e4d2a170c5351166aca6b9d189b40b8b9519169",F.callServer,void 0,F.findSourceMapURL,"getDocuments"),eM=(0,F.createServerReference)("78654b4f4b20d5a20ae1bc3f4c0976e3dab2c2d539",F.callServer,void 0,F.findSourceMapURL,"getUploadPresignedUrl"),eO=(0,F.createServerReference)("4065f670e3e59a5f1210490a4464c2c6c8545d9a42",F.callServer,void 0,F.findSourceMapURL,"saveDocument"),e_=(0,F.createServerReference)("4058de255885158b559822447bf20e5f7a35925b90",F.callServer,void 0,F.findSourceMapURL,"getSignedDownloadUrl"),eW=(0,F.createServerReference)("60a53ff2342a819d59fbb2d3416d8e980c0c73f582",F.callServer,void 0,F.findSourceMapURL,"deleteDocument"),ez=(0,k.eU)({}),eV=(0,k.eU)(e=>e(ez),(e,t,a)=>{let{relatedId:n,category:r,documents:l,isLoading:i}=a,o=e(ez),s="".concat(n,"-").concat(r);t(ez,{...o,[s]:{documents:l,isLoading:i,lastFetched:Date.now()}})}),eB=(0,k.eU)(e=>{let t=e(ez);return(e,a)=>{var n;return(null===(n=t["".concat(e,"-").concat(a)])||void 0===n?void 0:n.documents)||[]}}),eH=(0,k.eU)(e=>{let t=e(ez);return(e,a)=>{var n;return(null===(n=t["".concat(e,"-").concat(a)])||void 0===n?void 0:n.isLoading)||!1}});function eG(e){let{open:t,onClose:a,onUpload:i,category:o}=e,[d,u]=(0,c.useState)(!1),[m,p]=(0,c.useState)([]),[g,h]=(0,c.useState)(!1),[v,y]=(0,c.useState)({}),b=()=>{p([]),h(!1),y({})},f=(0,c.useCallback)(e=>{e.preventDefault(),u(!0)},[]),A=(0,c.useCallback)(e=>{e.preventDefault(),u(!1)},[]),j=(0,c.useCallback)(e=>{e.preventDefault(),u(!1);let t=Array.from(e.dataTransfer.files);t.length>0&&p(e=>[...e,...t])},[]),C=e=>{p(t=>t.filter((t,a)=>a!==e))},T=()=>{g||(b(),a())};return(0,n.jsxs)(eA.A,{open:t,onClose:T,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(ej.A,{children:"contract"===o?"계약 관련 서류 업로드":"선적 관련 서류 업로드"}),(0,n.jsxs)(eC.A,{children:[(0,n.jsxs)(r.A,{className:"mt-4 p-8 border-2 border-dashed rounded-lg text-center ".concat(d?"border-primary bg-primary/5":"border-gray-300"),onDragOver:f,onDragLeave:A,onDrop:j,children:[(0,n.jsx)(eU.A,{className:"text-4xl text-gray-400 mb-4"}),(0,n.jsx)(l.A,{variant:"body1",sx:{mb:2},children:"파일을 드래그하여 업로드하거나"}),(0,n.jsxs)(s.A,{variant:"outlined",component:"label",disabled:g,children:["파일 선택",(0,n.jsx)("input",{type:"file",multiple:!0,hidden:!0,onChange:e=>{let t=Array.from(e.target.files||[]);t.length>0&&p(e=>[...e,...t])},disabled:g})]})]}),m.length>0&&(0,n.jsxs)(r.A,{className:"mt-4",children:[(0,n.jsx)(l.A,{variant:"subtitle2",className:"mb-2",children:"선택된 파일 목록"}),(0,n.jsx)(eT.A,{className:"max-h-48 overflow-y-auto",children:m.map((e,t)=>(0,n.jsx)(eS.Ay,{secondaryAction:(0,n.jsx)(x.A,{edge:"end","aria-label":"delete",onClick:()=>C(t),disabled:g,children:(0,n.jsx)(ek.A,{})}),children:(0,n.jsx)(eD.A,{primary:e.name,secondary:"".concat((e.size/1024).toFixed(2)," KB")})},t))})]}),g&&m.length>0&&(0,n.jsxs)(r.A,{className:"mt-4",children:[(0,n.jsx)(l.A,{variant:"subtitle2",className:"mb-2",children:"업로드 진행 상태"}),(0,n.jsx)(eT.A,{className:"max-h-48 overflow-y-auto",children:m.map((e,t)=>(0,n.jsx)(eS.Ay,{children:(0,n.jsxs)(r.A,{sx:{width:"100%"},children:[(0,n.jsx)(l.A,{variant:"body2",children:e.name}),(0,n.jsx)(eN.A,{variant:"determinate",value:v[e.name]||0,sx:{mt:1,height:8,borderRadius:4}}),(0,n.jsxs)(l.A,{variant:"caption",sx:{mt:.5,display:"block"},children:[v[e.name]||0,"%"]})]})},t))})]})]}),(0,n.jsxs)(ew.A,{children:[(0,n.jsx)(s.A,{onClick:T,disabled:g,children:"취소"}),(0,n.jsx)(s.A,{variant:"contained",onClick:()=>{m.length>0&&(h(!0),y(m.reduce((e,t)=>(e[t.name]=0,e),{})),i(m,o,(e,t)=>{y(n=>{let r={...n,[e]:t};return 100===t&&Object.values(r).every(e=>100===e)&&setTimeout(()=>{b(),a()},1e3),r})}))},disabled:0===m.length||g,children:g?"업로드 중...":"업로드 (".concat(m.length,")")})]})]})}function eK(e){let{cargoId:t}=e,[a,i]=(0,c.useState)("contract"),[u,m]=(0,c.useState)(!1),[p,g]=(0,c.useState)(!1),[v,y]=(0,c.useState)(null),{toast:b}=ei(),[,f]=(0,U.fp)(eV),A=(0,U.md)(eB),j=(0,U.md)(eH),[C]=(0,U.fp)(Q),[T,S]=(0,c.useState)(""),[D,N]=(0,c.useState)("");(0,c.useEffect)(()=>{var e,t;if(C){if(S((null===(e=C.contract)||void 0===e?void 0:e.id)||""),N((null===(t=C.shipment)||void 0===t?void 0:t.id)||""),!T&&!D){b({title:"오류",description:"관련 문서를 찾을 수 없습니다.",variant:"destructive"});return}P()}},[C]);let w=A("contract"===a?T:D,a),R=j("contract"===a?T:D,a);(0,c.useEffect)(()=>{P()},[t]);let P=async()=>{for(let a of["contract","shipment"]){var e,t;let n="contract"===a?null==C?void 0:null===(e=C.contract)||void 0===e?void 0:e.id:null==C?void 0:null===(t=C.shipment)||void 0===t?void 0:t.id;if(!n){b({title:"오류",description:"관련 문서를 찾을 수 없습니다.",variant:"destructive"});return}try{f({relatedId:n,category:a,documents:[],isLoading:!0});let e=await eL(n,a);e.success&&e.documents?f({relatedId:n,category:a,documents:e.documents,isLoading:!1}):(console.error("".concat(a," 문서 목록 조회 실패:"),e.error),b({title:"오류",description:e.error||"문서 목록을 불러오는데 실패했습니다.",variant:"destructive"}),f({relatedId:n,category:a,documents:[],isLoading:!1}))}catch(e){console.error("".concat(a," 문서 목록 조회 중 오류 발생:"),e),b({title:"오류",description:"문서 목록을 불러오는 중 오류가 발생했습니다.",variant:"destructive"}),f({relatedId:n,category:a,documents:[],isLoading:!1})}}},E=async(e,t,a)=>{try{var n,r;let l="contract"===t?null==C?void 0:null===(n=C.contract)||void 0===n?void 0:n.id:null==C?void 0:null===(r=C.shipment)||void 0===r?void 0:r.id;if(!l){b({title:"오류",description:"관련 문서를 찾을 수 없습니다.",variant:"destructive"});return}let i=e.map(async e=>{let n=await eM(e.name,e.type,l,t);if(!n.success||!n.url)throw Error("파일 ".concat(e.name,"의 Presigned URL 생성에 실패했습니다."));if(await new Promise((t,r)=>{let l=new XMLHttpRequest;l.upload.addEventListener("progress",t=>{if(t.lengthComputable){let n=Math.round(t.loaded/t.total*100);a(e.name,n)}}),l.open("PUT",n.url),l.setRequestHeader("Content-Type",e.type),l.onload=()=>{l.status>=200&&l.status<300?(a(e.name,100),t()):r(Error("업로드 실패: ".concat(l.statusText)))},l.onerror=()=>r(Error("업로드 중 네트워크 오류 발생")),l.send(e)}),!(await eO({name:e.name,type:e.type,url:n.fileUrl,relatedId:l,category:t})).success)throw Error("파일 ".concat(e.name,"의 정보 저장에 실패했습니다."))});await Promise.all(i),await P(),b({title:"성공",description:"".concat(e.length,"개의 파일이 업로드되었습니다.")}),setTimeout(()=>{m(!1)},1e3)}catch(e){console.error("파일 업로드 중 오류 발생:",e),b({title:"오류",description:e instanceof Error?e.message:"파일 업로드 중 오류가 발생했습니다.",variant:"destructive"})}},k=async e=>{try{let t=await e_(e.id);t.success?window.open(t.url,"_blank"):b({title:"오류",description:t.error||"파일 다운로드에 실패했습니다.",variant:"destructive"})}catch(e){console.error("파일 다운로드 중 오류 발생:",e),b({title:"오류",description:"파일 다운로드 중 오류가 발생했습니다.",variant:"destructive"})}},F=async e=>{y(e),g(!0)},I=async()=>{if(v)try{let e=await eW(v.id,t);e.success?(g(!1),y(null),await P(),b({title:"성공",description:"문서가 삭제되었습니다."})):b({title:"오류",description:e.error||"문서 삭제에 실패했습니다.",variant:"destructive"})}catch(e){console.error("문서 삭제 중 오류 발생:",e),b({title:"오류",description:"문서 삭제 중 오류가 발생했습니다.",variant:"destructive"})}},L=()=>{g(!1),y(null)},M=w.filter(e=>e.documentCategory===a);return R?(0,n.jsx)(r.A,{className:"flex justify-center items-center h-full",children:(0,n.jsx)(d.A,{})}):(0,n.jsxs)(r.A,{className:"space-y-6",children:[(0,n.jsx)(h.A,{className:"p-4",children:(0,n.jsxs)(o.A,{spacing:3,children:[(0,n.jsxs)(o.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(l.A,{variant:"h6",className:"font-bold",children:"서류 관리"}),(0,n.jsx)(s.A,{variant:"contained",startIcon:(0,n.jsx)(eF.A,{}),onClick:()=>m(!0),children:"contract"===a?"계약 관련 서류 업로드":"선적 관련 서류 업로드"})]}),(0,n.jsxs)(eR.A,{value:a,onChange:(e,t)=>i(t),className:"border-b",children:[(0,n.jsx)(eP.A,{label:"계약 관련 서류",value:"contract"}),(0,n.jsx)(eP.A,{label:"선적 관련 서류",value:"shipment"})]}),(0,n.jsx)(eT.A,{children:0===M.length?(0,n.jsx)(eS.Ay,{children:(0,n.jsx)(eD.A,{primary:"등록된 ".concat("contract"===a?"계약":"선적"," 관련 서류가 없습니다.")})}):M.map(e=>(0,n.jsx)(eS.Ay,{divider:!0,secondaryAction:(0,n.jsxs)(o.A,{direction:"row",spacing:1,children:[(0,n.jsx)(x.A,{edge:"end","aria-label":"download",onClick:()=>k(e),children:(0,n.jsx)(eI.A,{})}),(0,n.jsx)(x.A,{edge:"end","aria-label":"delete",onClick:()=>F(e),children:(0,n.jsx)(ek.A,{})})]}),children:(0,n.jsx)(eD.A,{primary:e.documentName,secondary:new Date(e.uploadDate).toLocaleDateString()})},e.id))})]})}),(0,n.jsx)(eG,{open:u,onClose:()=>m(!1),onUpload:E,category:a}),(0,n.jsxs)(eA.A,{open:p,onClose:L,"aria-labelledby":"delete-dialog-title","aria-describedby":"delete-dialog-description",children:[(0,n.jsx)(ej.A,{id:"delete-dialog-title",children:"문서 삭제 확인"}),(0,n.jsx)(eC.A,{children:(0,n.jsxs)(eE.A,{id:"delete-dialog-description",children:[null==v?void 0:v.documentName," 문서를 삭제하시겠습니까? 이 작업은 되돌릴 수 없습니다."]})}),(0,n.jsxs)(ew.A,{children:[(0,n.jsx)(s.A,{onClick:L,children:"취소"}),(0,n.jsx)(s.A,{onClick:I,color:"error",autoFocus:!0,children:"삭제"})]})]})]})}var eq=a(67394),eQ=a(36429),eX=a(87418),eJ=a(67446),eY=a(45278),eZ=a(48805),e$=a(52511);function e0(e){let{item:t,onClick:a}=e,i=(0,eq.GP)((0,eQ.H)(t.created_at),"yyyy.MM.dd HH:mm",{locale:eX.ko}),o="status"===t.type?"#e8f5e9":"change"===t.type?"#fff8e1":"#e3f2fd",s="status"===t.type?"#c8e6c9":"change"===t.type?"#ffecb3":"#bbdefb",c="status"===t.type?"#43a047":"change"===t.type?"#f57c00":"#1976d2";return(0,n.jsxs)(eJ.A,{elevation:0,sx:{position:"relative",display:"flex",alignItems:"flex-start",padding:2,paddingTop:{xs:2.5,sm:2},paddingLeft:{xs:3,sm:4.5},borderRadius:2,border:"1px solid #e0e0e0",backgroundColor:o,cursor:"pointer",transition:"all 0.2s","&:hover":{boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}},onClick:()=>{a&&a(t)},children:[(0,n.jsx)(r.A,{sx:{position:"absolute",left:{xs:12,sm:16},top:{xs:16,sm:18}},children:(0,n.jsx)(r.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",width:28,height:28,borderRadius:"50%",backgroundColor:s,color:c,boxShadow:"0 1px 2px rgba(0,0,0,0.1)"},children:(0,n.jsx)(eZ.A,{sx:{width:18,height:18}})})}),(0,n.jsxs)(r.A,{sx:{flexGrow:1,minWidth:0,paddingLeft:{xs:1.5,sm:2}},children:["change"===t.type?(0,n.jsx)(e1,{item:t}):"status"===t.type?(0,n.jsx)(e2,{item:t}):(0,n.jsx)(e5,{item:t}),(0,n.jsxs)(r.A,{sx:{mt:1,display:"flex",alignItems:"center",fontSize:"0.75rem",color:"text.secondary"},children:[(0,n.jsx)(e$.A,{sx:{mr:.5,width:12,height:12}}),(0,n.jsx)(l.A,{variant:"caption",children:i})]})]})]})}function e1(e){let{item:t}=e;return(0,n.jsxs)(l.A,{variant:"body2",sx:{lineHeight:1.5},children:[(0,n.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.user}),(0,n.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","님이"," "]}),(0,n.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.field}),(0,n.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:["을(를)"," "]}),(0,n.jsx)(l.A,{component:"span",sx:{fontWeight:500,textDecoration:"line-through",color:"grey.500"},children:t.from}),(0,n.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","→"," "]}),(0,n.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.to}),(0,n.jsx)(l.A,{component:"span",sx:{color:"text.secondary"},children:"으로 변경"})]})}function e5(e){let{item:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.A,{variant:"body2",sx:{lineHeight:1.5,mb:.5},children:[(0,n.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.user}),(0,n.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","님이"," "]}),(0,n.jsxs)(l.A,{component:"span",sx:{fontWeight:500},children:[t.changes.length,"개 항목"]}),(0,n.jsx)(l.A,{component:"span",sx:{color:"text.secondary"},children:"을 동시에 변경"})]}),(0,n.jsx)(r.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5,mt:.5},children:t.changes.map((e,t)=>(0,n.jsx)(eY.A,{label:e.field,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20,backgroundColor:"rgba(25, 118, 210, 0.08)",borderColor:"rgba(25, 118, 210, 0.3)"}},t))})]})}function e2(e){let{item:t}=e;return(0,n.jsxs)(l.A,{variant:"body2",sx:{lineHeight:1.5},children:[(0,n.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:["화물 상태가"," "]}),(0,n.jsxs)(l.A,{component:"span",sx:{fontWeight:500},children:["'",t.status,"'"]}),(0,n.jsx)(l.A,{component:"span",sx:{color:"text.secondary"},children:"로 변경됨"}),"시스템 처리"!==t.user&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","("]}),(0,n.jsx)(l.A,{component:"span",sx:{fontWeight:500},children:t.user}),(0,n.jsxs)(l.A,{component:"span",sx:{color:"text.secondary"},children:[" ","님)"]})]})]})}var e6=a(18686),e8=a(6309),e4=a(89189);function e3(e){let{date:t}=e,a=(0,eQ.H)(t),i=(0,eq.GP)(a,"yyyy년 MM월 dd일",{locale:eX.ko});return(0,e6.c)(a)?i="오늘":(0,e8.P)(a)&&(i="어제"),(0,n.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",py:1.5},children:[(0,n.jsx)(e4.A,{sx:{flexGrow:1}}),(0,n.jsx)(l.A,{variant:"body2",sx:{px:2,fontWeight:500,color:"text.secondary"},children:i}),(0,n.jsx)(e4.A,{sx:{flexGrow:1}})]})}function e7(e){let{item:t,open:a,onOpenChange:i}=e;if(!t)return null;let o=(0,eq.GP)((0,eQ.H)(t.created_at),"yyyy년 MM월 dd일 HH시 mm분",{locale:eX.ko}),s="change"===t.type,c="multi-change"===t.type;return(0,n.jsxs)(eA.A,{open:a,onClose:()=>{i(!1)},maxWidth:"sm",fullWidth:!0,children:[(0,n.jsx)(ej.A,{children:s?"변경 이력 상세":c?"다중 변경 이력 상세":"상태 변경 상세"}),(0,n.jsxs)(eC.A,{children:[(0,n.jsxs)(eE.A,{style:{marginBottom:"16px"},children:[o,"에 기록된 이력입니다."]}),(0,n.jsxs)("div",{style:{padding:"16px 0"},children:[(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{color:"#6c757d"},children:"작업자"}),(0,n.jsx)("span",{style:{fontWeight:500},children:t.user})]}),s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{color:"#6c757d"},children:"변경 필드"}),(0,n.jsx)("span",{style:{fontWeight:500},children:t.field})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{color:"#6c757d"},children:"변경 전"}),(0,n.jsx)("span",{style:{fontWeight:500,color:"#dc3545"},children:t.from})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{color:"#6c757d"},children:"변경 후"}),(0,n.jsx)("span",{style:{fontWeight:500,color:"#198754"},children:t.to})]})]}),!s&&!c&&(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{color:"#6c757d"},children:"변경된 상태"}),(0,n.jsx)("span",{style:{fontWeight:500},children:t.status})]}),c&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{color:"#6c757d"},children:"변경된 항목 수"}),(0,n.jsxs)("span",{style:{fontWeight:500},children:[t.changes.length,"개"]})]}),(0,n.jsxs)(r.A,{sx:{mt:2,mb:1},children:[(0,n.jsx)(l.A,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"변경 상세 내역"}),(0,n.jsx)(eT.A,{disablePadding:!0,children:t.changes.map((e,t)=>(0,n.jsx)(eS.Ay,{sx:{py:1,px:2,mb:1,backgroundColor:"rgba(0, 0, 0, 0.02)",borderRadius:1},children:(0,n.jsx)(eD.A,{primary:(0,n.jsx)(l.A,{variant:"body2",fontWeight:500,children:e.field}),secondary:(0,n.jsxs)(r.A,{sx:{mt:.5},children:[(0,n.jsx)(l.A,{variant:"body2",component:"span",sx:{display:"block",color:"error.main",textDecoration:"line-through"},children:e.from}),(0,n.jsx)(l.A,{variant:"body2",component:"span",sx:{display:"block",color:"success.main"},children:e.to})]})})},t))})]})]}),(0,n.jsx)(e4.A,{style:{margin:"16px 0"}}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{color:"#6c757d"},children:"기록 시간"}),(0,n.jsx)("span",{style:{fontWeight:500},children:o})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:"8px",marginBottom:"8px"},children:[(0,n.jsx)("span",{style:{color:"#6c757d"},children:"기록 유형"}),(0,n.jsx)("span",{style:{fontWeight:500},children:s?"변경 이력":c?"다중 변경 이력":"상태 변경"})]})]})]})]})}var e9=a(4906),te=a(51403),tt=a(42776);function ta(e){let{items:t,showFilters:a=!0,showDateGroups:r=!0}=e,[l,i]=(0,c.useState)("all"),[o,d]=(0,c.useState)(null),[u,m]=(0,c.useState)(!1),p=(0,c.useMemo)(()=>"all"===l?t:t.filter(e=>e.type===l),[t,l]),g=(0,c.useMemo)(()=>{let e={};return p.forEach(t=>{let a=(0,te.x)((0,tt.o)((0,eQ.H)(t.created_at)));e[a]||(e[a]=[]),e[a].push(t)}),Object.entries(e).sort((e,t)=>{let[a]=e,[n]=t;return new Date(n).getTime()-new Date(a).getTime()}).map(e=>{let[t,a]=e;return{date:t,items:a.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())}})},[p]),h=e=>{d(e),m(!0)};return 0===t.length?(0,n.jsx)("div",{style:{textAlign:"center",padding:"40px 0",color:"#6c757d"},children:"기록된 변경 이력이 없습니다."}):(0,n.jsxs)("div",{style:{width:"100%"},children:[a&&(0,n.jsx)("div",{style:{display:"flex",marginBottom:"16px",position:"sticky",top:0,backgroundColor:"transparent",zIndex:10,padding:"8px"},children:(0,n.jsxs)(e9.A,{size:"small",variant:"outlined",children:[(0,n.jsx)(s.A,{variant:"all"===l?"contained":"outlined",onClick:()=>i("all"),children:"전체"}),(0,n.jsx)(s.A,{variant:"change"===l?"contained":"outlined",onClick:()=>i("change"),children:"단일변경"}),(0,n.jsx)(s.A,{variant:"multi-change"===l?"contained":"outlined",onClick:()=>i("multi-change"),children:"다중변경"}),(0,n.jsx)(s.A,{variant:"status"===l?"contained":"outlined",onClick:()=>i("status"),children:"상태변경"})]})}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:r?g.map(e=>{let{date:t,items:a}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)(e3,{date:t}),(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:a.map((e,t)=>(0,n.jsx)(e0,{item:e,onClick:h},"".concat(e.type,"-").concat(t,"-").concat(e.created_at)))})]},t)}):p.sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()).map((e,t)=>(0,n.jsx)(e0,{item:e,onClick:h},"".concat(e.type,"-").concat(t,"-").concat(e.created_at)))}),(0,n.jsx)(e7,{item:o,open:u,onOpenChange:m})]})}let tn=(0,F.createServerReference)("40fa5a7a648a5fa9cc48cb60cb4ccce34941067619",F.callServer,void 0,F.findSourceMapURL,"getHistoryLogs");function tr(){let[e]=(0,U.fp)(Q),[t,a]=(0,c.useState)([]),[r,l]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{if(null==e?void 0:e.cargo.id)try{l(!0);let t=await tn(e.cargo.id);a(t)}catch(e){console.error("히스토리 데이터를 가져오는 중 오류 발생:",e)}finally{l(!1)}})()},[null==e?void 0:e.cargo.id]),r)?(0,n.jsx)("div",{className:"flex justify-center items-center",children:(0,n.jsx)(d.A,{})}):(0,n.jsx)(ta,{items:t})}var tl=a(66292),ti=a(33964);let to=[{field:"name",headerName:"",editable:!1,flex:1,minWidth:120,pinned:"left"},{field:"cleared",headerName:"통관재고",editable:!0,type:"number",flex:1,minWidth:120,cellEditorPopup:!1},{field:"uncleared",headerName:"미통관재고",editable:!0,type:"number",flex:1,minWidth:120,cellEditorPopup:!1}];function ts(e){let{cargoId:t}=e,[l,i]=(0,c.useState)([]),[o,s]=(0,c.useState)(!1),u=(0,U.md)(Q),{toast:m,ToastComponent:p}=ei();(0,c.useEffect)(()=>{(async()=>{try{var e,a,n,r,l,o,c,d,m,p,g;s(!0);let h=await (0,ti.T)(t),x=h?(e=h,[{id:"dnb",name:"디앤비 재고",cleared:null!==(a=e.dnbCleared)&&void 0!==a?a:0,uncleared:null!==(n=e.dnbUncleared)&&void 0!==n?n:0},{id:"namhae",name:"남해 재고",cleared:null!==(r=e.namhaeCleared)&&void 0!==r?r:0,uncleared:null!==(l=e.namhaeUncleared)&&void 0!==l?l:0},{id:"interliving",name:"인터리빙 재고",cleared:null!==(o=e.interlivingCleared)&&void 0!==o?o:0,uncleared:null!==(c=e.interlivingUncleared)&&void 0!==c?c:0},{id:"gompyo",name:"곰표 재고",cleared:null!==(d=e.gompyoCleared)&&void 0!==d?d:0,uncleared:null!==(m=e.gompyoUncleared)&&void 0!==m?m:0},{id:"rample",name:"램플 재고",cleared:null!==(p=e.ramplusCleared)&&void 0!==p?p:0,uncleared:null!==(g=e.ramplusUncleared)&&void 0!==g?g:0}]):[];x.push(tc(u,x)),i(x),s(!1)}catch(e){console.error("Error fetching stock:",e),s(!1)}})()},[]);let g=async e=>{let{id:n}=e.data,r=e.colDef.field,o=e.newValue;if("name"===r)return;if((""===o||null===o)&&(o=0),isNaN(Number(o))){e.node.setDataValue(r,e.oldValue);return}let s=l.find(e=>e.id===n);if(!s)return;let c={...s,[r]:Number(o)};i(e=>{let t=e.map(e=>e.id===n?c:e).filter(e=>"sales"!==e.id);return[...t,tc(u,t)]});try{await a.e(676).then(a.bind(a,15676)).then(e=>{let{updateStock:a}=e;return a(t,n,c.cleared,c.uncleared)}),m({title:"성공",description:"상태가 성공적으로 변경되었습니다."})}catch(t){i(e=>{let t=e.map(e=>e.id===n?s:e).filter(e=>"sales"!==e.id);return[...t,tc(u,t)]}),e.node.setDataValue(r,e.oldValue),console.error("상태 업데이트 중 오류 발생:",t),m({title:"오류",description:"상태 변경 중 오류가 발생했습니다.",variant:"destructive"})}};return o?(0,n.jsx)(r.A,{className:"w-full h-full flex items-center justify-center",children:(0,n.jsx)(d.A,{})}):(0,n.jsxs)(r.A,{children:[(0,n.jsx)(r.A,{sx:{width:"50%",height:"".concat(56+56*l.length,"px"),display:"flex",justifyContent:"flex-start",alignItems:"flex-start"},children:(0,n.jsx)(tl.A,{columnDefs:to,data:l,loading:!1,error:null,pagination:!1,onCellValueChanged:g})}),(0,n.jsx)(p,{})]})}function tc(e,t){return{id:"sales",name:"판매량",cleared:function(e,t){var a;if(!e)return 0;let n=t.reduce((e,t)=>{var a,n;return e+(null!==(a=t.cleared)&&void 0!==a?a:0)+(null!==(n=t.uncleared)&&void 0!==n?n:0)},0);return(null!==(a=e.cargo.contractTon)&&void 0!==a?a:0)-n}(e,t),uncleared:0}}var td=function(e){return e.REVIEW="검토중",e.CONTRACTING="계약중",e.BEFORE_LC="L/C오픈전",e.BEFORE_ARRIVAL="입항전",e.WAREHOUSE_MOVING="창고 이동중",e.BEFORE_QUARANTINE="검역전",e.QUARANTINING="검역중",e.CUSTOMS_DECLARING="세관신고중",e.DONE_ARRIVAL="입항완료",e.AFTER_CUSTOMS="통관완료",e.SELLING="판매중",e}({});let tu={REVIEW:"검토중",CONTRACTING:"계약중",BEFORE_LC:"L/C오픈전",BEFORE_ARRIVAL:"입항전",WAREHOUSE_MOVING:"창고 이동중",BEFORE_QUARANTINE:"검역전",QUARANTINING:"검역중",CUSTOMS_DECLARING:"세관신고중",DONE_ARRIVAL:"입항완료",AFTER_CUSTOMS:"통관완료",SELLING:"판매중"},tm={검토중:"REVIEW",계약중:"CONTRACTING","L/C오픈전":"BEFORE_LC",입항전:"BEFORE_ARRIVAL","창고 이동중":"WAREHOUSE_MOVING",검역전:"BEFORE_QUARANTINE",검역중:"QUARANTINING",세관신고중:"CUSTOMS_DECLARING",입항완료:"DONE_ARRIVAL",통관완료:"AFTER_CUSTOMS",판매중:"SELLING"},tp=Object.values(td);function tg(){let e=(0,eb.useParams)(),[t,a]=(0,c.useState)("entire"),[d,u]=(0,U.fp)(Q),{toast:m,ToastComponent:p}=ei(),[g,h]=(0,c.useState)(!0),[x,v]=(0,c.useState)(!1),[y,b]=(0,c.useState)(!1),[f,A]=(0,c.useState)(null),j=(0,c.useRef)(null),C=(0,eb.useRouter)();(0,c.useEffect)(()=>{(async function(){try{if(d&&d.cargo.id===e.cargo_id){h(!1);return}await u(e.cargo_id),h(!1)}catch(e){console.error("화물 데이터 가져오기 실패:",e),C.push("/404")}})()},[e.cargo_id]),(0,c.useEffect)(()=>{x&&A(T())},[x]);let T=()=>{var e;if(!(null==d?void 0:null===(e=d.cargo)||void 0===e?void 0:e.progressStatus))return 0;let t=tu[d.cargo.progressStatus];return t?tp.indexOf(t):0},S=()=>null!==f?f:T(),D=()=>{let e=S();return e/(tp.length-1)*100},N=async t=>{if(!(null==d?void 0:d.cargo)||t<0||t>=tp.length)return;let a=tm[tp[t]];if(a)try{var n,r,l;await ef(e.cargo_id,{status:a,customsClearanceDate:d.cargo.customsClearanceDate||"",warehouseEntryDate:d.cargo.warehouseEntryDate||"",quarantineDate:d.cargo.quarantineDate||"",shippingCompany:(null===(n=d.shipment)||void 0===n?void 0:n.shippingCompany)||"",palletOrderDate:(null===(r=d.shipment)||void 0===r?void 0:r.palletOrderDate)||"",palletType:(null===(l=d.shipment)||void 0===l?void 0:l.palletType)||""}),await u(e.cargo_id),m({title:"성공",description:'상태가 "'.concat(tp[t],'"로 변경되었습니다.')})}catch(e){console.error("상태 업데이트 중 오류 발생:",e),m({title:"오류",description:"상태 변경 중 오류가 발생했습니다.",variant:"destructive"})}},w=e=>{if(!j.current)return 0;let t=j.current.getBoundingClientRect(),a=Math.max(0,Math.min(100,(e-t.left)/t.width*100)),n=tp.length,r=Math.round(a/(100/(n-1)));return Math.max(0,Math.min(n-1,r))},R=e=>{x&&(b(!0),e.preventDefault(),A(w(e.clientX)))},P=(0,c.useCallback)(e=>{y&&x&&A(w(e.clientX))},[y,x,w]),E=(0,c.useCallback)(()=>{y&&(b(!1),A(e=>e))},[y]);return(0,c.useEffect)(()=>(y&&(document.addEventListener("mousemove",P),document.addEventListener("mouseup",E)),()=>{document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",E)}),[y,P,E]),(0,n.jsx)(n.Fragment,{children:g||!d?(0,n.jsx)(r.A,{className:"w-full h-screen flex justify-center items-center",children:(0,n.jsx)(l.A,{className:"ml-4 text-lg",children:"로딩 중..."})}):(0,n.jsxs)("div",{className:"min-h-screen bg-background-paper",children:[(0,n.jsx)(r.A,{className:"w-full h-16 px-10 bg-background-default flex justify-between items-center",children:(0,n.jsx)(l.A,{variant:"h4",className:"text-success-darker font-bold font-['Public_Sans']",children:"상세보기"})}),(0,n.jsx)(r.A,{className:"w-full h-32 p-4 relative",children:(0,n.jsx)(i.A,{maxWidth:"xl",className:"progress-container h-full",children:(0,n.jsxs)(r.A,{className:"relative h-full flex items-center",children:[(0,n.jsx)(r.A,{ref:j,className:"w-full h-3 bg-gray-200 rounded-2xl ".concat(x?"cursor-pointer":""),onMouseDown:R}),(0,n.jsx)(r.A,{className:"absolute h-3 bg-gradient-to-r from-green-300 to-green-500 rounded-2xl transition-all duration-300 pointer-events-none",style:{width:(()=>{let e=S(),t=tp.length;return"".concat(e/(t-1)*100,"%")})()}}),x&&tp.map((e,t)=>{let a=t/(tp.length-1)*100;return(0,n.jsx)(r.A,{className:"absolute w-3 h-3 rounded-full transition-all duration-200 cursor-pointer ".concat(t<=S()?"bg-green-600 shadow-md":"bg-gray-400"," hover:scale-125"),style:{left:"".concat(a,"%"),top:"50%",transform:"translate(-50%, -50%)",zIndex:10},onClick:e=>{e.stopPropagation(),x&&A(t)}},e)}),(0,n.jsx)(r.A,{className:"absolute transition-none z-20 ".concat(x?"cursor-grab":""," ").concat(y?"cursor-grabbing":""),style:{left:"".concat(D(),"%"),top:"50%",transform:"translate(-50%, -50%)"},onMouseDown:R,children:(0,n.jsx)(r.A,{className:"w-12 h-12 bg-white rounded-full border-4 border-emerald-600 shadow-lg transition-all duration-300 ".concat(x?"hover:border-emerald-700 hover:scale-110":""," ").concat(y?"scale-125 shadow-2xl border-emerald-800":""),children:(0,n.jsx)(r.A,{className:"w-full h-full rounded-full bg-emerald-600 opacity-20"})})}),(0,n.jsx)(l.A,{className:"absolute text-sm font-semibold font-['Public_Sans'] whitespace-nowrap transition-none pointer-events-none ".concat(y?"text-emerald-800":"text-emerald-600"),style:{left:"".concat(D(),"%"),top:"calc(50% + 35px)",transform:"translateX(-50%)"},children:tp[S()]?tp[S()]:""}),x&&(0,n.jsx)(l.A,{className:"absolute text-xs text-gray-500 whitespace-nowrap bg-white px-2 py-1 rounded shadow-sm",style:{left:"50%",top:"calc(50% - 45px)",transform:"translateX(-50%)"},children:y?"드래그 중... 잠시 멈춰서 상태를 저장하세요":"동그라미를 드래그하거나 점을 클릭하여 상태를 변경하세요"})]})})}),(0,n.jsxs)(i.A,{maxWidth:"xl",className:"mt-8",children:[(0,n.jsx)(r.A,{className:"mb-8",children:(0,n.jsxs)(o.A,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:"center",children:[(0,n.jsxs)(o.A,{direction:"row",spacing:2,children:[(0,n.jsx)(s.A,{variant:"contained",color:"entire"===t?"primary":"inherit",onClick:()=>a("entire"),children:"전체정보"}),(0,n.jsx)(s.A,{variant:"contained",color:"document"===t?"primary":"inherit",onClick:()=>a("document"),children:"서류정보"}),(0,n.jsx)(s.A,{variant:"contained",color:"cargo"===t?"primary":"inherit",onClick:()=>a("cargo"),children:"화물 정보"}),(0,n.jsx)(s.A,{variant:"contained",color:"stock"===t?"primary":"inherit",onClick:()=>a("stock"),children:"재고 정보"}),(0,n.jsx)(s.A,{variant:"contained",color:"history"===t?"primary":"inherit",onClick:()=>a("history"),children:"히스토리"})]}),(0,n.jsxs)(o.A,{direction:"row",spacing:2,children:[(0,n.jsx)(s.A,{variant:"contained",color:"primary",onClick:x?()=>{null!==f&&f!==T()&&N(f),v(!1)}:()=>{v(!0),b(!1),A(T())},children:x?"편집 완료":"편집 모드"}),x&&(0,n.jsx)(s.A,{variant:"outlined",color:"inherit",onClick:()=>{A(T()),v(!1)},children:"취소"})]})]})}),(()=>{switch(t){case"entire":return(0,n.jsx)(ed,{cargoId:e.cargo_id});case"document":return(0,n.jsx)(eK,{cargoId:e.cargo_id});case"cargo":return(0,n.jsx)(ey,{cargoId:e.cargo_id});case"history":return(0,n.jsx)(tr,{});case"stock":return(0,n.jsx)(ts,{cargoId:e.cargo_id});default:return null}})(),(0,n.jsx)(r.A,{className:"w-[1093px] h-[50px]"})]}),(0,n.jsx)(p,{})]})})}},87603:(e,t,a)=>{"use strict";a.d(t,{k:()=>r});var n=a(64358);let r=(0,n.createServerReference)("703550cefa857a15f4eb931d76f9d453f47912e210",n.callServer,void 0,n.findSourceMapURL,"addUnclearedStockNumber")}},e=>{var t=t=>e(e.s=t);e.O(0,[775,82,426,336,69,510,90,394,956,59,555,40,20,772,292,39,77,358],()=>t(55587)),_N_E=e.O()}]);
