(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{15006:(e,r,n)=>{"use strict";n.d(r,{default:()=>O});var i=n(22318),t=n(20926),l=n(40017),a=n(57797),s=n(89085),o=n(49344),c=n(60720),d=n(86956);let u=(0,n(49812).eU)(0);var x=n(64358);let m=(0,x.createServerReference)("70b1dad409324ae440f2c126ecf620aa194ea08b16",x.callServer,void 0,x.findSourceMapURL,"addLink"),h=c.z.object({linkName:c.z.string().min(1,"링크명을 입력해주세요."),linkUrl:c.z.string().min(1,"링크URL을 입력해주세요.").url("유효한 URL 형식이어야 합니다.").refine(e=>e.startsWith("http://")||e.startsWith("https://"),{message:"URL은 http:// 또는 https://로 시작해야 합니다."})}),f=[{name:"linkName",label:"링크명",type:"text",required:!0},{name:"linkUrl",label:"링크URL",type:"text",required:!0}];function p(e){let{onClose:r,submitLabel:n="저장"}=e,l=(0,d.Xr)(u),[a,s]=(0,t.useState)({}),c=async e=>{try{await m(e.linkName,e.linkUrl,0),l(e=>e+1),s({}),null==r||r()}catch(e){e instanceof Error?s({linkName:e.message}):s({links:"오류가 발생했습니다."})}};return(0,i.jsx)(o.A,{fields:f,onSubmit:c,submitLabel:n,zodSchema:h,fieldErrors:a})}function b(e){let{open:r,onClose:n}=e;return(0,i.jsxs)(l.A,{open:r,onClose:n,maxWidth:"xs",fullWidth:!0,children:[(0,i.jsx)(a.A,{children:"링크 추가"}),(0,i.jsx)(s.A,{children:(0,i.jsx)(p,{onClose:n})})]})}var j=n(92262),v=n(6987),g=n(71599),A=n(87832),y=n(27849),k=n(67446),S=n(1949),C=n(42923),w=n(46558),R=n(79290),W=n(59026),z=n(40963),L=n(81664),N=n(31116),U=n(98593);function E(e){return/^https?:\/\//i.test(e)?e:"https://".concat(e)}let F=e=>{let{link:r,onToggleFavorite:n,onDelete:l,disable:a}=e,[s,o]=(0,t.useState)(!1),c=()=>{a||window.open(E(r.url),"_blank","noopener,noreferrer")};return(0,i.jsxs)(k.A,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[(0,i.jsxs)(y.A,{sx:{position:"relative",aspectRatio:"16/9",cursor:"pointer",overflow:"hidden"},onClick:c,children:[(0,i.jsx)(C.A,{component:"img",height:"140",onErrorCapture:()=>{o(!0)},image:s?"/gompyo.svg":r.thumbnail||"/gompyo.svg",alt:r.title,sx:{width:"100%",height:180,objectFit:"contain",transition:"transform 0.2s","&:hover":{transform:"scale(1.05)"}},onError:()=>o(!0)}),(0,i.jsx)(y.A,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:(0,i.jsx)(R.A,{title:r.isFavorite?"즐겨찾기 해제":"즐겨찾기 추가",children:(0,i.jsx)(w.A,{size:"small",sx:{bgcolor:"rgba(255,255,255,0.8)",backdropFilter:"blur(2px)"},onClick:e=>{e.stopPropagation(),n(r.id)},children:r.isFavorite?(0,i.jsx)(A.A,{sx:{color:"#facc15"}}):(0,i.jsx)(W.A,{sx:{color:"#9ca3af"}})})})})]}),(0,i.jsxs)(S.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",p:2},children:[(0,i.jsxs)(y.A,{sx:{flexGrow:1},children:[(0,i.jsx)(R.A,{title:r.title,children:(0,i.jsx)(v.A,{variant:"subtitle1",fontWeight:600,sx:{mb:.5,cursor:"pointer",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:c,children:r.title})}),(0,i.jsx)(v.A,{variant:"body2",color:"text.secondary",noWrap:!0,children:function(e){try{return new URL(E(e)).hostname}catch(r){return e}}(r.url)})]}),(0,i.jsxs)(y.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[(0,i.jsx)(g.A,{variant:"outlined",size:"small",startIcon:(0,i.jsx)(L.A,{fontSize:"small"}),onClick:c,sx:{fontSize:13},disabled:a,children:"방문하기"}),l&&(0,i.jsx)(R.A,{title:"삭제",children:(0,i.jsx)(w.A,{size:"small",color:"error",onClick:()=>l(r.id),children:(0,i.jsx)(z.A,{fontSize:"small"})})})]})]})]})};function I(e){let{link:r,onToggleFavorite:n,onDelete:t}=e,{attributes:l,listeners:a,setNodeRef:s,transform:o,transition:c,isDragging:d}=(0,N.gl)({id:r.id});return(0,i.jsx)("div",{ref:s,style:{transform:U.Ks.Transform.toString(o),transition:c,opacity:d?.7:1},...l,...a,children:(0,i.jsx)(F,{link:r,onToggleFavorite:n,onDelete:t,disable:!0})})}var D=n(336),T=n(81759);let M=(0,x.createServerReference)("0069a77b408a5ea56e877c378b384b30e919568b2d",x.callServer,void 0,x.findSourceMapURL,"getLinks"),_=(0,x.createServerReference)("40970cd58ba9b3464cabd475983e261007602e05d9",x.callServer,void 0,x.findSourceMapURL,"deleteLink"),H=(0,x.createServerReference)("40981565f17dacb71d2eb641d5cde184c585b52919",x.callServer,void 0,x.findSourceMapURL,"reorderLinks"),P=e=>{let{editMode:r=!1}=e,[n,l]=(0,t.useState)(null),[a,s]=(0,t.useState)(!1),[o,c]=(0,t.useState)(!1),x=(0,d.md)(u),m=async()=>{s(!0),l((await M()).map(e=>({...e,thumbnail:e.thumbnail||void 0}))),s(!1)};(0,t.useEffect)(()=>{m()},[x]);let h=e=>{l(r=>(null==r?void 0:r.map(r=>r.id===e?{...r,isFavorite:!r.isFavorite}:r))||[])},f=async e=>{l(r=>(null==r?void 0:r.filter(r=>r.id!==e))||[]),await _(e)},p=(0,D.FR)((0,D.MS)(D.AN,{activationConstraint:{distance:5}})),b=async e=>{let{active:r,over:n}=e;if(r.id!==(null==n?void 0:n.id)){let e=k.findIndex(e=>e.id===r.id),i=k.findIndex(e=>e.id===(null==n?void 0:n.id)),t=(0,N.be)(k,e,i).map((e,r)=>({...e,order:r+1}));l(t),await H(t.map(e=>{let{id:r,order:n}=e;return{id:r,order:n}}))}},k=o?(null==n?void 0:n.filter(e=>e.isFavorite))||[]:n||[],S=(0,i.jsxs)(j.A,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},spacing:2,mb:3,children:[(0,i.jsx)(v.A,{variant:"h5",fontWeight:700,children:"내 링크"}),(0,i.jsx)(j.A,{direction:"row",spacing:2,alignItems:"center",children:(0,i.jsxs)(g.A,{variant:o?"contained":"outlined",color:"primary",startIcon:(0,i.jsx)(A.A,{sx:{color:o?"#facc15":void 0}}),onClick:()=>c(e=>!e),sx:{minWidth:120,minHeight:44,fontWeight:600,fontSize:16,lineHeight:1.5,py:0,boxShadow:"none"},children:["즐겨찾기",o?" 보기 해제":"만 보기"]})})]});return r?(0,i.jsxs)(y.A,{bgcolor:"background.paper",p:2,borderRadius:2,children:[S,a?(0,i.jsx)(y.A,{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(T.A,{})}):(0,i.jsx)(D.Mp,{sensors:p,collisionDetection:D.fp,onDragEnd:b,children:(0,i.jsx)(N.gB,{items:k.map(e=>e.id),strategy:N.kL,children:(0,i.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))"},children:k.map(e=>(0,i.jsx)("div",{children:(0,i.jsx)(I,{link:e,onToggleFavorite:h,onDelete:f})},e.id))})})})]}):null===n||a?(0,i.jsxs)(y.A,{bgcolor:"background.paper",p:2,borderRadius:2,children:[S,(0,i.jsx)(y.A,{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(T.A,{})})]}):(0,i.jsxs)(y.A,{bgcolor:"background.paper",p:2,borderRadius:2,children:[S,0===k.length?(0,i.jsx)(y.A,{sx:{textAlign:"center",py:8,border:1,borderColor:"grey.200",borderRadius:2,borderStyle:"dashed"},children:(0,i.jsx)(v.A,{variant:"body1",color:"text.secondary",children:o?"즐겨찾기된 링크가 없습니다.":"저장된 링크가 없습니다. 새 링크를 추가해보세요!"})}):(0,i.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))"},children:k.map(e=>(0,i.jsx)("div",{children:(0,i.jsx)(F,{link:e,onToggleFavorite:h})},e.id))})]})};function O(){let[e,r]=(0,t.useState)(!1),[n,l]=(0,t.useState)(!1);return(0,i.jsxs)("div",{className:"w-full min-h-screen bg-gray-100",children:[(0,i.jsxs)("div",{className:"p-4 sm:p-8",children:[(0,i.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"링크 관리"}),(0,i.jsxs)(j.A,{direction:"row",spacing:2,className:"w-full justify-end mb-4 sm:mb-6",children:[(0,i.jsx)(g.A,{variant:"contained",color:"primary",sx:{minWidth:120,minHeight:44,fontWeight:600,fontSize:16,lineHeight:1.5,py:0,backgroundColor:"#22C55E","&:hover":{backgroundColor:"#16A34A"},boxShadow:"none"},onClick:()=>r(!0),children:"링크 추가"}),(0,i.jsx)(g.A,{variant:"contained",color:"secondary",sx:{minWidth:120,minHeight:44,fontWeight:600,fontSize:16,lineHeight:1.5,py:0,backgroundColor:n?"#f3f4f6":"#64748b",color:n?"#374151":"#fff","&:hover":{backgroundColor:n?"#e5e7eb":"#475569"},boxShadow:"none",border:n?"1px solid #cbd5e1":"none"},onClick:()=>l(e=>!e),children:n?"편집 종료":"편집 모드"})]}),(0,i.jsx)(P,{editMode:n})]}),(0,i.jsx)(b,{open:e,onClose:()=>r(!1)})]})}},43281:(e,r,n)=>{Promise.resolve().then(n.bind(n,15006))},49344:(e,r,n)=>{"use strict";n.d(r,{A:()=>j});var i=n(22318),t=n(20926),l=n(54069),a=n(17859),s=n(51678),o=n(21768),c=n(60660),d=n(6987),u=n(27849),x=n(46558),m=n(92262),h=n(71599),f=n(20063),p=n(90748);function b(e){return e.reduce((e,r)=>{var n,i;let t="array"===r.type?null!==(n=r.defaultValue)&&void 0!==n?n:[]:null!==(i=r.defaultValue)&&void 0!==i?i:"";return{...e,[r.name]:t}},{})}function j(e){let{zodSchema:r,steps:n,fields:j,onSubmit:v,submitLabel:g="저장",zodSchemas:A,onCancel:y,fieldErrors:k={}}=e,S=!!n,[C,w]=(0,t.useState)(0),R=S?n[C].fields:j,[W,z]=(0,t.useState)(S?n.reduce((e,r)=>({...e,...b(r.fields)}),{}):b(j)),[L,N]=(0,t.useState)({}),U=(e,r)=>{z(n=>({...n,[e]:r}))},E=e=>{z(r=>{var n;return{...r,[e.name]:[...Array.isArray(r[e.name])?r[e.name]:[],b(null!==(n=e.fields)&&void 0!==n?n:[])]}})},F=(e,r)=>{z(n=>({...n,[e.name]:Array.isArray(n[e.name])?n[e.name].filter((e,n)=>n!==r):[]}))},I=(e,r,n,i)=>{z(t=>({...t,[e.name]:Array.isArray(t[e.name])?t[e.name].map((e,t)=>t===r?{...e,[n]:i}:e):[]}))},D=e=>{let r={};return e.errors.forEach(e=>{r[e.path[0]]=e.message}),r},T=(e,r,n,t,h)=>{let b=k[e.name]||t;switch(e.type){case"text":case"number":case"date":return(0,i.jsx)(l.A,{label:e.label,name:e.name,type:"number"===e.type?"number":e.type,value:r,onChange:r=>n("number"===e.type?Number(r.target.value):r.target.value),fullWidth:!0,error:!!b,helperText:b||e.helperText,InputLabelProps:"date"===e.type?{shrink:!0}:void 0,sx:{mb:1}},e.name+(null!=h?h:""));case"select":var j;return(0,i.jsxs)(a.A,{fullWidth:!0,error:!!b,sx:{mb:1},children:[(0,i.jsx)(s.A,{children:e.label}),(0,i.jsx)(o.A,{value:r,label:e.label,onChange:e=>n(e.target.value),children:null===(j=e.options)||void 0===j?void 0:j.map(e=>(0,i.jsx)(c.A,{value:e.value,children:e.label},e.value))}),b&&(0,i.jsx)(d.A,{color:"error",variant:"caption",children:b})]},e.name+(null!=h?h:""));case"array":return(0,i.jsxs)(u.A,{sx:{mb:2},children:[(0,i.jsxs)(u.A,{display:"flex",alignItems:"center",mb:1,children:[(0,i.jsx)(d.A,{variant:"subtitle1",children:e.label}),(0,i.jsx)(x.A,{size:"small",onClick:()=>E(e),sx:{ml:1},children:(0,i.jsx)(f.A,{fontSize:"small"})})]}),(Array.isArray(r)?r:[]).map((r,n)=>{var t;return(0,i.jsxs)(u.A,{sx:{border:"1px solid #eee",borderRadius:1,p:2,mb:1},children:[(0,i.jsxs)(u.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,i.jsxs)(d.A,{variant:"body2",children:[e.label," #",n+1]}),(0,i.jsx)(x.A,{size:"small",onClick:()=>F(e,n),children:(0,i.jsx)(p.A,{fontSize:"small"})})]}),(0,i.jsx)(m.A,{spacing:1,mt:1,children:null===(t=e.fields)||void 0===t?void 0:t.map(i=>T(i,r[i.name],r=>I(e,n,i.name,r),L["".concat(e.name,".").concat(n,".").concat(i.name)],n))})]},n)})]},e.name);case"custom":return e.render?e.render({value:r,onChange:n,error:b}):null;default:return null}};return(0,i.jsxs)("form",{onSubmit:e=>{let i;if(e.preventDefault(),(i=S&&A?A[C].safeParse(W):r?r.safeParse(W):{success:!0,data:W})&&!i.success){N(D(i.error));return}N({}),S&&C<n.length-1?w(e=>e+1):v(W)},children:[S&&(0,i.jsx)(d.A,{variant:"h6",sx:{mb:2},children:n[C].label}),(0,i.jsx)(m.A,{spacing:2,sx:{mt:1},children:R.map(e=>T(e,W[e.name],r=>U(e.name,r),L[e.name]))}),(0,i.jsxs)(u.A,{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:2,mt:2,children:[S&&C>0&&(0,i.jsx)(h.A,{variant:"outlined",color:"primary",onClick:()=>w(e=>e-1),children:"이전"}),"function"==typeof y&&(0,i.jsx)(h.A,{variant:"outlined",color:"primary",onClick:y,children:"취소"}),(0,i.jsx)(h.A,{type:"submit",variant:"contained",color:"primary",sx:{fontWeight:600},children:S&&C<n.length-1?"다음":g})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[426,336,69,41,790,59,52,559,156,39,77,358],()=>r(43281)),_N_E=e.O()}]);
