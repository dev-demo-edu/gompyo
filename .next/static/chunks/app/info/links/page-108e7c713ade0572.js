(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6045],{33601:(e,r,n)=>{"use strict";n.d(r,{default:()=>O});var l=n(22318),t=n(20926),a=n(40017),i=n(57797),o=n(89085),s=n(49344),d=n(60720),c=n(86956);let u=(0,n(49812).eU)(0);var m=n(64358);let x=(0,m.createServerReference)("701e09a609f670933ce81ad1208dfe83289ccb1d27",m.callServer,void 0,m.findSourceMapURL,"addLink"),h=d.z.object({linkName:d.z.string().min(1,"링크명을 입력해주세요."),linkUrl:d.z.string().min(1,"링크URL을 입력해주세요.").url("유효한 URL 형식이어야 합니다.").refine(e=>e.startsWith("http://")||e.startsWith("https://"),{message:"URL은 http:// 또는 https://로 시작해야 합니다."})}),p=[{name:"linkName",label:"링크명",type:"text",required:!0},{name:"linkUrl",label:"링크URL",type:"text",required:!0}];function b(e){let{onClose:r,submitLabel:n="저장"}=e,a=(0,c.Xr)(u),[i,o]=(0,t.useState)({}),d=async e=>{try{await x(e.linkName,e.linkUrl,0),a(e=>e+1),o({}),null==r||r()}catch(e){e instanceof Error?o({linkName:e.message}):o({links:"오류가 발생했습니다."})}};return(0,l.jsx)(s.A,{fields:p,onSubmit:d,submitLabel:n,zodSchema:h,fieldErrors:i})}function f(e){let{open:r,onClose:n}=e;return(0,l.jsxs)(a.A,{open:r,onClose:n,maxWidth:"xs",fullWidth:!0,children:[(0,l.jsx)(i.A,{children:"링크 추가"}),(0,l.jsx)(o.A,{children:(0,l.jsx)(b,{onClose:n})})]})}var v=n(92262),g=n(6987),A=n(87832),j=n(27849),y=n(67446),C=n(1949),F=n(42923),k=n(46558),w=n(79290),S=n(59026),R=n(40963),E=n(81664),L=n(31116),N=n(98593),W=n(75746);function I(e){return/^https?:\/\//i.test(e)?e:"https://".concat(e)}let U=e=>{let{link:r,onToggleFavorite:n,onDelete:a,disable:i}=e,[o,s]=(0,t.useState)(!1),d=()=>{i||window.open(I(r.url),"_blank","noopener,noreferrer")};return(0,l.jsxs)(y.A,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[(0,l.jsxs)(j.A,{sx:{position:"relative",aspectRatio:"16/9",cursor:"pointer",overflow:"hidden"},onClick:d,children:[(0,l.jsx)(F.A,{component:"img",height:"140",draggable:!1,onErrorCapture:()=>{s(!0)},image:o?"/gompyo.svg":r.thumbnail||"/gompyo.svg",alt:r.title,sx:{width:"100%",height:180,objectFit:"contain",transition:"transform 0.2s","&:hover":{transform:"scale(1.05)"}},onError:()=>s(!0)}),(0,l.jsx)(j.A,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:(0,l.jsx)(w.A,{title:r.isFavorite?"즐겨찾기 해제":"즐겨찾기 추가",children:(0,l.jsx)(k.A,{size:"small",sx:{bgcolor:"rgba(255,255,255,0.8)",backdropFilter:"blur(2px)"},onClick:e=>{e.stopPropagation(),n(r.id)},children:r.isFavorite?(0,l.jsx)(A.A,{sx:{color:"#facc15"}}):(0,l.jsx)(S.A,{sx:{color:"#9ca3af"}})})})})]}),(0,l.jsxs)(C.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",p:2},children:[(0,l.jsxs)(j.A,{sx:{flexGrow:1},children:[(0,l.jsx)(w.A,{title:r.title,children:(0,l.jsx)(g.A,{variant:"subtitle1",fontWeight:600,sx:{mb:.5,cursor:"pointer",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:d,children:r.title})}),(0,l.jsx)(g.A,{variant:"body2",color:"text.secondary",noWrap:!0,children:function(e){try{return new URL(I(e)).hostname}catch(r){return e}}(r.url)})]}),(0,l.jsxs)(j.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[(0,l.jsx)(W.A,{variant:"outline",onClick:d,startIcon:(0,l.jsx)(E.A,{fontSize:"small"}),disabled:i,children:"방문하기"}),a&&(0,l.jsx)(w.A,{title:"삭제",children:(0,l.jsx)(k.A,{size:"small",color:"error",onClick:()=>a(r.id),children:(0,l.jsx)(R.A,{fontSize:"small"})})})]})]})]})};function z(e){let{link:r,onToggleFavorite:n,onDelete:t}=e,{attributes:a,listeners:i,setNodeRef:o,transform:s,transition:d,isDragging:c}=(0,L.gl)({id:r.id});return(0,l.jsx)("div",{ref:o,style:{transform:N.Ks.Transform.toString(s),transition:d,opacity:c?.7:1},...a,...i,children:(0,l.jsx)(U,{link:r,onToggleFavorite:n,onDelete:t,disable:!0})})}var D=n(336),T=n(81759);let M=(0,m.createServerReference)("004ea695afbc983c24fdb81feb073100dde51b60df",m.callServer,void 0,m.findSourceMapURL,"getLinks"),P=(0,m.createServerReference)("409824de8056a931cb3984f57ea80a5e778f9f4770",m.callServer,void 0,m.findSourceMapURL,"deleteLink"),_=(0,m.createServerReference)("40baeb72a0dd2527ffd3c5d349aa837b648d99cc11",m.callServer,void 0,m.findSourceMapURL,"reorderLinks"),B=e=>{let{editMode:r=!1}=e,[n,a]=(0,t.useState)(null),[i,o]=(0,t.useState)(!1),[s,d]=(0,t.useState)(!1),m=(0,c.md)(u),x=async()=>{o(!0),a((await M()).map(e=>({...e,thumbnail:e.thumbnail||void 0}))),o(!1)};(0,t.useEffect)(()=>{x()},[m]);let h=e=>{a(r=>(null==r?void 0:r.map(r=>r.id===e?{...r,isFavorite:!r.isFavorite}:r))||[])},p=async e=>{a(r=>(null==r?void 0:r.filter(r=>r.id!==e))||[]),await P(e)},b=(0,D.FR)((0,D.MS)(D.AN,{activationConstraint:{distance:5}})),f=async e=>{let{active:r,over:n}=e;if(r.id!==(null==n?void 0:n.id)){let e=y.findIndex(e=>e.id===r.id),l=y.findIndex(e=>e.id===(null==n?void 0:n.id)),t=(0,L.be)(y,e,l).map((e,r)=>({...e,order:r+1}));a(t),await _(t.map(e=>{let{id:r,order:n}=e;return{id:r,order:n}}))}},y=s?(null==n?void 0:n.filter(e=>e.isFavorite))||[]:n||[],C=(0,l.jsxs)(v.A,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},spacing:2,mb:3,children:[(0,l.jsx)(g.A,{variant:"h5",fontWeight:700,children:"내 링크"}),(0,l.jsx)(v.A,{direction:"row",spacing:2,alignItems:"center",children:(0,l.jsxs)(W.A,{variant:s?"primary":"outline",startIcon:(0,l.jsx)(A.A,{sx:{color:s?"#facc15":void 0}}),onClick:()=>d(e=>!e),children:["즐겨찾기",s?" 보기 해제":"만 보기"]})})]});return r?(0,l.jsxs)(j.A,{bgcolor:"background.paper",p:2,borderRadius:2,sx:{overflow:"hidden"},children:[C,i?(0,l.jsx)(j.A,{className:"w-full h-full flex items-center justify-center",children:(0,l.jsx)(T.A,{})}):(0,l.jsx)(D.Mp,{sensors:b,collisionDetection:D.fp,onDragEnd:f,children:(0,l.jsx)(L.gB,{items:y.map(e=>e.id),strategy:L.kL,children:(0,l.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))"},children:y.map(e=>(0,l.jsx)("div",{children:(0,l.jsx)(z,{link:e,onToggleFavorite:h,onDelete:p})},e.id))})})})]}):null===n||i?(0,l.jsxs)(j.A,{bgcolor:"background.paper",p:2,borderRadius:2,minHeight:435,display:"flex",flexDirection:"column",children:[C,(0,l.jsx)(j.A,{flex:1,display:"flex",alignItems:"center",justifyContent:"center",children:(0,l.jsx)(T.A,{})})]}):(0,l.jsxs)(j.A,{bgcolor:"background.paper",p:2,borderRadius:2,children:[C,0===y.length?(0,l.jsx)(j.A,{sx:{textAlign:"center",py:8,border:1,borderColor:"grey.200",borderRadius:2,borderStyle:"dashed"},children:(0,l.jsx)(g.A,{variant:"body1",color:"text.secondary",children:s?"즐겨찾기된 링크가 없습니다.":"저장된 링크가 없습니다. 새 링크를 추가해보세요!"})}):(0,l.jsx)("div",{className:"grid gap-4 max-w-",style:{gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))"},children:y.map(e=>(0,l.jsx)("div",{children:(0,l.jsx)(U,{link:e,onToggleFavorite:h})},e.id))})]})};function O(){let[e,r]=(0,t.useState)(!1),[n,a]=(0,t.useState)(!1);return(0,l.jsxs)("div",{className:"w-full min-h-screen bg-gray-100",children:[(0,l.jsxs)("div",{className:"p-4 sm:p-8",children:[(0,l.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"링크 관리"}),(0,l.jsxs)(v.A,{direction:"row",spacing:2,className:"w-full justify-start mb-4 sm:mb-6 md:justify-end",children:[(0,l.jsx)(W.A,{variant:"info",onClick:()=>r(!0),minWidth:120,children:"링크 추가"}),(0,l.jsx)(W.A,{variant:"secondary",minWidth:120,editMode:n,onClick:()=>a(e=>!e),children:n?"편집 종료":"편집 모드"})]}),(0,l.jsx)(B,{editMode:n})]}),(0,l.jsx)(f,{open:e,onClose:()=>r(!1)})]})}},43281:(e,r,n)=>{Promise.resolve().then(n.bind(n,33601))},49344:(e,r,n)=>{"use strict";n.d(r,{A:()=>g});var l=n(22318),t=n(20926),a=n(92262),i=n(54069),o=n(2877),s=n(17859),d=n(51678),c=n(21768),u=n(60660),m=n(6987),x=n(27849),h=n(46558),p=n(71599),b=n(20063),f=n(90748);function v(e){return e.reduce((e,r)=>{var n,l,t;let a;return a="array"===r.type?null!==(n=r.defaultValue)&&void 0!==n?n:[]:"select"===r.type&&r.options&&r.options.length>0?null!==(l=r.defaultValue)&&void 0!==l?l:r.options[0].value:null!==(t=r.defaultValue)&&void 0!==t?t:"",{...e,[r.name]:a}},{})}function g(e){let{zodSchema:r,steps:n,fields:g,onSubmit:A,submitLabel:j="저장",zodSchemas:y,onCancel:C,fieldErrors:F={},initialValues:k={}}=e,w=!!n,[S,R]=(0,t.useState)(0),E=w?n[S].fields:g,[L,N]=(0,t.useState)(w?{...n.reduce((e,r)=>({...e,...v(r.fields)}),{}),...k}:{...v(g),...k}),[W,I]=(0,t.useState)({}),[U,z]=(0,t.useState)(!1),D=(e,r)=>{N(n=>({...n,[e]:r}))},T=e=>{N(r=>({...r,[e.name]:[...Array.isArray(r[e.name])?r[e.name]:[],v(e.fields)]}))},M=(e,r)=>{N(n=>({...n,[e.name]:Array.isArray(n[e.name])?n[e.name].filter((e,n)=>n!==r):[]}))},P=(e,r,n,l)=>{N(t=>({...t,[e.name]:Array.isArray(t[e.name])?t[e.name].map((e,t)=>t===r?{...e,[n]:l}:e):[]}))},_=e=>{let r={};return e.errors.forEach(e=>{r[e.path[0]]=e.message}),r},B=async e=>{let l;if(!U){if(e.preventDefault(),(l=w&&y?y[S].safeParse(L):r?r.safeParse(L):{success:!0,data:L})&&!l.success){I(_(l.error));return}I({}),z(!0);try{w&&S<n.length-1?R(e=>e+1):await A(L)}finally{z(!1)}}},O=(e,r,n,p,v)=>{let g=F[e.name]||p;switch(e.type){case"text":case"number":case"date":return(0,l.jsx)(i.A,{label:e.label,name:e.name,type:"number"===e.type?"number":e.type,value:r,onChange:r=>n("number"===e.type?Number(r.target.value):r.target.value),fullWidth:!0,error:!!g,helperText:g||e.helperText,InputLabelProps:"date"===e.type?{shrink:!0}:void 0,InputProps:e.endAdornment?{endAdornment:(0,l.jsx)(o.A,{sx:{color:"inherit","& .MuiTypography-root":{color:"inherit"}},position:"end",children:e.endAdornment})}:void 0,sx:{mb:1}},e.name+(null!=v?v:""));case"select":var A;return(0,l.jsxs)(s.A,{fullWidth:!0,error:!!g,sx:{mb:1},children:[(0,l.jsx)(d.A,{children:e.label}),(0,l.jsx)(c.A,{value:r,label:e.label,onChange:e=>n(e.target.value),children:null===(A=e.options)||void 0===A?void 0:A.map(e=>(0,l.jsx)(u.A,{value:e.value,children:e.label},e.value))}),g&&(0,l.jsx)(m.A,{color:"error",variant:"caption",children:g})]},e.name+(null!=v?v:""));case"array":return(0,l.jsxs)(x.A,{sx:{mb:2},children:[(0,l.jsxs)(x.A,{display:"flex",alignItems:"center",mb:1,children:[(0,l.jsx)(m.A,{variant:"subtitle1",children:e.label}),(0,l.jsx)(h.A,{size:"small",onClick:()=>T(e),sx:{ml:1},children:(0,l.jsx)(b.A,{fontSize:"small"})})]}),(Array.isArray(r)?r:[]).map((r,n)=>(0,l.jsxs)(x.A,{sx:{border:"1px solid #eee",borderRadius:1,p:2,mb:1},children:[(0,l.jsxs)(x.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,l.jsxs)(m.A,{variant:"body2",children:[e.label," #",n+1]}),(0,l.jsx)(h.A,{size:"small",onClick:()=>M(e,n),children:(0,l.jsx)(f.A,{fontSize:"small"})})]}),function(e){var r;let{field:n,item:x,onChange:h,errors:p}=e;return(0,l.jsx)(a.A,{spacing:1,mt:1,children:null===(r=n.fields)||void 0===r?void 0:r.map(e=>{let r=x[e.name];return(0,l.jsx)(t.Fragment,{children:(()=>{switch(e.type){case"text":case"number":case"date":return(0,l.jsx)(i.A,{label:e.label,name:e.name,type:"number"===e.type?"number":e.type,value:r,onChange:r=>h(e.name,"number"===e.type?Number(r.target.value):r.target.value),fullWidth:!0,error:!!p[e.name],helperText:p[e.name]||e.helperText,InputLabelProps:"date"===e.type?{shrink:!0}:void 0,InputProps:e.endAdornment?{endAdornment:(0,l.jsx)(o.A,{sx:{color:"inherit","& .MuiTypography-root":{color:"inherit"}},position:"end",children:e.endAdornment})}:void 0,sx:{mb:1}});case"select":var n;return(0,l.jsxs)(s.A,{fullWidth:!0,error:!!p[e.name],sx:{mb:1},children:[(0,l.jsx)(d.A,{children:e.label}),(0,l.jsx)(c.A,{value:r,label:e.label,onChange:r=>h(e.name,r.target.value),children:null===(n=e.options)||void 0===n?void 0:n.map(e=>(0,l.jsx)(u.A,{value:e.value,children:e.label},e.value))}),p[e.name]&&(0,l.jsx)(m.A,{color:"error",variant:"caption",children:p[e.name]})]});case"custom":return e.render?e.render({value:r,onChange:r=>h(e.name,r),error:p[e.name]}):null;default:return null}})()},e.name)})})}({field:e,item:r,onChange:(r,l)=>P(e,n,r,l),errors:{}})]},n))]},e.name);case"custom":return e.render?e.render({value:r,onChange:n,error:g}):null;default:return null}};return(0,l.jsxs)("form",{onSubmit:B,children:[w&&(0,l.jsx)(m.A,{variant:"h6",sx:{mb:2},children:n[S].label}),(0,l.jsx)(a.A,{spacing:2,sx:{mt:1},children:E.map(e=>O(e,L[e.name],r=>D(e.name,r),W[e.name]))}),(0,l.jsxs)(x.A,{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:2,mt:2,children:[w&&S>0&&(0,l.jsx)(p.A,{variant:"outlined",color:"primary",onClick:()=>R(e=>e-1),children:"이전"}),"function"==typeof C&&(0,l.jsx)(p.A,{variant:"outlined",color:"primary",onClick:C,children:"취소"}),(0,l.jsx)(p.A,{type:"submit",variant:"contained",color:"primary",sx:{fontWeight:600},disabled:U,children:w&&S<n.length-1?"다음":j})]})]})}},75746:(e,r,n)=>{"use strict";n.d(r,{A:()=>i});var l=n(22318),t=n(71599);let a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"primary",r=arguments.length>1?arguments[1]:void 0,n={fontWeight:600,border:"1px solid",boxShadow:"none",whiteSpace:"nowrap","&:disabled":{backgroundColor:"#9CA3AF",color:"#FFFFFF"}};switch(e){case"primary":return{...n,backgroundColor:"#22C55E",color:"#FFFFFF","&:hover":{backgroundColor:"#16A34A"}};case"inherit":return{whiteSpace:"nowrap"};case"secondary":return{...n,backgroundColor:r?"#f3f4f6":"#64748b",color:r?"#374151":"#FFFFFF",border:r?"1px solid #cbd5e1":"none","&:hover":{backgroundColor:r?"#e5e7eb":"#475569"}};case"danger":return{...n,backgroundColor:"#EF4444",color:"#FFFFFF","&:hover":{backgroundColor:"#DC2626"}};case"info":return{...n,backgroundColor:"#3B82F6",color:"#FFFFFF","&:hover":{backgroundColor:"#2563EB"}};case"special":return{...n,backgroundColor:"#6366F1",color:"#FFFFFF","&:hover":{backgroundColor:"#4F46E5"}};case"outline":return{...n,backgroundColor:"transparent",borderColor:"primary",color:"#22C55E","&:hover":{backgroundColor:"#F9FAFB",borderColor:"primary"},"&:disabled":{backgroundColor:"transparent",borderColor:"#9CA3AF",color:"#9CA3AF"}};case"outline-danger":return{...n,backgroundColor:"transparent",borderColor:"#EF4444",color:"#EF4444","&:hover":{backgroundColor:"#FEF2F2",borderColor:"#DC2626",color:"#DC2626"},"&:disabled":{backgroundColor:"transparent",borderColor:"#9CA3AF",color:"#9CA3AF"}};default:return n}};function i(e){let{variant:r="primary",children:n,minWidth:i,sx:o,editMode:s=!1,...d}=e,c=a(r,s),u=r.includes("outline");return(0,l.jsx)(t.A,{variant:"inherit"===r?"contained":u?"outlined":"contained",color:"inherit"===r?"inherit":"primary",sx:{...c,minWidth:i,...o},...d,children:n})}}},e=>{var r=r=>e(e.s=r);e.O(0,[7045,3336,4069,6510,4090,6956,9052,5059,7559,8775,9039,1077,7358],()=>r(43281)),_N_E=e.O()}]);
