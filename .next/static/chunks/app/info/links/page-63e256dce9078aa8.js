(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{35130:(e,r,n)=>{"use strict";n.d(r,{default:()=>O});var t=n(22318),l=n(20926),i=n(40017),a=n(57797),s=n(89085),o=n(49344),d=n(60720),c=n(86956);let u=(0,n(49812).eU)(0);var m=n(64358);let x=(0,m.createServerReference)("709ee39bdbc409bfb03604e8d6414d75b4241876af",m.callServer,void 0,m.findSourceMapURL,"addLink"),h=d.z.object({linkName:d.z.string().min(1,"링크명을 입력해주세요."),linkUrl:d.z.string().min(1,"링크URL을 입력해주세요.").url("유효한 URL 형식이어야 합니다.").refine(e=>e.startsWith("http://")||e.startsWith("https://"),{message:"URL은 http:// 또는 https://로 시작해야 합니다."})}),p=[{name:"linkName",label:"링크명",type:"text",required:!0},{name:"linkUrl",label:"링크URL",type:"text",required:!0}];function f(e){let{onClose:r,submitLabel:n="저장"}=e,i=(0,c.Xr)(u),[a,s]=(0,l.useState)({}),d=async e=>{try{await x(e.linkName,e.linkUrl,0),i(e=>e+1),s({}),null==r||r()}catch(e){e instanceof Error?s({linkName:e.message}):s({links:"오류가 발생했습니다."})}};return(0,t.jsx)(o.A,{fields:p,onSubmit:d,submitLabel:n,zodSchema:h,fieldErrors:a})}function b(e){let{open:r,onClose:n}=e;return(0,t.jsxs)(i.A,{open:r,onClose:n,maxWidth:"xs",fullWidth:!0,children:[(0,t.jsx)(a.A,{children:"링크 추가"}),(0,t.jsx)(s.A,{children:(0,t.jsx)(f,{onClose:n})})]})}var v=n(92262),j=n(6987),g=n(71599),A=n(87832),y=n(27849),k=n(67446),S=n(1949),C=n(42923),w=n(46558),R=n(79290),W=n(59026),L=n(40963),N=n(81664),z=n(31116),I=n(98593);function U(e){return/^https?:\/\//i.test(e)?e:"https://".concat(e)}let F=e=>{let{link:r,onToggleFavorite:n,onDelete:i,disable:a}=e,[s,o]=(0,l.useState)(!1),d=()=>{a||window.open(U(r.url),"_blank","noopener,noreferrer")};return(0,t.jsxs)(k.A,{sx:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden"},children:[(0,t.jsxs)(y.A,{sx:{position:"relative",aspectRatio:"16/9",cursor:"pointer",overflow:"hidden"},onClick:d,children:[(0,t.jsx)(C.A,{component:"img",height:"140",onErrorCapture:()=>{o(!0)},image:s?"/gompyo.svg":r.thumbnail||"/gompyo.svg",alt:r.title,sx:{width:"100%",height:180,objectFit:"contain",transition:"transform 0.2s","&:hover":{transform:"scale(1.05)"}},onError:()=>o(!0)}),(0,t.jsx)(y.A,{sx:{position:"absolute",top:8,right:8,display:"flex",gap:1},children:(0,t.jsx)(R.A,{title:r.isFavorite?"즐겨찾기 해제":"즐겨찾기 추가",children:(0,t.jsx)(w.A,{size:"small",sx:{bgcolor:"rgba(255,255,255,0.8)",backdropFilter:"blur(2px)"},onClick:e=>{e.stopPropagation(),n(r.id)},children:r.isFavorite?(0,t.jsx)(A.A,{sx:{color:"#facc15"}}):(0,t.jsx)(W.A,{sx:{color:"#9ca3af"}})})})})]}),(0,t.jsxs)(S.A,{sx:{flexGrow:1,display:"flex",flexDirection:"column",p:2},children:[(0,t.jsxs)(y.A,{sx:{flexGrow:1},children:[(0,t.jsx)(R.A,{title:r.title,children:(0,t.jsx)(j.A,{variant:"subtitle1",fontWeight:600,sx:{mb:.5,cursor:"pointer",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},onClick:d,children:r.title})}),(0,t.jsx)(j.A,{variant:"body2",color:"text.secondary",noWrap:!0,children:function(e){try{return new URL(U(e)).hostname}catch(r){return e}}(r.url)})]}),(0,t.jsxs)(y.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mt:2},children:[(0,t.jsx)(g.A,{variant:"outlined",size:"small",startIcon:(0,t.jsx)(N.A,{fontSize:"small"}),onClick:d,sx:{fontSize:13},disabled:a,children:"방문하기"}),i&&(0,t.jsx)(R.A,{title:"삭제",children:(0,t.jsx)(w.A,{size:"small",color:"error",onClick:()=>i(r.id),children:(0,t.jsx)(L.A,{fontSize:"small"})})})]})]})]})};function T(e){let{link:r,onToggleFavorite:n,onDelete:l}=e,{attributes:i,listeners:a,setNodeRef:s,transform:o,transition:d,isDragging:c}=(0,z.gl)({id:r.id});return(0,t.jsx)("div",{ref:s,style:{transform:I.Ks.Transform.toString(o),transition:d,opacity:c?.7:1},...i,...a,children:(0,t.jsx)(F,{link:r,onToggleFavorite:n,onDelete:l,disable:!0})})}var E=n(336),M=n(81759);let D=(0,m.createServerReference)("00538dace2400e819fd78fade62015f3a82ec3de8e",m.callServer,void 0,m.findSourceMapURL,"getLinks"),P=(0,m.createServerReference)("40a9060e59aaa8563d5c2069b965ab9733ac0cd1b1",m.callServer,void 0,m.findSourceMapURL,"deleteLink"),_=(0,m.createServerReference)("40508eb8797af87043baaaf9bd6315c131659ad72d",m.callServer,void 0,m.findSourceMapURL,"reorderLinks"),H=e=>{let{editMode:r=!1}=e,[n,i]=(0,l.useState)(null),[a,s]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!1),m=(0,c.md)(u),x=async()=>{s(!0),i((await D()).map(e=>({...e,thumbnail:e.thumbnail||void 0}))),s(!1)};(0,l.useEffect)(()=>{x()},[m]);let h=e=>{i(r=>(null==r?void 0:r.map(r=>r.id===e?{...r,isFavorite:!r.isFavorite}:r))||[])},p=async e=>{i(r=>(null==r?void 0:r.filter(r=>r.id!==e))||[]),await P(e)},f=(0,E.FR)((0,E.MS)(E.AN,{activationConstraint:{distance:5}})),b=async e=>{let{active:r,over:n}=e;if(r.id!==(null==n?void 0:n.id)){let e=k.findIndex(e=>e.id===r.id),t=k.findIndex(e=>e.id===(null==n?void 0:n.id)),l=(0,z.be)(k,e,t).map((e,r)=>({...e,order:r+1}));i(l),await _(l.map(e=>{let{id:r,order:n}=e;return{id:r,order:n}}))}},k=o?(null==n?void 0:n.filter(e=>e.isFavorite))||[]:n||[],S=(0,t.jsxs)(v.A,{direction:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},spacing:2,mb:3,children:[(0,t.jsx)(j.A,{variant:"h5",fontWeight:700,children:"내 링크"}),(0,t.jsx)(v.A,{direction:"row",spacing:2,alignItems:"center",children:(0,t.jsxs)(g.A,{variant:o?"contained":"outlined",color:"primary",startIcon:(0,t.jsx)(A.A,{sx:{color:o?"#facc15":void 0}}),onClick:()=>d(e=>!e),sx:{minWidth:120,minHeight:44,fontWeight:600,fontSize:16,lineHeight:1.5,py:0,boxShadow:"none"},children:["즐겨찾기",o?" 보기 해제":"만 보기"]})})]});return r?(0,t.jsxs)(y.A,{bgcolor:"background.paper",p:2,borderRadius:2,children:[S,a?(0,t.jsx)(y.A,{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(M.A,{})}):(0,t.jsx)(E.Mp,{sensors:f,collisionDetection:E.fp,onDragEnd:b,children:(0,t.jsx)(z.gB,{items:k.map(e=>e.id),strategy:z.kL,children:(0,t.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))"},children:k.map(e=>(0,t.jsx)("div",{children:(0,t.jsx)(T,{link:e,onToggleFavorite:h,onDelete:p})},e.id))})})})]}):null===n||a?(0,t.jsxs)(y.A,{bgcolor:"background.paper",p:2,borderRadius:2,children:[S,(0,t.jsx)(y.A,{className:"w-full h-full flex items-center justify-center",children:(0,t.jsx)(M.A,{})})]}):(0,t.jsxs)(y.A,{bgcolor:"background.paper",p:2,borderRadius:2,children:[S,0===k.length?(0,t.jsx)(y.A,{sx:{textAlign:"center",py:8,border:1,borderColor:"grey.200",borderRadius:2,borderStyle:"dashed"},children:(0,t.jsx)(j.A,{variant:"body1",color:"text.secondary",children:o?"즐겨찾기된 링크가 없습니다.":"저장된 링크가 없습니다. 새 링크를 추가해보세요!"})}):(0,t.jsx)("div",{className:"grid gap-4",style:{gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))"},children:k.map(e=>(0,t.jsx)("div",{children:(0,t.jsx)(F,{link:e,onToggleFavorite:h})},e.id))})]})};function O(){let[e,r]=(0,l.useState)(!1),[n,i]=(0,l.useState)(!1);return(0,t.jsxs)("div",{className:"w-full min-h-screen bg-gray-100",children:[(0,t.jsxs)("div",{className:"p-4 sm:p-8",children:[(0,t.jsx)("h1",{className:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6",children:"링크 관리"}),(0,t.jsxs)(v.A,{direction:"row",spacing:2,className:"w-full justify-end mb-4 sm:mb-6",children:[(0,t.jsx)(g.A,{variant:"contained",color:"primary",sx:{minWidth:120,minHeight:44,fontWeight:600,fontSize:16,lineHeight:1.5,py:0,backgroundColor:"#22C55E","&:hover":{backgroundColor:"#16A34A"},boxShadow:"none"},onClick:()=>r(!0),children:"링크 추가"}),(0,t.jsx)(g.A,{variant:"contained",color:"secondary",sx:{minWidth:120,minHeight:44,fontWeight:600,fontSize:16,lineHeight:1.5,py:0,backgroundColor:n?"#f3f4f6":"#64748b",color:n?"#374151":"#fff","&:hover":{backgroundColor:n?"#e5e7eb":"#475569"},boxShadow:"none",border:n?"1px solid #cbd5e1":"none"},onClick:()=>i(e=>!e),children:n?"편집 종료":"편집 모드"})]}),(0,t.jsx)(H,{editMode:n})]}),(0,t.jsx)(b,{open:e,onClose:()=>r(!1)})]})}},43281:(e,r,n)=>{Promise.resolve().then(n.bind(n,35130))},49344:(e,r,n)=>{"use strict";n.d(r,{A:()=>j});var t=n(22318),l=n(20926),i=n(92262),a=n(54069),s=n(2877),o=n(17859),d=n(51678),c=n(21768),u=n(60660),m=n(6987),x=n(27849),h=n(46558),p=n(71599),f=n(20063),b=n(90748);function v(e){return e.reduce((e,r)=>{var n,t,l;let i;return i="array"===r.type?null!==(n=r.defaultValue)&&void 0!==n?n:[]:"select"===r.type&&r.options&&r.options.length>0?null!==(t=r.defaultValue)&&void 0!==t?t:r.options[0].value:null!==(l=r.defaultValue)&&void 0!==l?l:"",{...e,[r.name]:i}},{})}function j(e){let{zodSchema:r,steps:n,fields:j,onSubmit:g,submitLabel:A="저장",zodSchemas:y,onCancel:k,fieldErrors:S={},initialValues:C={}}=e,w=!!n,[R,W]=(0,l.useState)(0),L=w?n[R].fields:j,[N,z]=(0,l.useState)(w?{...n.reduce((e,r)=>({...e,...v(r.fields)}),{}),...C}:{...v(j),...C}),[I,U]=(0,l.useState)({}),[F,T]=(0,l.useState)(!1),E=(e,r)=>{z(n=>({...n,[e]:r}))},M=e=>{z(r=>({...r,[e.name]:[...Array.isArray(r[e.name])?r[e.name]:[],v(e.fields)]}))},D=(e,r)=>{z(n=>({...n,[e.name]:Array.isArray(n[e.name])?n[e.name].filter((e,n)=>n!==r):[]}))},P=(e,r,n,t)=>{z(l=>({...l,[e.name]:Array.isArray(l[e.name])?l[e.name].map((e,l)=>l===r?{...e,[n]:t}:e):[]}))},_=e=>{let r={};return e.errors.forEach(e=>{r[e.path[0]]=e.message}),r},H=async e=>{let t;if(!F){if(e.preventDefault(),(t=w&&y?y[R].safeParse(N):r?r.safeParse(N):{success:!0,data:N})&&!t.success){U(_(t.error));return}U({}),T(!0);try{w&&R<n.length-1?W(e=>e+1):await g(N)}finally{T(!1)}}},O=(e,r,n,p,v)=>{let j=S[e.name]||p;switch(e.type){case"text":case"number":case"date":return(0,t.jsx)(a.A,{label:e.label,name:e.name,type:"number"===e.type?"number":e.type,value:r,onChange:r=>n("number"===e.type?Number(r.target.value):r.target.value),fullWidth:!0,error:!!j,helperText:j||e.helperText,InputLabelProps:"date"===e.type?{shrink:!0}:void 0,InputProps:e.endAdornment?{endAdornment:(0,t.jsx)(s.A,{sx:{color:"inherit","& .MuiTypography-root":{color:"inherit"}},position:"end",children:e.endAdornment})}:void 0,sx:{mb:1}},e.name+(null!=v?v:""));case"select":var g;return(0,t.jsxs)(o.A,{fullWidth:!0,error:!!j,sx:{mb:1},children:[(0,t.jsx)(d.A,{children:e.label}),(0,t.jsx)(c.A,{value:r,label:e.label,onChange:e=>n(e.target.value),children:null===(g=e.options)||void 0===g?void 0:g.map(e=>(0,t.jsx)(u.A,{value:e.value,children:e.label},e.value))}),j&&(0,t.jsx)(m.A,{color:"error",variant:"caption",children:j})]},e.name+(null!=v?v:""));case"array":return(0,t.jsxs)(x.A,{sx:{mb:2},children:[(0,t.jsxs)(x.A,{display:"flex",alignItems:"center",mb:1,children:[(0,t.jsx)(m.A,{variant:"subtitle1",children:e.label}),(0,t.jsx)(h.A,{size:"small",onClick:()=>M(e),sx:{ml:1},children:(0,t.jsx)(f.A,{fontSize:"small"})})]}),(Array.isArray(r)?r:[]).map((r,n)=>(0,t.jsxs)(x.A,{sx:{border:"1px solid #eee",borderRadius:1,p:2,mb:1},children:[(0,t.jsxs)(x.A,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,t.jsxs)(m.A,{variant:"body2",children:[e.label," #",n+1]}),(0,t.jsx)(h.A,{size:"small",onClick:()=>D(e,n),children:(0,t.jsx)(b.A,{fontSize:"small"})})]}),function(e){var r;let{field:n,item:x,onChange:h,errors:p}=e;return(0,t.jsx)(i.A,{spacing:1,mt:1,children:null===(r=n.fields)||void 0===r?void 0:r.map(e=>{let r=x[e.name];return(0,t.jsx)(l.Fragment,{children:(()=>{switch(e.type){case"text":case"number":case"date":return(0,t.jsx)(a.A,{label:e.label,name:e.name,type:"number"===e.type?"number":e.type,value:r,onChange:r=>h(e.name,"number"===e.type?Number(r.target.value):r.target.value),fullWidth:!0,error:!!p[e.name],helperText:p[e.name]||e.helperText,InputLabelProps:"date"===e.type?{shrink:!0}:void 0,InputProps:e.endAdornment?{endAdornment:(0,t.jsx)(s.A,{sx:{color:"inherit","& .MuiTypography-root":{color:"inherit"}},position:"end",children:e.endAdornment})}:void 0,sx:{mb:1}});case"select":var n;return(0,t.jsxs)(o.A,{fullWidth:!0,error:!!p[e.name],sx:{mb:1},children:[(0,t.jsx)(d.A,{children:e.label}),(0,t.jsx)(c.A,{value:r,label:e.label,onChange:r=>h(e.name,r.target.value),children:null===(n=e.options)||void 0===n?void 0:n.map(e=>(0,t.jsx)(u.A,{value:e.value,children:e.label},e.value))}),p[e.name]&&(0,t.jsx)(m.A,{color:"error",variant:"caption",children:p[e.name]})]});case"custom":return e.render?e.render({value:r,onChange:r=>h(e.name,r),error:p[e.name]}):null;default:return null}})()},e.name)})})}({field:e,item:r,onChange:(r,t)=>P(e,n,r,t),errors:{}})]},n))]},e.name);case"custom":return e.render?e.render({value:r,onChange:n,error:j}):null;default:return null}};return(0,t.jsxs)("form",{onSubmit:H,children:[w&&(0,t.jsx)(m.A,{variant:"h6",sx:{mb:2},children:n[R].label}),(0,t.jsx)(i.A,{spacing:2,sx:{mt:1},children:L.map(e=>O(e,N[e.name],r=>E(e.name,r),I[e.name]))}),(0,t.jsxs)(x.A,{display:"flex",flexDirection:"row",justifyContent:"flex-end",gap:2,mt:2,children:[w&&R>0&&(0,t.jsx)(p.A,{variant:"outlined",color:"primary",onClick:()=>W(e=>e-1),children:"이전"}),"function"==typeof k&&(0,t.jsx)(p.A,{variant:"outlined",color:"primary",onClick:k,children:"취소"}),(0,t.jsx)(p.A,{type:"submit",variant:"contained",color:"primary",sx:{fontWeight:600},disabled:F,children:w&&R<n.length-1?"다음":A})]})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[426,336,69,41,90,59,52,559,156,39,77,358],()=>r(43281)),_N_E=e.O()}]);
